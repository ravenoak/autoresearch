# v0.1.0a1 preflight readiness plan (2025-10-03)

This review applies dialectical and Socratic reasoning to the
Autoresearch improvement proposal and the current release posture. The
goal is to surface the highest-impact work that unblocks the 0.1.0a1
alpha tag while keeping each change scoped to a small, review-friendly
pull request.

## Evidence snapshot

- `uv run mypy --strict src tests` returns success, confirming the
  strict typing gate is green across application and test modules.
  【4b1e56†L1-L2】
- `uv run --extra test pytest` currently fails across verification,
  storage, API, MCP, and search caching tests. The failures highlight
  gaps in fact-checker configuration, backup rotation, cache invalidity,
  FastMCP construction, and API parsing utilities.
  【7be155†L104-L170】【7be155†L201-L262】

The plan below assumes strict typing remains green and focuses on the
fastest path to a green test suite, refreshed coverage evidence, and the
architectural upgrades outlined in the improvement proposal.

## Dialectical evaluation of key initiatives

For each initiative we list the motivating assumption, supporting
arguments, counterpoints, and a synthesis that guides the immediate
next step.

### Adaptive orchestration gate

- **Assumption:** Always-on debate wastes compute and can trigger
  hallucinations.
- **Support:** Auto mode already exists but lacks quantitative
  telemetry on when to skip debate, leaving cost savings unproven.
- **Counterpoint:** Over-aggressive skipping could lower factuality if
  verification trails lag.
- **Synthesis:** Instrument the existing AUTO path with claim coverage
  and confidence metrics, log skip/escalate decisions, and gate debate
  on the recorded evidence. Ship telemetry first, then tune thresholds
  with offline replays.

### Planner–research–debate–verify (PRDV)

- **Assumption:** A lightweight planner increases coverage and keeps
  debate scoped.
- **Support:** Current planner emits linear task lists without
  dependency tracking or Socratic prompts, limiting oversight.
- **Counterpoint:** Adding orchestration complexity without stronger
  verification risks more failure points.
- **Synthesis:** Add dependency-aware plan nodes plus Socratic
  self-check prompts in planner output. Deliver as a prompt/schema
  change guarded by unit tests before touching agent routing logic.

### Retrieval 2.0

- **Assumption:** Static top-k retrieval causes citation blind spots.
- **Support:** Search cache regressions show the current layer still
  revisits stale results and lacks adaptive k.
- **Counterpoint:** Aggressive re-querying increases latency unless the
  cache behaves predictably.
- **Synthesis:** Fix cache determinism first, then introduce adaptive
  query sizing with logging to compare latency against factuality.

### Verification pipeline

- **Assumption:** Claim extraction plus retries lower hallucinations.
- **Support:** Tests reveal FactChecker now rejects missing
  configuration, so the pipeline is brittle.
- **Counterpoint:** Patching tests without fixing configuration will
  mask runtime errors.
- **Synthesis:** Define explicit FactChecker defaults, update the
  reverification configuration contract, and extend tests to cover both
  configured and default paths.

### Heterogeneous agents and tooling

- **Assumption:** Role-specific models reduce cost while preserving
  quality.
- **Support:** Current configuration relies on a single tier, so cost
  telemetry is theoretical.
- **Counterpoint:** Premature multi-model routing without guardrails
  could complicate incident response.
- **Synthesis:** Capture per-role latency and token usage using the
  current model first. Add configurable routing tables in a follow-up
  PR once telemetry makes trade-offs clear.

### Knowledge-graph integration

- **Assumption:** Making the knowledge graph first-class improves
  multi-hop reasoning.
- **Support:** Graph exports exist but tests show backup rotation and
  persistence regressions.
- **Counterpoint:** Persisting additional triples without stable
  backups risks data loss.
- **Synthesis:** Stabilize backup scheduler behaviour, then add KG
  consistency checks plus provenance guards once persistence is
  reliable.

## Highest-impact priorities

1. Restore a green pytest suite by fixing configuration and caching
   regressions in verification, storage backups, API utilities, and
   search caching.
2. Refresh coverage evidence after the test suite is green, keeping the
   92.4% gate enforceable ahead of alpha tagging.
3. Instrument AUTO mode and planner output with the telemetry required
   to tune adaptive debate and PRDV upgrades without guesswork.
4. Document routing, verification, and retrieval decisions so reviewers
   can audit improvements without external context.

## Planned PR slices

Each bullet is scoped for a fast review cycle and can ship
independently.

1. **PR-A:** Normalize FactChecker defaults and update reverification
   fixtures so `test_reverify_extracts_claims_and_retries` passes.
2. **PR-B:** Fix backup scheduler restart logic and rotation policy to
   satisfy `tests/unit/storage/test_backup_scheduler.py`.
3. **PR-C:** Repair search cache and stub behaviours, ensuring backend
   selection and query preservation match expectations.
4. **PR-D:** Restore `autoresearch.api.parse` exports and FastMCP
   adapter construction so API and MCP handshake tests pass.
5. **PR-E:** Add AUTO mode telemetry, capturing skip/escalate decisions
   and evidence coverage for tuning.
6. **PR-F:** Introduce dependency-aware planner prompts with Socratic
   self-checks and regression coverage.
7. **PR-G:** Refresh `task coverage` evidence once PR-A through PR-D
   land, updating release documentation with the new report.

## Coverage and behaviour follow-up

- After PRs A–D, rerun `uv run task verify EXTRAS="nlp ui vss git
  distributed analysis llm parsers"` to confirm lint, mypy, and pytest
  gates are green.
- When the suite passes, capture a fresh `task coverage` log and update
  `docs/release_plan.md`, `STATUS.md`, `TASK_PROGRESS.md`, and
  `CODE_COMPLETE_PLAN.md` with the new evidence.
- Expand behaviour coverage by adding scenarios under the
  `reasoning_modes` tag that exercise AUTO telemetry once PR-E merges.

## Documentation actions

- Mirror this plan in `CODE_COMPLETE_PLAN.md`, `ROADMAP.md`, and the
  alpha release issue so the repository tells a consistent story.
- Add release notes summarising the restored tests and telemetry once
  coverage evidence is refreshed.

