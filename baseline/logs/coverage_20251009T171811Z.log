task: [coverage] echo "[coverage] syncing dependencies"
[coverage] syncing dependencies
task: [coverage] uv sync \
   --extra dev-minimal --extra test \
  

Resolved 328 packages in 8ms
Audited 177 packages in 0.55ms
task: [coverage] echo "[coverage] erasing previous data"
[coverage] erasing previous data
task: [coverage] uv run coverage erase
task: [coverage] echo "[coverage] running unit tests"
[coverage] running unit tests
task: [coverage] uv run pytest --maxfail=1 --durations=10 -x tests/unit \
  -m 'not slow and not requires_git  and not requires_nlp  and not requires_ui  and not requires_vss  and not requires_distributed  and not requires_analysis  and not requires_llm  and not requires_parsers  and not requires_gpu' --cov=src --cov-report=term-missing \
  --cov-append

===================================================== test session starts ======================================================
platform linux -- Python 3.12.10, pytest-8.4.2, pluggy-1.6.0
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /workspace/autoresearch
configfile: pytest.ini
plugins: cov-7.0.0, bdd-8.1.0, timeout-2.4.0, anyio-4.11.0, benchmark-5.1.0, httpx-0.35.0, hypothesis-6.140.3, langsmith-0.4.33
timeout: 300.0s
timeout method: thread
timeout func_only: False
collected 1228 items / 113 deselected / 1 skipped / 1115 selected

tests/unit/api/test_api_llm.py .                                                                                         [  0%]
tests/unit/api/test_routes.py ..                                                                                         [  0%]
tests/unit/config/test_loader_types.py .......                                                                           [  0%]
tests/unit/distributed/test_coordination_properties.py .........                                                         [  1%]
tests/unit/distributed/test_storage_coordinator.py .............                                                         [  2%]
tests/unit/evaluation/test_harness_typing.py .                                                                           [  2%]
tests/unit/evidence/test_stability_utils.py ...                                                                          [  3%]
tests/unit/knowledge/test_graph_pipeline.py ..                                                                           [  3%]
tests/unit/legacy/test_a2a_concurrency_sim.py .                                                                          [  3%]
tests/unit/legacy/test_a2a_interface.py ..............................                                                   [  6%]
tests/unit/legacy/test_additional_algorithm_docs.py .                                                                    [  6%]
tests/unit/legacy/test_additional_coverage.py ...............                                                            [  7%]
tests/unit/legacy/test_advanced_agents.py .......                                                                        [  8%]
tests/unit/legacy/test_agent_communication.py .....                                                                      [  8%]
tests/unit/legacy/test_agent_registry.py ...                                                                             [  8%]
tests/unit/legacy/test_agents_dialectical.py ..                                                                          [  9%]
tests/unit/legacy/test_agents_llm.py .......                                                                             [  9%]
tests/unit/legacy/test_algorithm_docs.py ..                                                                              [  9%]
tests/unit/legacy/test_api.py .......                                                                                    [ 10%]
tests/unit/legacy/test_api_auth_deps.py ...                                                                              [ 10%]
tests/unit/legacy/test_api_auth_middleware.py .....                                                                      [ 11%]
tests/unit/legacy/test_api_error_handling.py ...                                                                         [ 11%]
tests/unit/legacy/test_api_errors.py ..                                                                                  [ 11%]
tests/unit/legacy/test_api_imports.py .                                                                                  [ 11%]
tests/unit/legacy/test_api_lifespan.py .                                                                                 [ 11%]
tests/unit/legacy/test_api_rate_limit.py ....                                                                            [ 12%]
tests/unit/legacy/test_api_token_utils.py ..                                                                             [ 12%]
tests/unit/legacy/test_backup_manager.py ..                                                                              [ 12%]
tests/unit/legacy/test_bm25_scoring.py .                                                                                 [ 12%]
tests/unit/legacy/test_budgeting.py .                                                                                    [ 12%]
tests/unit/legacy/test_cache.py .............                                                                            [ 13%]
tests/unit/legacy/test_cache_deepcopy.py ..                                                                              [ 14%]
tests/unit/legacy/test_cache_extra.py .                                                                                  [ 14%]
tests/unit/legacy/test_check_env_warnings.py .......                                                                     [ 14%]
tests/unit/legacy/test_circuit_breaker_module.py ..                                                                      [ 15%]
tests/unit/legacy/test_cli_backup_extra.py ..........                                                                    [ 15%]
tests/unit/legacy/test_cli_help.py ......                                                                                [ 16%]
tests/unit/legacy/test_cli_helpers.py ...........                                                                        [ 17%]
tests/unit/legacy/test_cli_utils.py .                                                                                    [ 17%]
tests/unit/legacy/test_cli_utils_extra.py ............                                                                   [ 18%]
tests/unit/legacy/test_cli_visualize.py ...                                                                              [ 18%]
tests/unit/legacy/test_coalition_execution.py ..                                                                         [ 19%]
tests/unit/legacy/test_config_env_file.py ..                                                                             [ 19%]
tests/unit/legacy/test_config_errors.py ......                                                                           [ 19%]
tests/unit/legacy/test_config_hot_reload_sim.py ..                                                                       [ 20%]
tests/unit/legacy/test_config_loader_defaults.py ...                                                                     [ 20%]
tests/unit/legacy/test_config_profiles.py .....                                                                          [ 20%]
tests/unit/legacy/test_config_reload.py ..                                                                               [ 20%]
tests/unit/legacy/test_config_utils.py ......                                                                            [ 21%]
tests/unit/legacy/test_config_validation_errors.py ....                                                                  [ 21%]
tests/unit/legacy/test_config_validators_additional.py ..............                                                    [ 23%]
tests/unit/legacy/test_config_watcher_cleanup.py .....                                                                   [ 23%]
tests/unit/legacy/test_core_modules_additional.py .........                                                              [ 24%]
tests/unit/legacy/test_data_analysis.py ...                                                                              [ 24%]
tests/unit/legacy/test_distributed_executors.py ..s.                                                                     [ 24%]
tests/unit/legacy/test_distributed_perf_compare.py .                                                                     [ 25%]
tests/unit/legacy/test_distributed_perf_sim_script.py ...                                                                [ 25%]
tests/unit/legacy/test_download_duckdb_extensions.py .......                                                             [ 25%]
tests/unit/legacy/test_duckdb_storage_backend.py ................                                                        [ 27%]
tests/unit/legacy/test_duckdb_storage_backend_concurrency.py ...                                                         [ 27%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py .............                                                  [ 28%]
tests/unit/legacy/test_error_recovery.py ...                                                                             [ 29%]
tests/unit/legacy/test_error_utils_additional.py .......                                                                 [ 29%]
tests/unit/legacy/test_errors.py .....                                                                                   [ 30%]
tests/unit/legacy/test_eviction.py ...........                                                                           [ 31%]
tests/unit/legacy/test_examples_package.py .                                                                             [ 31%]
tests/unit/legacy/test_failure_paths.py ......                                                                           [ 31%]
tests/unit/legacy/test_failure_scenarios.py .....                                                                        [ 32%]
tests/unit/legacy/test_formattemplate_property.py .                                                                      [ 32%]
tests/unit/legacy/test_future_import_hygiene.py .                                                                        [ 32%]
tests/unit/legacy/test_heuristic_properties.py ....                                                                      [ 32%]
tests/unit/legacy/test_http_session.py .                                                                                 [ 32%]
tests/unit/legacy/test_hybridmethod_guard.py ..                                                                          [ 33%]
tests/unit/legacy/test_incremental_updates.py ...                                                                        [ 33%]
tests/unit/legacy/test_interfaces.py ...                                                                                 [ 33%]
tests/unit/legacy/test_kg_reasoning.py .............                                                                     [ 34%]
tests/unit/legacy/test_llm_adapter.py ....                                                                               [ 35%]
tests/unit/legacy/test_llm_capabilities.py ...................                                                           [ 36%]
tests/unit/legacy/test_llm_docstrings.py ...                                                                             [ 37%]
tests/unit/legacy/test_logging_shutdown.py .                                                                             [ 37%]
tests/unit/legacy/test_logging_utils.py ...                                                                              [ 37%]
tests/unit/legacy/test_logging_utils_env.py ..                                                                           [ 37%]
tests/unit/legacy/test_main_backup_commands.py ............                                                              [ 38%]
tests/unit/legacy/test_main_cli.py .......                                                                               [ 39%]
tests/unit/legacy/test_main_config_commands.py ....                                                                      [ 39%]
tests/unit/legacy/test_main_first_run_detection.py .                                                                     [ 39%]
tests/unit/legacy/test_main_module.py .                                                                                  [ 39%]
tests/unit/legacy/test_main_monitor_commands.py .....                                                                    [ 40%]
tests/unit/legacy/test_metrics.py ..                                                                                     [ 40%]
tests/unit/legacy/test_metrics_counters.py ...                                                                           [ 40%]
tests/unit/legacy/test_metrics_extra.py ..                                                                               [ 40%]
tests/unit/legacy/test_metrics_extra2.py ..                                                                              [ 41%]
tests/unit/legacy/test_metrics_helpers.py ...                                                                            [ 41%]
tests/unit/legacy/test_metrics_heuristics.py ..                                                                          [ 41%]
tests/unit/legacy/test_metrics_misc.py ...                                                                               [ 41%]
tests/unit/legacy/test_metrics_summary.py ..                                                                             [ 41%]
tests/unit/legacy/test_metrics_token_budget_extra.py ..                                                                  [ 42%]
tests/unit/legacy/test_metrics_token_budget_spec.py .......                                                              [ 42%]
tests/unit/legacy/test_models_docstrings.py ....                                                                         [ 43%]
tests/unit/legacy/test_monitor_cli.py .....                                                                              [ 43%]
tests/unit/legacy/test_monitor_metrics_init.py .                                                                         [ 43%]
tests/unit/legacy/test_more_coverage.py ...........                                                                      [ 44%]
tests/unit/legacy/test_new_modules.py ...                                                                                [ 44%]
tests/unit/legacy/test_numpy_stub.py .                                                                                   [ 45%]
tests/unit/legacy/test_ontology_reasoner_props.py .                                                                      [ 45%]
tests/unit/legacy/test_orchestration_utils_delegation.py ..                                                              [ 45%]
tests/unit/legacy/test_orchestration_utils_module.py ....                                                                [ 45%]
tests/unit/legacy/test_orchestrator_breaker_state_transitions.py .                                                       [ 45%]
tests/unit/legacy/test_orchestrator_budget_and_errors.py ....                                                            [ 46%]
tests/unit/legacy/test_orchestrator_cb_manager.py .                                                                      [ 46%]
tests/unit/legacy/test_orchestrator_circuit_breaker_property.py .                                                        [ 46%]
tests/unit/legacy/test_orchestrator_edgecases.py ...                                                                     [ 46%]
tests/unit/legacy/test_orchestrator_errors.py ........s                                                                  [ 47%]
tests/unit/legacy/test_orchestrator_helpers.py ....                                                                      [ 47%]
tests/unit/legacy/test_orchestrator_memory.py ..                                                                         [ 47%]
tests/unit/legacy/test_orchestrator_messages.py .                                                                        [ 47%]
tests/unit/legacy/test_orchestrator_order.py ...                                                                         [ 48%]
tests/unit/legacy/test_orchestrator_parallel_deterministic.py s.                                                         [ 48%]
tests/unit/legacy/test_orchestrator_parallel_property.py .                                                               [ 48%]
tests/unit/legacy/test_orchestrator_perf_sim.py .s..                                                                     [ 48%]
tests/unit/legacy/test_orchestrator_proofs.py .s                                                                         [ 49%]
tests/unit/legacy/test_orchestrator_storage_interface.py ...                                                             [ 49%]
tests/unit/legacy/test_orchestrator_utils.py ..........                                                                  [ 50%]
tests/unit/legacy/test_output_format.py ........................                                                         [ 52%]
tests/unit/legacy/test_output_format_edgecases.py .                                                                      [ 52%]
tests/unit/legacy/test_output_format_edgecases2.py .                                                                     [ 52%]
tests/unit/legacy/test_output_format_extra.py .                                                                          [ 52%]
tests/unit/legacy/test_output_format_extra2.py ..                                                                        [ 52%]
tests/unit/legacy/test_parallel_module.py ....                                                                           [ 53%]
tests/unit/legacy/test_planner_prompt_builder.py ..                                                                      [ 53%]
tests/unit/legacy/test_pool_sessions.py ...                                                                              [ 53%]
tests/unit/legacy/test_prompts_docstrings.py ...                                                                         [ 53%]
tests/unit/legacy/test_property_api_rate_limit_bounds.py .                                                               [ 53%]
tests/unit/legacy/test_property_coordination_fixed_point.py .                                                            [ 54%]
tests/unit/legacy/test_property_coordination_stability.py .                                                              [ 54%]
tests/unit/legacy/test_property_dialectical_coordination.py .                                                            [ 54%]
tests/unit/legacy/test_property_evaluate_weights.py ..                                                                   [ 54%]
tests/unit/legacy/test_property_ontology_reasoner.py ...                                                                 [ 54%]
tests/unit/legacy/test_property_ranking_ties.py .                                                                        [ 54%]
tests/unit/legacy/test_property_resource_monitor_stats.py .                                                              [ 54%]
tests/unit/legacy/test_property_search.py ..                                                                             [ 55%]
tests/unit/legacy/test_property_search_ranking.py ....                                                                   [ 55%]
tests/unit/legacy/test_property_storage.py ...                                                                           [ 55%]
tests/unit/legacy/test_property_token_budget_sequence.py .                                                               [ 55%]
tests/unit/legacy/test_property_token_counting.py ..                                                                     [ 55%]
tests/unit/legacy/test_property_vector_search.py .....                                                                   [ 56%]
tests/unit/legacy/test_property_watch_changes.py .                                                                       [ 56%]
tests/unit/legacy/test_query_state.py .                                                                                  [ 56%]
tests/unit/legacy/test_query_state_features.py ...s                                                                      [ 56%]
tests/unit/legacy/test_ranking_convergence.py .                                                                          [ 57%]
tests/unit/legacy/test_ranking_idempotence.py .                                                                          [ 57%]
tests/unit/legacy/test_ranking_weights.py .....                                                                          [ 57%]
tests/unit/legacy/test_rdf_update.py ..                                                                                  [ 57%]
tests/unit/legacy/test_reasoning_modes.py ...                                                                            [ 58%]
tests/unit/legacy/test_reasoning_strategy.py .                                                                           [ 58%]
tests/unit/legacy/test_relevance_ranking.py ................                                                             [ 59%]
tests/unit/legacy/test_resource_monitor_gpu.py .....                                                                     [ 60%]
tests/unit/legacy/test_resource_monitor_start.py ..                                                                      [ 60%]
tests/unit/legacy/test_resource_monitor_usage.py ....                                                                    [ 60%]
tests/unit/legacy/test_scheduler_benchmark.py ......                                                                     [ 61%]
tests/unit/legacy/test_scheduling_resource_benchmark.py F

=========================================================== FAILURES ===========================================================
__________________________________________________ test_run_benchmark_scaling __________________________________________________

    def test_run_benchmark_scaling():
        """More workers increase throughput and memory scales with tasks."""
        mod = _load_module()
        results = mod.run_benchmark(2, 3, 5, 20, 0.5)
        assert len(results) == 2
    
        one_worker, two_workers = results
        assert one_worker["expected_memory"] == 10.0
        assert len(one_worker["throughput_samples"]) == len(two_workers["throughput_samples"]) >= 3
    
        # Expect near-linear scaling: with twice the workers we target roughly twice the
        # throughput, but allow ±20% wiggle room for scheduling noise and benchmark
        # variability.
        assert two_workers["throughput"] == pytest.approx(
            one_worker["throughput"] * 2,
            rel=0.2,
        )
    
        # Require each sample to comfortably beat the corresponding single-worker
        # measurement. A 1.7x floor leaves room for momentary contention while still
        # flagging regressions that would erode the expected scaling benefit.
        paired_samples = list(
            zip(one_worker["throughput_samples"], two_workers["throughput_samples"])
        )
>       assert all(two >= one * 1.7 for one, two in paired_samples)
E       assert False
E        +  where False = all(<generator object test_run_benchmark_scaling.<locals>.<genexpr> at 0x7f1e18d86500>)

/workspace/autoresearch/tests/unit/legacy/test_scheduling_resource_benchmark.py:48: AssertionError
---------------------------------------------------- Captured log teardown -----------------------------------------------------
INFO     autoresearch.config.loader:loader.py:104 No configuration file found; using defaults
======================================================= warnings summary =======================================================
.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:833
  /workspace/autoresearch/.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:833: PytestAssertRewriteWarning: Module already imported so cannot be rewritten; tests.behavior.utils
    self.import_plugin(import_spec)

tests/unit/legacy/test_future_import_hygiene.py:33
  /workspace/autoresearch/tests/unit/legacy/test_future_import_hygiene.py:33: PytestUnknownMarkWarning: Unknown pytest.mark.quick - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.quick

tests/unit/legacy/test_main_config_commands.py:5
  /workspace/autoresearch/tests/unit/legacy/test_main_config_commands.py:5: DeprecationWarning: 'importlib.abc.Traversable' is deprecated and slated for removal in Python 3.14
    from importlib.abc import Traversable

tests/unit/knowledge/test_graph_pipeline.py::test_session_graph_pipeline_ingest_records_provenance
  /workspace/autoresearch/.venv/lib/python3.12/site-packages/networkx/readwrite/json_graph/node_link.py:145: FutureWarning: 
  The default value will be `edges="edges" in NetworkX 3.6.
  
  To make this warning go away, explicitly set the edges kwarg, e.g.:
  
    nx.node_link_data(G, edges="links") to preserve current behavior, or
    nx.node_link_data(G, edges="edges") for forward compatibility.
    warnings.warn(

tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_reload_without_owlrl
  /workspace/autoresearch/src/autoresearch/kg_reasoning.py:60: RuntimeWarning: owlrl not installed; ontology reasoning will be skipped
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
===================================================== slowest 10 durations =====================================================
6.33s call     tests/unit/legacy/test_relevance_ranking.py::test_external_lookup_uses_cache
6.14s call     tests/unit/legacy/test_cache.py::test_sequential_hybrid_sequences_respect_cache_fingerprint
3.64s call     tests/unit/legacy/test_cache.py::test_interleaved_storage_paths_share_cache
3.06s call     tests/unit/legacy/test_cache.py::test_v2_cache_entries_upgrade_on_hit
2.72s call     tests/unit/legacy/test_cache.py::test_legacy_cache_entries_upgrade_on_hit
2.50s call     tests/unit/legacy/test_property_ontology_reasoner.py::test_reasoner_timeout
2.46s call     tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_start_storage_coordinator_returns_correct_types
2.44s call     tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_concurrent_message_processing
2.44s call     tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_message_processing_integration
2.38s call     tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_error_handling_in_message_processing
=================================================== short test summary info ====================================================
FAILED tests/unit/legacy/test_scheduling_resource_benchmark.py::test_run_benchmark_scaling - assert False
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
======================= 1 failed, 675 passed, 7 skipped, 113 deselected, 5 warnings in 118.89s (0:01:58) =======================
task: Failed to run task "coverage": exit status 1
