[coverage] syncing dependencies
[coverage] erasing previous data
[coverage] running unit tests
===================================================== test session starts ======================================================
platform linux -- Python 3.12.10, pytest-8.4.2, pluggy-1.6.0 -- /workspace/autoresearch/.venv/bin/python3
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /workspace/autoresearch
configfile: pytest.ini
plugins: langsmith-0.4.30, cov-7.0.0, bdd-8.1.0, hypothesis-6.140.1, httpx-0.35.0, benchmark-5.1.0, anyio-4.10.0
collecting ... collected 981 items / 26 deselected / 955 selected

tests/unit/distributed/test_coordination_properties.py::test_election_converges_to_minimum PASSED                        [  0%]
tests/unit/distributed/test_coordination_properties.py::test_election_requires_identifier PASSED                         [  0%]
tests/unit/distributed/test_coordination_properties.py::test_election_accepts_strings PASSED                             [  0%]
tests/unit/distributed/test_coordination_properties.py::test_message_processing_is_idempotent PASSED                     [  0%]
tests/unit/distributed/test_coordination_properties.py::test_message_processing_returns_copy PASSED                      [  0%]
tests/unit/distributed/test_coordination_properties.py::test_module_exports_helpers PASSED                               [  0%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_scaled_by_loops_and_limits PASSED                      [  0%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_minimum_buffer_applied PASSED                          [  0%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_unchanged_within_bounds PASSED                         [  0%]
tests/unit/orchestration/test_circuit_breaker_determinism.py::test_circuit_breaker_determinism_and_recovery PASSED       [  1%]
tests/unit/orchestration/test_circuit_breaker_thresholds.py::test_circuit_breaker_threshold_and_recovery PASSED          [  1%]
tests/unit/orchestration/test_orchestration_simulations.py::test_circuit_breaker_sim_is_deterministic PASSED             [  1%]
tests/unit/orchestration/test_orchestration_simulations.py::test_parallel_execution_sim_is_deterministic PASSED          [  1%]
tests/unit/orchestration/test_orchestration_simulations.py::test_cli_runs_modes PASSED                                   [  1%]
tests/unit/orchestration/test_parallel_execute.py::test_execute_parallel_query_error_and_timeout PASSED                  [  1%]
tests/unit/orchestration/test_parallel_execute.py::test_execute_parallel_query_all_fail PASSED                           [  1%]
tests/unit/orchestration/test_parallel_merge_invariant.py::test_parallel_merge_invariant PASSED                          [  1%]
tests/unit/orchestration/test_utils_confidence.py::test_calculate_confidence_rewards_signal PASSED                       [  1%]
tests/unit/orchestration/test_utils_confidence.py::test_calculate_confidence_penalties PASSED                            [  1%]
tests/unit/search/test_property_ranking_monotonicity.py::test_monotonic_ranking PASSED                                   [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges PASSED                             [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_reset_instance_creates_new_singleton PASSED                  [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_extract_entities_with_spacy PASSED                           [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_build_topic_model_with_insufficient_docs PASSED              [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_try_imports_disabled PASSED                                  [  2%]
tests/unit/search/test_query_expansion_convergence.py::test_try_import_sentence_transformers_success PASSED              [  2%]
tests/unit/search/test_ranking_convergence_simulation.py::test_ranking_converges SKIPPED (CollectorRegistry duplication
in test environment)                                                                                                     [  2%]
tests/unit/search/test_ranking_convergence_simulation.py::test_invalid_weights_raise SKIPPED (CollectorRegistry
duplication in test environment)                                                                                         [  2%]
tests/unit/search/test_ranking_formula.py::test_combine_scores_weighted_sum PASSED                                       [  3%]
tests/unit/search/test_ranking_formula.py::test_combine_scores_requires_convex_weights PASSED                            [  3%]
tests/unit/search/test_ranking_formula.py::test_duckdb_scores_used_without_semantic PASSED                               [  3%]
tests/unit/search/test_ranking_formula.py::test_rank_results_weighted_combination PASSED                                 [  3%]
tests/unit/search/test_ranking_formula.py::test_rank_results_weight_fallback PASSED                                      [  3%]
tests/unit/search/test_session_retry.py::test_http_session_retries_and_reuse PASSED                                      [  3%]
tests/unit/search/test_session_retry.py::test_http_session_recovery PASSED                                               [  3%]
tests/unit/search/test_simulate_rate_limit.py::test_default_backoff PASSED                                               [  3%]
tests/unit/search/test_simulate_rate_limit.py::test_custom_backoff PASSED                                                [  3%]
tests/unit/test_a2a_concurrency_sim.py::test_simulation_counts PASSED                                                    [  3%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_init PASSED                                                     [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_start PASSED                                                    [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_stop PASSED                                                     [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_query PASSED                                             [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_command_get_capabilities PASSED                          [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_command_get_config PASSED                                [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_command_set_config PASSED                                [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_command_unknown PASSED                                   [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_info PASSED                                              [  4%]
tests/unit/test_a2a_interface.py::TestA2AInterface::test_handle_query_concurrent PASSED                                  [  5%]
tests/unit/test_a2a_interface.py::TestA2AClient::test_init PASSED                                                        [  5%]
tests/unit/test_a2a_interface.py::TestA2AClient::test_query_agent PASSED                                                 [  5%]
tests/unit/test_a2a_interface.py::TestA2AClient::test_get_agent_capabilities PASSED                                      [  5%]
tests/unit/test_a2a_interface.py::TestA2AClient::test_get_agent_config PASSED                                            [  5%]
tests/unit/test_a2a_interface.py::TestA2AClient::test_set_agent_config PASSED                                            [  5%]
tests/unit/test_a2a_interface.py::test_get_a2a_client PASSED                                                             [  5%]
tests/unit/test_a2a_interface.py::test_requires_a2a_decorator_available PASSED                                           [  5%]
tests/unit/test_a2a_interface.py::test_requires_a2a_decorator_not_available PASSED                                       [  5%]
tests/unit/test_a2a_interface.py::test_handle_query_exception PASSED                                                     [  5%]
tests/unit/test_a2a_interface.py::test_handle_set_config_invalid PASSED                                                  [  6%]
tests/unit/test_a2a_interface.py::test_dispatch_simulation_invariants PASSED                                             [  6%]
tests/unit/test_a2a_interface.py::test_simulation_event_order PASSED                                                     [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_init PASSED                                                [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_query_agent PASSED                                         [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_get_agent_capabilities PASSED                              [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_get_agent_config PASSED                                    [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_set_agent_config PASSED                                    [  6%]
tests/unit/test_a2a_interface.py::TestA2AClientExtended::test_query_agent_error PASSED                                   [  6%]
tests/unit/test_a2a_mcp_handshake.py::test_handshake_success PASSED                                                      [  7%]
tests/unit/test_a2a_mcp_handshake.py::test_handshake_timeout PASSED                                                      [  7%]
tests/unit/test_a2a_mcp_handshake.py::test_handshake_recovery PASSED                                                     [  7%]
tests/unit/test_additional_algorithm_docs.py::test_algorithm_docs_exist PASSED                                           [  7%]
tests/unit/test_additional_coverage.py::test_log_release_tokens_invalid_json PASSED                                      [  7%]
tests/unit/test_additional_coverage.py::test_circuit_breaker_transitions PASSED                                          [  7%]
tests/unit/test_additional_coverage.py::test_circuit_breaker_recovery PASSED                                             [  7%]
tests/unit/test_additional_coverage.py::test_circuit_breaker_success_decrements PASSED                                   [  7%]
tests/unit/test_additional_coverage.py::test_http_session_reuse_and_close PASSED                                         [  7%]
tests/unit/test_additional_coverage.py::test_set_get_delegate PASSED                                                     [  7%]
tests/unit/test_additional_coverage.py::test_pop_low_score_missing_confidence PASSED                                     [  8%]
tests/unit/test_additional_coverage.py::test_output_formatter_invalid PASSED                                             [  8%]
tests/unit/test_additional_coverage.py::test_streamlit_metrics PASSED                                                    [  8%]
tests/unit/test_advanced_agents.py::test_domain_specialist_execute PASSED                                                [  8%]
tests/unit/test_advanced_agents.py::test_domain_specialist_can_execute PASSED                                            [  8%]
tests/unit/test_advanced_agents.py::test_moderator_execute PASSED                                                        [  8%]
tests/unit/test_advanced_agents.py::test_moderator_can_execute PASSED                                                    [  8%]
tests/unit/test_advanced_agents.py::test_user_agent_execute PASSED                                                       [  8%]
tests/unit/test_advanced_agents.py::test_user_agent_can_execute PASSED                                                   [  8%]
tests/unit/test_advanced_agents.py::test_planner_metadata PASSED                                                         [  9%]
tests/unit/test_agent_communication.py::test_message_exchange_and_feedback PASSED                                        [  9%]
tests/unit/test_agent_communication.py::test_coalition_management_in_state PASSED                                        [  9%]
tests/unit/test_agent_communication.py::test_agent_registry_coalitions PASSED                                            [  9%]
tests/unit/test_agent_communication.py::test_orchestrator_handles_coalitions PASSED                                      [  9%]
tests/unit/test_agent_communication.py::test_message_protocols PASSED                                                    [  9%]
tests/unit/test_agent_registry.py::test_register_and_get_cached_instance PASSED                                          [  9%]
tests/unit/test_agent_registry.py::test_get_unknown_agent_raises PASSED                                                  [  9%]
tests/unit/test_agent_registry.py::test_reset_instances PASSED                                                           [  9%]
tests/unit/test_agents_llm.py::test_synthesizer_with_injected_adapter PASSED                                             [  9%]
tests/unit/test_agents_llm.py::test_contrarian_with_injected_adapter PASSED                                              [ 10%]
tests/unit/test_agents_llm.py::test_fact_checker_with_injected_adapter PASSED                                            [ 10%]
tests/unit/test_agents_llm.py::test_agent_factory_with_injected_adapter PASSED                                           [ 10%]
tests/unit/test_agents_llm.py::test_synthesizer_dynamic PASSED                                                           [ 10%]
tests/unit/test_agents_llm.py::test_contrarian_dynamic PASSED                                                            [ 10%]
tests/unit/test_agents_llm.py::test_fact_checker_sources PASSED                                                          [ 10%]
tests/unit/test_algorithm_docs.py::test_algorithm_docs_exist PASSED                                                      [ 10%]
tests/unit/test_algorithm_docs.py::test_core_docstrings_reference_docs PASSED                                            [ 10%]
tests/unit/test_api.py::test_dynamic_limit PASSED                                                                        [ 10%]
tests/unit/test_api.py::test_api_key_roles PASSED                                                                        [ 10%]
tests/unit/test_api.py::test_batch_query_invalid_page PASSED                                                             [ 11%]
tests/unit/test_api.py::test_fallback_no_limit PASSED                                                                    [ 11%]
tests/unit/test_api.py::test_fallback_multiple_ips PASSED                                                                [ 11%]
tests/unit/test_api.py::test_request_log_thread_safety PASSED                                                            [ 11%]
tests/unit/test_api_auth_deps.py::test_require_permission_allows PASSED                                                  [ 11%]
tests/unit/test_api_auth_deps.py::test_require_permission_auth_missing PASSED                                            [ 11%]
tests/unit/test_api_auth_deps.py::test_require_permission_forbidden PASSED                                               [ 11%]
tests/unit/test_api_auth_middleware.py::test_resolve_role_valid_key PASSED                                               [ 11%]
tests/unit/test_api_auth_middleware.py::test_resolve_role_invalid_key PASSED                                             [ 11%]
tests/unit/test_api_auth_middleware.py::test_resolve_role_missing_key PASSED                                             [ 12%]
tests/unit/test_api_auth_middleware.py::test_dispatch_invalid_token PASSED                                               [ 12%]
tests/unit/test_api_auth_middleware.py::test_dispatch_valid_token PASSED                                                 [ 12%]
tests/unit/test_api_error_handling.py::test_query_endpoint_runtime_error PASSED                                          [ 12%]
tests/unit/test_api_error_handling.py::test_query_endpoint_invalid_response PASSED                                       [ 12%]
tests/unit/test_api_error_handling.py::test_simulate_api_auth_error_rates PASSED                                         [ 12%]
tests/unit/test_api_errors.py::test_handle_rate_limit_response PASSED                                                    [ 12%]
tests/unit/test_api_errors.py::test_handle_rate_limit_text PASSED                                                        [ 12%]
tests/unit/test_api_imports.py::test_no_unused_imports PASSED                                                            [ 12%]
tests/unit/test_api_lifespan.py::test_lifespan_startup_shutdown PASSED                                                   [ 12%]
tests/unit/test_api_rate_limit.py::test_initial_burst_and_refill PASSED                                                  [ 13%]
tests/unit/test_api_rate_limit.py::test_partial_refill PASSED                                                            [ 13%]
tests/unit/test_api_rate_limit.py::test_clock_drift PASSED                                                               [ 13%]
tests/unit/test_api_rate_limit.py::test_invalid_parameters PASSED                                                        [ 13%]
tests/unit/test_api_token_utils.py::test_generate_bearer_token_unique PASSED                                             [ 13%]
tests/unit/test_api_token_utils.py::test_verify_bearer_token PASSED                                                      [ 13%]
tests/unit/test_backup_manager.py::test_create_and_restore_backup PASSED                                                 [ 13%]
tests/unit/test_backup_manager.py::test_backup_scheduler_start_stop PASSED                                               [ 13%]
tests/unit/test_bm25_scoring.py::test_calculate_bm25_scores_real_documents PASSED                                        [ 13%]
tests/unit/test_budgeting.py::test_apply_adaptive_token_budget_paths PASSED                                              [ 14%]
tests/unit/test_budgeting_module.py::test_budget_scaled_by_loops_and_capped PASSED                                       [ 14%]
tests/unit/test_budgeting_module.py::test_budget_increased_when_too_low PASSED                                           [ 14%]
tests/unit/test_budgeting_module.py::test_budget_unchanged_when_within_bounds PASSED                                     [ 14%]
tests/unit/test_budgeting_module.py::test_budget_noop_when_missing PASSED                                                [ 14%]
tests/unit/test_cache.py::test_search_uses_cache PASSED                                                                  [ 14%]
tests/unit/test_cache.py::test_cache_lifecycle PASSED                                                                    [ 14%]
tests/unit/test_cache.py::test_setup_thread_safe PASSED                                                                  [ 14%]
tests/unit/test_cache.py::test_cache_is_backend_specific PASSED                                                          [ 14%]
tests/unit/test_cache.py::test_cache_is_backend_specific_without_embeddings PASSED                                       [ 14%]
tests/unit/test_cache.py::test_context_aware_query_expansion_uses_cache PASSED                                           [ 15%]
tests/unit/test_cache_deepcopy.py::test_cache_results_are_deepcopied PASSED                                              [ 15%]
tests/unit/test_cache_deepcopy.py::test_get_cache_returns_singleton PASSED                                               [ 15%]
tests/unit/test_cache_extra.py::test_get_db_after_teardown PASSED                                                        [ 15%]
tests/unit/test_check_env_warnings.py::test_missing_package_metadata_raises PASSED                                       [ 15%]
tests/unit/test_check_env_warnings.py::test_missing_pytest_bdd_raises PASSED                                             [ 15%]
tests/unit/test_check_env_warnings.py::test_missing_go_task_raises PASSED                                                [ 15%]
tests/unit/test_check_env_warnings.py::test_missing_uv_raises_version_error PASSED                                       [ 15%]
tests/unit/test_check_env_warnings.py::test_task_command_failure PASSED                                                  [ 15%]
tests/unit/test_check_env_warnings.py::test_main_reports_missing_metadata PASSED                                         [ 16%]
tests/unit/test_circuit_breaker_module.py::test_state_transitions PASSED                                                 [ 16%]
tests/unit/test_circuit_breaker_module.py::test_recovery PASSED                                                          [ 16%]
tests/unit/test_cli_backup_extra.py::test_format_size_units PASSED                                                       [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_create_error PASSED                                                     [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_create_missing_tables PASSED                                            [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_create_success PASSED                                                   [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_restore_cancelled PASSED                                                [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_restore_error PASSED                                                    [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_list_no_backups PASSED                                                  [ 16%]
tests/unit/test_cli_backup_extra.py::test_backup_list_success PASSED                                                     [ 17%]
tests/unit/test_cli_backup_extra.py::test_backup_recover_invalid_timestamp PASSED                                        [ 17%]
tests/unit/test_cli_backup_extra.py::test_backup_recover_error PASSED                                                    [ 17%]
tests/unit/test_cli_help.py::test_cli_help_no_ansi PASSED                                                                [ 17%]
tests/unit/test_cli_help.py::test_search_help_includes_interactive PASSED                                                [ 17%]
tests/unit/test_cli_help.py::test_search_help_includes_visualize PASSED                                                  [ 17%]
tests/unit/test_cli_help.py::test_search_loops_option PASSED                                                             [ 17%]
tests/unit/test_cli_help.py::test_search_help_includes_ontology_flags PASSED                                             [ 17%]
tests/unit/test_cli_help.py::test_visualize_help_includes_layout PASSED                                                  [ 17%]
tests/unit/test_cli_helpers.py::test_find_similar_commands_basic PASSED                                                  [ 18%]
tests/unit/test_cli_helpers.py::test_find_similar_commands_default_threshold PASSED                                      [ 18%]
tests/unit/test_cli_helpers.py::test_parse_agent_groups_parses_nested_lists PASSED                                       [ 18%]
tests/unit/test_cli_helpers.py::test_find_similar_commands_respects_threshold PASSED                                     [ 18%]
tests/unit/test_cli_helpers.py::test_parse_agent_groups_discards_empty_groups PASSED                                     [ 18%]
tests/unit/test_cli_helpers.py::test_require_api_key_missing_header PASSED                                               [ 18%]
tests/unit/test_cli_helpers.py::test_require_api_key_accepts_present_header PASSED                                       [ 18%]
tests/unit/test_cli_helpers.py::test_report_missing_tables_sorts_and_prints PASSED                                       [ 18%]
tests/unit/test_cli_helpers.py::test_report_missing_tables_uses_console PASSED                                           [ 18%]
tests/unit/test_cli_helpers.py::test_handle_command_not_found_suggests_similar PASSED                                    [ 18%]
tests/unit/test_cli_helpers.py::test_install_help_text_in_readme PASSED                                                  [ 19%]
tests/unit/test_cli_utils_extra.py::test_print_error_suggestion PASSED                                                   [ 19%]
tests/unit/test_cli_utils_extra.py::test_verbosity_roundtrip PASSED                                                      [ 19%]
tests/unit/test_cli_utils_extra.py::test_set_verbosity_sets_env PASSED                                                   [ 19%]
tests/unit/test_cli_utils_extra.py::test_ascii_and_table_empty PASSED                                                    [ 19%]
tests/unit/test_cli_utils_extra.py::test_format_functions PASSED                                                         [ 19%]
tests/unit/test_cli_visualize.py::test_ascii_bar_graph_basic PASSED                                                      [ 19%]
tests/unit/test_cli_visualize.py::test_summary_table_render PASSED                                                       [ 19%]
tests/unit/test_cli_visualize.py::test_search_visualize_option PASSED                                                    [ 19%]
tests/unit/test_coalition_execution.py::test_coalition_agents_run_together PASSED                                        [ 20%]
tests/unit/test_coalition_execution.py::test_configmodel_from_dict_allows_coalitions PASSED                              [ 20%]
tests/unit/test_config_env_file.py::test_config_spec_exists PASSED                                                       [ 20%]
tests/unit/test_config_env_file.py::test_env_file_parsing PASSED                                                         [ 20%]
tests/unit/test_config_errors.py::test_config_spec_exists PASSED                                                         [ 20%]
tests/unit/test_config_errors.py::test_load_config_file_error PASSED                                                     [ 20%]
tests/unit/test_config_errors.py::test_notify_observers_error PASSED                                                     [ 20%]
tests/unit/test_config_errors.py::test_watch_config_files_error PASSED                                                   [ 20%]
tests/unit/test_config_errors.py::test_watch_config_reload_error PASSED                                                  [ 20%]
tests/unit/test_config_errors.py::test_reset_instance_error PASSED                                                       [ 20%]
tests/unit/test_config_hot_reload_sim.py::test_config_hot_reload_sim PASSED                                              [ 21%]
tests/unit/test_config_hot_reload_sim.py::test_invalid_update_logged PASSED                                              [ 21%]
tests/unit/test_config_loader_defaults.py::test_config_spec_exists PASSED                                                [ 21%]
tests/unit/test_config_loader_defaults.py::test_invalid_env_falls_back_to_defaults PASSED                                [ 21%]
tests/unit/test_config_loader_defaults.py::test_validate_without_config_file PASSED                                      [ 21%]
tests/unit/test_config_profiles.py::test_config_spec_exists PASSED                                                       [ 21%]
tests/unit/test_config_profiles.py::test_config_profiles_default PASSED                                                  [ 21%]
tests/unit/test_config_profiles.py::test_config_profiles_switch PASSED                                                   [ 21%]
tests/unit/test_config_profiles.py::test_config_profiles_invalid PASSED                                                  [ 21%]
tests/unit/test_config_profiles.py::test_config_profiles_merge PASSED                                                    [ 21%]
tests/unit/test_config_reload.py::test_config_spec_exists PASSED                                                         [ 22%]
tests/unit/test_config_reload.py::test_config_reload_on_change PASSED                                                    [ 22%]
tests/unit/test_config_utils.py::test_config_spec_exists PASSED                                                          [ 22%]
tests/unit/test_config_utils.py::test_module_docstring_mentions_spec PASSED                                              [ 22%]
tests/unit/test_config_utils.py::test_apply_preset_returns_configuration PASSED                                          [ 22%]
tests/unit/test_config_utils.py::test_apply_preset_unknown_name PASSED                                                   [ 22%]
tests/unit/test_config_utils.py::test_validate_config_success PASSED                                                     [ 22%]
tests/unit/test_config_utils.py::test_validate_config_failure PASSED                                                     [ 22%]
tests/unit/test_config_validation_errors.py::test_config_spec_exists PASSED                                              [ 22%]
tests/unit/test_config_validation_errors.py::test_invalid_rdf_backend PASSED                                             [ 23%]
tests/unit/test_config_validation_errors.py::test_weights_must_sum_to_one PASSED                                         [ 23%]
tests/unit/test_config_validation_errors.py::test_default_config_loads_without_error PASSED                              [ 23%]
tests/unit/test_config_validators_additional.py::test_config_spec_exists PASSED                                          [ 23%]
tests/unit/test_config_validators_additional.py::test_reasoning_mode_valid[direct-direct0] PASSED                        [ 23%]
tests/unit/test_config_validators_additional.py::test_reasoning_mode_valid[direct-direct1] PASSED                        [ 23%]
tests/unit/test_config_validators_additional.py::test_reasoning_mode_invalid PASSED                                      [ 23%]
tests/unit/test_config_validators_additional.py::test_token_budget_valid[None] PASSED                                    [ 23%]
tests/unit/test_config_validators_additional.py::test_token_budget_valid[10] PASSED                                      [ 23%]
tests/unit/test_config_validators_additional.py::test_token_budget_invalid[0] PASSED                                     [ 23%]
tests/unit/test_config_validators_additional.py::test_token_budget_invalid[-5] PASSED                                    [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_valid[LRU] PASSED                                  [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_valid[score] PASSED                                [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_valid[hybrid] PASSED                               [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_valid[priority] PASSED                             [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_valid[adaptive] PASSED                             [ 24%]
tests/unit/test_config_validators_additional.py::test_eviction_policy_invalid PASSED                                     [ 24%]
tests/unit/test_config_watcher_cleanup.py::test_config_spec_exists PASSED                                                [ 24%]
tests/unit/test_config_watcher_cleanup.py::test_cli_watcher_cleanup PASSED                                               [ 24%]
tests/unit/test_config_watcher_cleanup.py::test_api_watcher_cleanup PASSED                                               [ 25%]
tests/unit/test_config_watcher_cleanup.py::test_cli_watcher_cleanup_error PASSED                                         [ 25%]
tests/unit/test_config_watcher_cleanup.py::test_api_watcher_cleanup_error PASSED                                         [ 25%]
tests/unit/test_core_modules_additional.py::test_orchestrator_parse_config_basic PASSED                                  [ 25%]
tests/unit/test_core_modules_additional.py::test_search_stub_backend[legacy] PASSED                                      [ 25%]
tests/unit/test_core_modules_additional.py::test_search_stub_backend[vss-enabled] PASSED                                 [ 25%]
tests/unit/test_core_modules_additional.py::test_search_stub_backend_return_handles_fallback PASSED                      [ 25%]
tests/unit/test_core_modules_additional.py::test_planner_execute PASSED                                                  [ 25%]
tests/unit/test_core_modules_additional.py::test_storage_setup_teardown SKIPPED (Kuzu backend not available)             [ 25%]
tests/unit/test_core_modules_additional.py::test_storage_setup_without_kuzu PASSED                                       [ 25%]
tests/unit/test_data_analysis.py::test_metrics_dataframe_enabled PASSED                                                  [ 26%]
tests/unit/test_data_analysis.py::test_metrics_dataframe_disabled PASSED                                                 [ 26%]
tests/unit/test_data_analysis.py::test_metrics_dataframe_polars_missing PASSED                                           [ 26%]
tests/unit/test_data_analysis_polars.py::test_metrics_dataframe_summary PASSED                                           [ 26%]
tests/unit/test_distributed.py::test_get_message_broker_invalid PASSED                                                   [ 26%]
tests/unit/test_distributed.py::test_publish_claim_inmemory SKIPPED (multiprocessing Manager unsupported in this
environment)                                                                                                             [ 26%]
tests/unit/test_distributed_broker.py::test_get_message_broker_memory SKIPPED (multiprocessing Manager unsupported in
this environment)                                                                                                        [ 26%]
tests/unit/test_distributed_broker.py::test_get_message_broker_invalid PASSED                                            [ 26%]
tests/unit/test_distributed_broker.py::test_redis_broker_requires_dependency PASSED                                      [ 26%]
tests/unit/test_distributed_broker.py::test_ray_broker_publish PASSED                                                    [ 27%]
tests/unit/test_distributed_broker_import_error.py::test_redis_broker_missing_dependency PASSED                          [ 27%]
tests/unit/test_distributed_coordination_benchmark.py::test_benchmark_scales SKIPPED (multiprocessing Manager
unsupported in this environment)                                                                                         [ 27%]
tests/unit/test_distributed_coordination_benchmark.py::test_benchmark_survives_worker_crash SKIPPED (multiprocessing
Manager unsupported in this environment)                                                                                 [ 27%]
tests/unit/test_distributed_coordination_props.py::test_leader_is_minimum PASSED                                         [ 27%]
tests/unit/test_distributed_coordination_props.py::test_message_ordering_preserved SKIPPED (multiprocessing Manager
unsupported in this environment)                                                                                         [ 27%]
tests/unit/test_distributed_executors.py::test_execute_agent_process PASSED                                              [ 27%]
tests/unit/test_distributed_executors.py::test_execute_agent_remote SKIPPED (Real Ray clusters require package-level
agent registration; serialization is covered by test_query_state_ray_round_trip.)                                        [ 27%]
tests/unit/test_distributed_executors.py::test_query_state_cloudpickle_round_trip PASSED                                 [ 27%]
tests/unit/test_distributed_executors.py::test_query_state_ray_round_trip PASSED                                         [ 27%]
tests/unit/test_distributed_extra.py::test_get_message_broker_default SKIPPED (multiprocessing Manager unsupported in
this environment)                                                                                                        [ 28%]
tests/unit/test_distributed_extra.py::test_redis_queue_roundtrip SKIPPED (multiprocessing Manager unsupported in this
environment)                                                                                                             [ 28%]
tests/unit/test_distributed_perf_compare.py::test_compare_matches_theory_within_tolerance PASSED                         [ 28%]
tests/unit/test_distributed_perf_sim_script.py::test_latency_decreases_with_workers PASSED                               [ 28%]
tests/unit/test_distributed_perf_sim_script.py::test_cli_execution PASSED                                                [ 28%]
tests/unit/test_distributed_perf_sim_script.py::test_cli_requires_arguments PASSED                                       [ 28%]
tests/unit/test_distributed_redis.py::test_get_message_broker_redis_roundtrip PASSED                                     [ 28%]
tests/unit/test_distributed_redis.py::test_get_message_broker_redis_missing PASSED                                       [ 28%]
tests/unit/test_download_duckdb_extensions.py::test_download_extension_network_fallback PASSED                           [ 28%]
tests/unit/test_download_duckdb_extensions.py::test_download_extension_creates_stub_when_offline PASSED                  [ 29%]
tests/unit/test_download_duckdb_extensions.py::test_download_extension_offline_without_duckdb PASSED                     [ 29%]
tests/unit/test_download_duckdb_extensions.py::test_download_extension_fallback_path PASSED                              [ 29%]
tests/unit/test_download_duckdb_extensions.py::test_offline_fallback_skips_samefile_copy PASSED                          [ 29%]
tests/unit/test_download_duckdb_extensions.py::test_setup_sh_ignores_smoke_failure_with_stub PASSED                      [ 29%]
tests/unit/test_download_duckdb_extensions.py::test_load_offline_env_sets_vector_extension_path PASSED                   [ 29%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_init PASSED                                    [ 29%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_default_path PASSED                 [ 29%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_custom_path PASSED                  [ 29%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_connection_error PASSED             [ 29%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_table_creation_failure PASSED            [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_missing_extension_continues PASSED       [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_create_tables PASSED                           [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_initialize_schema_version PASSED               [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_get_schema_version PASSED                      [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_get_schema_version_no_version PASSED           [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_update_schema_version PASSED                   [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_run_migrations PASSED                          [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_has_vss_true PASSED                            [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_has_vss_false PASSED                           [ 30%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_close PASSED                                   [ 31%]
tests/unit/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_clear PASSED                                   [ 31%]
tests/unit/test_duckdb_storage_backend_concurrency.py::test_concurrent_setup_is_idempotent PASSED                        [ 31%]
tests/unit/test_duckdb_storage_backend_concurrency.py::test_initialize_schema_version_failure PASSED                     [ 31%]
tests/unit/test_duckdb_storage_backend_concurrency.py::test_persist_claims_concurrent PASSED                             [ 31%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index PASSED      [ 31%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index_extension_not_loaded PASSED [ 31%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index_error PASSED [ 31%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim PASSED          [ 31%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim_minimal PASSED  [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim_error PASSED    [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search PASSED          [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search_vss_not_available PASSED [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search_error PASSED    [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_get_connection PASSED         [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_get_connection_not_initialized PASSED [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_update_claim_full_replace PASSED [ 32%]
tests/unit/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_update_claim_partial PASSED   [ 32%]
tests/unit/test_error_recovery.py::test_retry_with_backoff_succeeds_on_first_try PASSED                                  [ 32%]
tests/unit/test_error_recovery.py::test_retry_with_backoff_retries_until_success PASSED                                  [ 33%]
tests/unit/test_error_recovery.py::test_retry_with_backoff_raises_after_max_retries PASSED                               [ 33%]
tests/unit/test_error_utils_additional.py::test_error_info_to_dict_and_str PASSED                                        [ 33%]
tests/unit/test_error_utils_additional.py::test_formatters PASSED                                                        [ 33%]
tests/unit/test_error_utils_additional.py::test_timeout_sets_warning PASSED                                              [ 33%]
tests/unit/test_error_utils_additional.py::test_redacted_context_preserved PASSED                                        [ 33%]
tests/unit/test_error_utils_additional.py::test_get_error_info[exc0-Check your configuration file] PASSED                [ 33%]
tests/unit/test_error_utils_additional.py::test_get_error_info[exc1-API key] PASSED                                      [ 33%]
tests/unit/test_error_utils_additional.py::test_get_error_info[exc2-5] PASSED                                            [ 33%]
tests/unit/test_errors.py::test_error_hierarchy PASSED                                                                   [ 34%]
tests/unit/test_errors.py::test_error_messages PASSED                                                                    [ 34%]
tests/unit/test_errors.py::test_error_with_cause PASSED                                                                  [ 34%]
tests/unit/test_errors.py::test_timeout_error PASSED                                                                     [ 34%]
tests/unit/test_errors.py::test_not_found_error PASSED                                                                   [ 34%]
tests/unit/test_eviction.py::test_ram_eviction_skips_without_metrics PASSED                                              [ 34%]
tests/unit/test_eviction.py::test_ram_eviction PASSED                                                                    [ 34%]
tests/unit/test_eviction.py::test_score_eviction PASSED                                                                  [ 34%]
tests/unit/test_eviction.py::test_lru_eviction_order PASSED                                                              [ 34%]
tests/unit/test_eviction.py::test_lru_eviction_sequence PASSED                                                           [ 34%]
tests/unit/test_eviction.py::test_lru_eviction_respects_minimum_survivors PASSED                                         [ 35%]
tests/unit/test_eviction.py::test_initialize_storage_in_memory PASSED                                                    [ 35%]
tests/unit/test_eviction.py::test_initialize_storage_file_path PASSED                                                    [ 35%]
tests/unit/test_examples_package.py::test_sample_configuration PASSED                                                    [ 35%]
tests/unit/test_extras_markers.py::test_nlp_marker PASSED                                                                [ 35%]
tests/unit/test_extras_markers.py::test_ui_marker PASSED                                                                 [ 35%]
tests/unit/test_extras_markers.py::test_vss_marker PASSED                                                                [ 35%]
tests/unit/test_extras_markers.py::test_git_marker PASSED                                                                [ 35%]
tests/unit/test_extras_markers.py::test_distributed_marker PASSED                                                        [ 35%]
tests/unit/test_extras_markers.py::test_analysis_marker PASSED                                                           [ 36%]
tests/unit/test_extras_markers.py::test_llm_marker PASSED                                                                [ 36%]
tests/unit/test_extras_markers.py::test_parsers_marker PASSED                                                            [ 36%]
tests/unit/test_extras_markers.py::test_gpu_marker PASSED                                                                [ 36%]
tests/unit/test_failure_paths.py::test_prompt_registry_unknown PASSED                                                    [ 36%]
tests/unit/test_failure_paths.py::test_prompt_render_missing_variable PASSED                                             [ 36%]
tests/unit/test_failure_paths.py::test_check_agent_can_execute_false PASSED                                              [ 36%]
tests/unit/test_failure_paths.py::test_external_lookup_unknown_backend PASSED                                            [ 36%]
tests/unit/test_failure_paths.py::test_vector_search_vss_unavailable PASSED                                              [ 36%]
tests/unit/test_failure_paths.py::test_query_endpoint_validation_error PASSED                                            [ 36%]
tests/unit/test_failure_scenarios.py::test_external_lookup_network_failure PASSED                                        [ 37%]
tests/unit/test_failure_scenarios.py::test_external_lookup_unknown_backend PASSED                                        [ 37%]
tests/unit/test_failure_scenarios.py::test_external_lookup_fallback PASSED                                               [ 37%]
tests/unit/test_failure_scenarios.py::test_get_message_broker_invalid PASSED                                             [ 37%]
tests/unit/test_failure_scenarios.py::test_redis_broker_init_failure PASSED                                              [ 37%]
tests/unit/test_formattemplate_property.py::test_formattemplate_render PASSED                                            [ 37%]
tests/unit/test_git_repo_stub.py::test_repo_init_and_commit PASSED                                                       [ 37%]
tests/unit/test_gpu_bertopic_import.py::test_try_import_bertopic_missing PASSED                                          [ 37%]
tests/unit/test_heuristic_properties.py::test_weighted_score_normalization PASSED                                        [ 37%]
tests/unit/test_heuristic_properties.py::test_token_budget_monotonicity PASSED                                           [ 38%]
tests/unit/test_heuristic_properties.py::test_token_budget_monotonicity_deterministic PASSED                             [ 38%]
tests/unit/test_heuristic_properties.py::test_token_budget_zero_usage_regression PASSED                                  [ 38%]
tests/unit/test_http_session.py::test_http_session_lifecycle PASSED                                                      [ 38%]
tests/unit/test_hybridmethod_guard.py::test_hybridmethod_requires_get_instance PASSED                                    [ 38%]
tests/unit/test_hybridmethod_guard.py::test_hybridmethod_class_and_instance_calls PASSED                                 [ 38%]
tests/unit/test_incremental_updates.py::test_refresh_vector_index_calls_backend PASSED                                   [ 38%]
tests/unit/test_incremental_updates.py::test_persist_claim_triggers_index_refresh PASSED                                 [ 38%]
tests/unit/test_incremental_updates.py::test_update_rdf_claim_wrapper PASSED                                             [ 38%]
tests/unit/test_interfaces.py::test_query_state_complies PASSED                                                          [ 38%]
tests/unit/test_interfaces.py::test_custom_state_complies PASSED                                                         [ 39%]
tests/unit/test_interfaces.py::test_incomplete_state_rejected PASSED                                                     [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_owlrl PASSED                                                 [ 39%]
tests/unit/test_kg_reasoning.py::test_register_reasoner_adds_plugin PASSED                                               [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_external PASSED                                              [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_invokes_plugin_once PASSED                                   [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_preserves_triple_count PASSED                                [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_external_error PASSED                                        [ 39%]
tests/unit/test_kg_reasoning.py::test_query_with_reasoning PASSED                                                        [ 39%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_without_owlrl PASSED                                         [ 40%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_timeout PASSED                                               [ 40%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_keyboard_interrupt PASSED                                    [ 40%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_skips_when_limit_exceeded PASSED                             [ 40%]
tests/unit/test_kg_reasoning.py::test_run_ontology_reasoner_unknown PASSED                                               [ 40%]
tests/unit/test_kuzu_polars.py::test_kuzu_backend_roundtrip PASSED                                                       [ 40%]
tests/unit/test_kuzu_polars.py::test_metrics_dataframe PASSED                                                            [ 40%]
tests/unit/test_llm_adapter.py::test_dummy_adapter_generation PASSED                                                     [ 40%]
tests/unit/test_llm_adapter.py::test_lmstudio_adapter PASSED                                                             [ 40%]
tests/unit/test_llm_adapter.py::test_openai_adapter PASSED                                                               [ 40%]
tests/unit/test_llm_adapter.py::test_compress_prompt_falls_back_when_summary_exceeds_budget PASSED                       [ 41%]
tests/unit/test_llm_adapter_validate_model.py::test_validate_model_invalid PASSED                                        [ 41%]
tests/unit/test_llm_adapters.py::test_validate_model_defaults_to_available_first_model PASSED                            [ 41%]
tests/unit/test_llm_adapters.py::test_validate_model_uses_generic_default_when_no_models PASSED                          [ 41%]
tests/unit/test_llm_adapters.py::test_validate_model_rejects_invalid_models PASSED                                       [ 41%]
tests/unit/test_llm_capabilities.py::TestModelCapabilities::test_model_capabilities_creation PASSED                      [ 41%]
tests/unit/test_llm_capabilities.py::TestModelCapabilities::test_to_dict_method PASSED                                   [ 41%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_singleton_pattern PASSED                                 [ 41%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_provider_caching PASSED                            [ 41%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_provider_unknown PASSED                            [ 41%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_all_providers PASSED                               [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_with_provider PASSED              [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_without_provider PASSED           [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_not_found PASSED                  [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_search_across_providers PASSED    [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_with_api PASSED                         [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_without_api_key PASSED                  [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_with_api_error PASSED                   [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_openai PASSED                                      [ 42%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_lmstudio PASSED                                    [ 43%]
tests/unit/test_llm_capabilities.py::TestCapabilityProber::test_probe_dummy PASSED                                       [ 43%]
tests/unit/test_llm_capabilities.py::TestHelperFunctions::test_get_capability_prober PASSED                              [ 43%]
tests/unit/test_llm_capabilities.py::TestHelperFunctions::test_probe_all_providers_helper PASSED                         [ 43%]
tests/unit/test_llm_capabilities.py::TestHelperFunctions::test_get_model_capabilities_helper PASSED                      [ 43%]
tests/unit/test_llm_docstrings.py::test_module_docstrings PASSED                                                         [ 43%]
tests/unit/test_llm_docstrings.py::test_class_docstrings PASSED                                                          [ 43%]
tests/unit/test_llm_docstrings.py::test_function_docstrings PASSED                                                       [ 43%]
tests/unit/test_llm_pool.py::test_get_session_reuses_existing_instance PASSED                                            [ 43%]
tests/unit/test_local_git_backend.py::test_local_git_backend_searches_repo PASSED                                        [ 43%]
tests/unit/test_logging_shutdown.py::test_stop_watching_after_logging_shutdown PASSED                                    [ 44%]
tests/unit/test_logging_utils.py::test_get_logger PASSED                                                                 [ 44%]
tests/unit/test_logging_utils.py::test_structured_output_and_redaction PASSED                                            [ 44%]
tests/unit/test_logging_utils_env.py::test_configure_logging_from_env PASSED                                             [ 44%]
tests/unit/test_logging_utils_env.py::test_configure_logging_from_env_invalid PASSED                                     [ 44%]
tests/unit/test_main_backup_commands.py::test_backup_create_command PASSED                                               [ 44%]
tests/unit/test_main_backup_commands.py::test_backup_list_command PASSED                                                 [ 44%]
tests/unit/test_main_backup_commands.py::test_backup_restore_command PASSED                                              [ 44%]
tests/unit/test_main_backup_commands.py::test_backup_create_invalid_dir PASSED                                           [ 44%]
tests/unit/test_main_backup_commands.py::test_backup_restore_invalid_path PASSED                                         [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_recover_command PASSED                                              [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_create_error PASSED                                                 [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_create_missing_tables PASSED                                        [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_list_error PASSED                                                   [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_restore_error PASSED                                                [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_schedule_error PASSED                                               [ 45%]
tests/unit/test_main_backup_commands.py::test_backup_recover_error PASSED                                                [ 45%]
tests/unit/test_main_cli.py::test_search_default_output_tty PASSED                                                       [ 45%]
tests/unit/test_main_cli.py::test_search_default_output_json PASSED                                                      [ 45%]
tests/unit/test_main_cli.py::test_search_reasoning_mode_option[direct] PASSED                                            [ 46%]
tests/unit/test_main_cli.py::test_search_reasoning_mode_option[dialectical] PASSED                                       [ 46%]
tests/unit/test_main_cli.py::test_search_primus_start_option PASSED                                                      [ 46%]
tests/unit/test_main_cli.py::test_config_command PASSED                                                                  [ 46%]
tests/unit/test_main_cli.py::test_serve_command PASSED                                                                   [ 46%]
tests/unit/test_main_config_commands.py::test_config_init_command PASSED                                                 [ 46%]
tests/unit/test_main_config_commands.py::test_config_init_command_force PASSED                                           [ 46%]
tests/unit/test_main_config_commands.py::test_config_validate_command_valid PASSED                                       [ 46%]
tests/unit/test_main_config_commands.py::test_config_validate_command_invalid PASSED                                     [ 46%]
tests/unit/test_main_first_run_detection.py::test_first_run_detection_respects_search_paths PASSED                       [ 47%]
tests/unit/test_main_module.py::TestMainModule::test_main_module_direct_execution PASSED                                 [ 47%]
tests/unit/test_main_monitor_commands.py::test_monitor_command PASSED                                                    [ 47%]
tests/unit/test_main_monitor_commands.py::test_serve_a2a_command PASSED                                                  [ 47%]
tests/unit/test_main_monitor_commands.py::test_serve_a2a_command_keyboard_interrupt PASSED                               [ 47%]
tests/unit/test_main_monitor_commands.py::test_monitor_serve_command PASSED                                              [ 47%]
tests/unit/test_main_monitor_commands.py::test_monitor_serve_command_keyboard_interrupt PASSED                           [ 47%]
tests/unit/test_mcp_interface.py::test_client_server_roundtrip PASSED                                                    [ 47%]
tests/unit/test_metrics.py::test_metrics_collection_and_endpoint PASSED                                                  [ 47%]
tests/unit/test_metrics.py::test_reset_metrics_clears_counters PASSED                                                    [ 47%]
tests/unit/test_metrics_counters.py::test_reset_metrics PASSED                                                           [ 48%]
tests/unit/test_metrics_counters.py::test_temporary_metrics_restores_state PASSED                                        [ 48%]
tests/unit/test_metrics_counters.py::test_get_system_usage_returns_floats PASSED                                         [ 48%]
tests/unit/test_metrics_extra.py::test_cycle_and_agent_metrics PASSED                                                    [ 48%]
tests/unit/test_metrics_extra.py::test_resource_tracking PASSED                                                          [ 48%]
tests/unit/test_metrics_extra2.py::test_get_system_usage_success PASSED                                                  [ 48%]
tests/unit/test_metrics_extra2.py::test_get_system_usage_failure PASSED                                                  [ 48%]
tests/unit/test_metrics_helpers.py::test_mean_last_nonzero PASSED                                                        [ 48%]
tests/unit/test_metrics_helpers.py::test_temporary_metrics_restores_state PASSED                                         [ 48%]
tests/unit/test_metrics_helpers.py::test_record_query_and_tokens PASSED                                                  [ 49%]
tests/unit/test_metrics_heuristics.py::test_compress_prompt_if_needed PASSED                                             [ 49%]
tests/unit/test_metrics_heuristics.py::test_suggest_token_budget PASSED                                                  [ 49%]
tests/unit/test_metrics_misc.py::test_metrics_reset_and_temporary PASSED                                                 [ 49%]
tests/unit/test_metrics_misc.py::test_get_system_usage PASSED                                                            [ 49%]
tests/unit/test_metrics_misc.py::test_token_helpers PASSED                                                               [ 49%]
tests/unit/test_metrics_summary.py::test_metrics_summary[records0] PASSED                                                [ 49%]
tests/unit/test_metrics_summary.py::test_metrics_summary[records1] PASSED                                                [ 49%]
tests/unit/test_metrics_token_budget_extra.py::test_compress_prompt_threshold PASSED                                     [ 49%]
tests/unit/test_metrics_token_budget_extra.py::test_suggest_token_budget_shrink PASSED                                   [ 49%]
tests/unit/test_metrics_token_budget_spec.py::test_compression_threshold_reduces_with_history PASSED                     [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_token_budget_expands_then_shrinks PASSED                              [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_budget_shrinks_to_one_after_zero_usage PASSED                         [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_budget_converges_for_constant_usage PASSED                            [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_budget_rounds_half_up PASSED                                          [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_budget_respects_bounds_during_spike PASSED                            [ 50%]
tests/unit/test_metrics_token_budget_spec.py::test_convergence_bound_holds PASSED                                        [ 50%]
tests/unit/test_models_docstrings.py::test_models_spec_exists PASSED                                                     [ 50%]
tests/unit/test_models_docstrings.py::test_module_docstrings PASSED                                                      [ 50%]
tests/unit/test_models_docstrings.py::test_module_docstring_mentions_spec PASSED                                         [ 50%]
tests/unit/test_models_docstrings.py::test_class_docstrings PASSED                                                       [ 51%]
tests/unit/test_monitor_cli.py::test_monitor_prompts_and_passes_callbacks PASSED                                         [ 51%]
tests/unit/test_monitor_cli.py::test_monitor_metrics PASSED                                                              [ 51%]
tests/unit/test_monitor_cli.py::test_monitor_metrics_default_counters PASSED                                             [ 51%]
tests/unit/test_monitor_cli.py::test_metrics_skips_storage PASSED                                                        [ 51%]
tests/unit/test_monitor_cli.py::test_storage_teardown_handles_missing_config PASSED                                      [ 51%]
tests/unit/test_monitor_metrics_init.py::test_monitor_cli_initializes_metrics PASSED                                     [ 51%]
tests/unit/test_more_coverage.py::test_log_sources PASSED                                                                [ 51%]
tests/unit/test_more_coverage.py::test_log_sources_missing PASSED                                                        [ 51%]
tests/unit/test_more_coverage.py::test_persist_claims PASSED                                                             [ 52%]
tests/unit/test_more_coverage.py::test_persist_claims_invalid PASSED                                                     [ 52%]
tests/unit/test_more_coverage.py::test_ndcg_perfect PASSED                                                               [ 52%]
tests/unit/test_more_coverage.py::test_http_session_cycle PASSED                                                         [ 52%]
tests/unit/test_more_coverage.py::test_connection_context_manager_pool PASSED                                            [ 52%]
tests/unit/test_more_coverage.py::test_connection_context_manager_single PASSED                                          [ 52%]
tests/unit/test_more_coverage.py::test_formattemplate_metrics PASSED                                                     [ 52%]
tests/unit/test_new_modules.py::test_output_formatter_initializes_once PASSED                                            [ 52%]
tests/unit/test_new_modules.py::test_streamlit_log_handler_appends_logs PASSED                                           [ 52%]
tests/unit/test_new_modules.py::test_backup_manager_singleton PASSED                                                     [ 52%]
tests/unit/test_node_health_monitor_property.py::test_check_once_updates_gauges PASSED                                   [ 53%]
tests/unit/test_numpy_stub.py::test_numpy_stub_manual_install PASSED                                                     [ 53%]
tests/unit/test_ontology_reasoner_props.py::test_reasoner_reaches_closure PASSED                                         [ 53%]
tests/unit/test_optimize_weights_unit.py::test_optimize_weights_improves_score SKIPPED (fastembed is required for this
test.)                                                                                                                   [ 53%]
tests/unit/test_optional_extras.py::test_ui_extra PASSED                                                                 [ 53%]
tests/unit/test_optional_extras.py::test_vss_extra PASSED                                                                [ 53%]
tests/unit/test_optional_extras.py::test_git_extra PASSED                                                                [ 53%]
tests/unit/test_optional_extras.py::test_distributed_extra PASSED                                                        [ 53%]
tests/unit/test_optional_extras.py::test_analysis_extra PASSED                                                           [ 53%]
tests/unit/test_optional_extras.py::test_nlp_extra SKIPPED (spacy import failed: function '_has_torch_function' already
has a docstring)                                                                                                         [ 54%]
tests/unit/test_optional_extras.py::test_llm_extra SKIPPED (fastembed import failed: PyO3 modules may only be
initialized once per interpreter process)                                                                                [ 54%]
tests/unit/test_optional_extras.py::test_parsers_extra PASSED                                                            [ 54%]
tests/unit/test_orchestration_utils_delegation.py::test_get_agent_delegates PASSED                                       [ 54%]
tests/unit/test_orchestration_utils_delegation.py::test_capture_token_usage_delegates PASSED                             [ 54%]
tests/unit/test_orchestration_utils_module.py::test_get_memory_usage_psutil PASSED                                       [ 54%]
tests/unit/test_orchestration_utils_module.py::test_get_memory_usage_fallback PASSED                                     [ 54%]
tests/unit/test_orchestration_utils_module.py::test_calculate_result_confidence PASSED                                   [ 54%]
tests/unit/test_orchestration_utils_module.py::test_calculate_result_confidence_penalties PASSED                         [ 54%]
tests/unit/test_orchestrator_breaker_state_transitions.py::test_breaker_state_sequence PASSED                            [ 54%]
tests/unit/test_orchestrator_budget_and_errors.py::test_adaptive_budget_scales_with_loops PASSED                         [ 55%]
tests/unit/test_orchestrator_budget_and_errors.py::test_error_categorization[exc0-transient] PASSED                      [ 55%]
tests/unit/test_orchestrator_budget_and_errors.py::test_error_categorization[exc1-recoverable] PASSED                    [ 55%]
tests/unit/test_orchestrator_budget_and_errors.py::test_error_categorization[exc2-critical] PASSED                       [ 55%]
tests/unit/test_orchestrator_cb_manager.py::test_circuit_breaker_state_is_instance_isolated PASSED                       [ 55%]
tests/unit/test_orchestrator_circuit_breaker_property.py::test_circuit_breaker_opens_and_recovers PASSED                 [ 55%]
tests/unit/test_orchestrator_edgecases.py::test_get_agent_not_found PASSED                                               [ 55%]
tests/unit/test_orchestrator_edgecases.py::test_parse_config_direct_mode PASSED                                          [ 55%]
tests/unit/test_orchestrator_edgecases.py::test_parse_config_direct_mode_agent_groups PASSED                             [ 55%]
tests/unit/test_orchestrator_errors.py::test_execute_agent_records_errors_and_circuit_breaker PASSED                     [ 56%]
tests/unit/test_orchestrator_errors.py::test_retry_with_backoff_on_transient_error PASSED                                [ 56%]
tests/unit/test_orchestrator_errors.py::test_orchestrator_raises_after_error PASSED                                      [ 56%]
tests/unit/test_orchestrator_errors.py::test_invalid_agent_name_raises PASSED                                            [ 56%]
tests/unit/test_orchestrator_errors.py::test_callback_error_propagates PASSED                                            [ 56%]
tests/unit/test_orchestrator_errors.py::test_agent_error_is_wrapped[ValueError-specific error] PASSED                    [ 56%]
tests/unit/test_orchestrator_errors.py::test_agent_error_is_wrapped[RuntimeError-runtime error] PASSED                   [ 56%]
tests/unit/test_orchestrator_errors.py::test_parallel_query_error_claims PASSED                                          [ 56%]
tests/unit/test_orchestrator_errors.py::test_parallel_query_timeout_claims PASSED                                        [ 56%]
tests/unit/test_orchestrator_helpers.py::test_get_agent_success PASSED                                                   [ 56%]
tests/unit/test_orchestrator_helpers.py::test_get_agent_not_found PASSED                                                 [ 57%]
tests/unit/test_orchestrator_helpers.py::test_call_agent_start_callback PASSED                                           [ 57%]
tests/unit/test_orchestrator_helpers.py::test_persist_claims_logs_storage_error PASSED                                   [ 57%]
tests/unit/test_orchestrator_memory.py::test_get_memory_usage_psutil PASSED                                              [ 57%]
tests/unit/test_orchestrator_memory.py::test_get_memory_usage_fallback PASSED                                            [ 57%]
tests/unit/test_orchestrator_messages.py::test_agents_exchange_messages PASSED                                           [ 57%]
tests/unit/test_orchestrator_order.py::test_custom_agents_order PASSED                                                   [ 57%]
tests/unit/test_orchestrator_order.py::test_async_custom_agents_concurrent PASSED                                        [ 57%]
tests/unit/test_orchestrator_order.py::test_parse_config_direct_mode_groups PASSED                                       [ 57%]
tests/unit/test_orchestrator_parallel_deterministic.py::test_parallel_merging_is_deterministic PASSED                    [ 58%]
tests/unit/test_orchestrator_parallel_property.py::test_parallel_groups_merge_metrics PASSED                             [ 58%]
tests/unit/test_orchestrator_perf_sim.py::test_queue_metrics_more_workers PASSED                                         [ 58%]
tests/unit/test_orchestrator_perf_sim.py::test_benchmark_scheduler_scales PASSED                                         [ 58%]
tests/unit/test_orchestrator_perf_sim.py::test_queue_metrics_mm1_values PASSED                                           [ 58%]
tests/unit/test_orchestrator_perf_sim.py::test_simulate_adds_memory_usage PASSED                                         [ 58%]
tests/unit/test_orchestrator_proofs.py::test_circuit_breaker_threshold_sequence PASSED                                   [ 58%]
tests/unit/test_orchestrator_proofs.py::test_parallel_result_merging PASSED                                              [ 58%]
tests/unit/test_orchestrator_storage_interface.py::test_infer_relations_calls_storage PASSED                             [ 58%]
tests/unit/test_orchestrator_storage_interface.py::test_query_ontology_calls_storage PASSED                              [ 58%]
tests/unit/test_orchestrator_storage_interface.py::test_run_parallel_query_delegates PASSED                              [ 59%]
tests/unit/test_orchestrator_utils.py::test_rotate_list_property PASSED                                                  [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc0-transient] PASSED                                      [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc1-recoverable] PASSED                                    [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc2-transient] PASSED                                      [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc3-recoverable] PASSED                                    [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc4-critical] PASSED                                       [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc5-critical] PASSED                                       [ 59%]
tests/unit/test_orchestrator_utils.py::test_categorize_error[exc6-critical] PASSED                                       [ 59%]
tests/unit/test_orchestrator_utils.py::test_calculate_result_confidence PASSED                                           [ 60%]
tests/unit/test_orchestrator_utils.py::test_apply_recovery_strategy PASSED                                               [ 60%]
tests/unit/test_output_format.py::test_format_json PASSED                                                                [ 60%]
tests/unit/test_output_format.py::test_format_markdown PASSED                                                            [ 60%]
tests/unit/test_output_format.py::test_format_plain PASSED                                                               [ 60%]
tests/unit/test_output_format.py::test_format_text_alias PASSED                                                          [ 60%]
tests/unit/test_output_format.py::test_json_no_ansi PASSED                                                               [ 60%]
tests/unit/test_output_format.py::test_markdown_no_ansi PASSED                                                           [ 60%]
tests/unit/test_output_format.py::test_format_graph PASSED                                                               [ 60%]
tests/unit/test_output_format.py::test_format_dict_input[json-{] PASSED                                                  [ 60%]
tests/unit/test_output_format.py::test_format_dict_input[markdown-# Answer] PASSED                                       [ 61%]
tests/unit/test_output_format.py::test_format_dict_input[plain-Answer:] PASSED                                           [ 61%]
tests/unit/test_output_format.py::test_format_invalid_input PASSED                                                       [ 61%]
tests/unit/test_output_format.py::test_format_unknown_defaults_to_markdown PASSED                                        [ 61%]
tests/unit/test_output_format.py::test_format_complex_response PASSED                                                    [ 61%]
tests/unit/test_output_format.py::test_format_template_class PASSED                                                      [ 61%]
tests/unit/test_output_format.py::test_format_template_missing_variable PASSED                                           [ 61%]
tests/unit/test_output_format.py::test_template_registry PASSED                                                          [ 61%]
tests/unit/test_output_format.py::test_template_registry_default_templates PASSED                                        [ 61%]
tests/unit/test_output_format.py::test_template_registry_missing_template PASSED                                         [ 61%]
tests/unit/test_output_format.py::test_template_from_file PASSED                                                         [ 62%]
tests/unit/test_output_format.py::test_template_from_config PASSED                                                       [ 62%]
tests/unit/test_output_format.py::test_format_with_custom_template PASSED                                                [ 62%]
tests/unit/test_output_format.py::test_format_with_missing_template PASSED                                               [ 62%]
tests/unit/test_output_format_edgecases.py::test_template_fallback_to_markdown PASSED                                    [ 62%]
tests/unit/test_output_format_edgecases2.py::test_graph_format PASSED                                                    [ 62%]
tests/unit/test_output_format_extra.py::test_custom_template_render PASSED                                               [ 62%]
tests/unit/test_output_format_extra2.py::test_metric_variable_rendering PASSED                                           [ 62%]
tests/unit/test_output_format_extra2.py::test_format_missing_variable_fallback PASSED                                    [ 62%]
tests/unit/test_output_formatter_property.py::test_output_formatter_json_markdown PASSED                                 [ 63%]
tests/unit/test_parallel_module.py::test_get_memory_usage_fallback PASSED                                                [ 63%]
tests/unit/test_parallel_module.py::test_calculate_result_confidence PASSED                                              [ 63%]
tests/unit/test_parallel_module.py::test_execute_parallel_query_basic PASSED                                             [ 63%]
tests/unit/test_parallel_module.py::test_execute_parallel_query_agent_error PASSED                                       [ 63%]
tests/unit/test_pool_sessions.py::test_search_pool_reuse_and_cleanup PASSED                                              [ 63%]
tests/unit/test_pool_sessions.py::test_llm_pool_reuse_and_cleanup PASSED                                                 [ 63%]
tests/unit/test_pool_sessions.py::test_set_http_session PASSED                                                           [ 63%]
tests/unit/test_prompts_docstrings.py::test_module_docstring PASSED                                                      [ 63%]
tests/unit/test_prompts_docstrings.py::test_class_docstrings PASSED                                                      [ 63%]
tests/unit/test_prompts_docstrings.py::test_function_docstrings PASSED                                                   [ 64%]
tests/unit/test_property_api_rate_limit_bounds.py::test_rate_limit_bounds PASSED                                         [ 64%]
tests/unit/test_property_coordination_fixed_point.py::test_ground_truth_fixed_point PASSED                               [ 64%]
tests/unit/test_property_coordination_stability.py::test_error_bounded PASSED                                            [ 64%]
tests/unit/test_property_dialectical_coordination.py::test_error_never_increases PASSED                                  [ 64%]
tests/unit/test_property_evaluate_weights.py::test_evaluate_weights_scale_invariant PASSED                               [ 64%]
tests/unit/test_property_evaluate_weights.py::test_evaluate_weights_empty PASSED                                         [ 64%]
tests/unit/test_property_ontology_reasoner.py::test_reasoner_preserves_triples PASSED                                    [ 64%]
tests/unit/test_property_ontology_reasoner.py::test_reasoner_timeout PASSED                                              [ 64%]
tests/unit/test_property_ontology_reasoner.py::test_reasoner_respects_triple_limit PASSED                                [ 65%]
tests/unit/test_property_ranking_ties.py::test_rank_results_preserves_input_order PASSED                                 [ 65%]
tests/unit/test_property_resource_monitor_stats.py::test_statistics_match_numpy PASSED                                   [ 65%]
tests/unit/test_property_search.py::test_generate_queries_variants PASSED                                                [ 65%]
tests/unit/test_property_search.py::test_generate_queries_embeddings PASSED                                              [ 65%]
tests/unit/test_property_search_ranking.py::test_merge_rank_scores_linear PASSED                                         [ 65%]
tests/unit/test_property_search_ranking.py::test_rank_results_orders_by_weighted_scores PASSED                           [ 65%]
tests/unit/test_property_search_ranking.py::test_rank_results_breaks_ties_deterministically PASSED                       [ 65%]
tests/unit/test_property_search_ranking.py::test_rank_results_groups_nearby_scores PASSED                                [ 65%]
tests/unit/test_property_storage.py::test_pop_lru_order PASSED                                                           [ 65%]
tests/unit/test_property_storage.py::test_pop_low_score PASSED                                                           [ 66%]
tests/unit/test_property_storage.py::test_current_ram_mb_non_negative PASSED                                             [ 66%]
tests/unit/test_property_token_budget_sequence.py::test_token_budget_sequence_monotonic PASSED                           [ 66%]
tests/unit/test_property_token_counting.py::test_compress_prompt_preserves_edges PASSED                                  [ 66%]
tests/unit/test_property_token_counting.py::test_prune_context_respects_budget PASSED                                    [ 66%]
tests/unit/test_property_vector_search.py::test_vector_search_calls_backend PASSED                                       [ 66%]
tests/unit/test_property_vector_search.py::test_vector_search_backend_receives_exact PASSED                              [ 66%]
tests/unit/test_property_vector_search.py::test_vector_search_invalid PASSED                                             [ 66%]
tests/unit/test_property_vector_search.py::test_vector_search_malformed_embedding PASSED                                 [ 66%]
tests/unit/test_property_vector_search.py::test_validate_vector_search_params_rejects_malformed PASSED                   [ 67%]
tests/unit/test_property_watch_changes.py::test_watch_changes_idempotent PASSED                                          [ 67%]
tests/unit/test_property_weight_convergence.py::test_ndcg_monotonic_with_step SKIPPED (fastembed is required for this
test.)                                                                                                                   [ 67%]
tests/unit/test_property_weight_tuning.py::test_tune_weights_improves_ndcg SKIPPED (fastembed is required for this
test.)                                                                                                                   [ 67%]
tests/unit/test_query_state.py::test_get_dialectical_structure PASSED                                                    [ 67%]
tests/unit/test_query_state_features.py::test_query_state_update_and_retrieval PASSED                                    [ 67%]
tests/unit/test_ranking_convergence.py::test_ranking_monotonic PASSED                                                    [ 67%]
tests/unit/test_ranking_idempotence.py::test_rank_results_idempotent PASSED                                              [ 67%]
tests/unit/test_ranking_weights.py::test_search_config_weight_validation PASSED                                          [ 67%]
tests/unit/test_ranking_weights.py::test_default_config_weights_sum_to_one PASSED                                        [ 67%]
tests/unit/test_ranking_weights.py::test_rank_results_sorted PASSED                                                      [ 68%]
tests/unit/test_ranking_weights.py::test_cross_backend_rank_sorted PASSED                                                [ 68%]
tests/unit/test_ranking_weights.py::test_rank_results_invalid_sum PASSED                                                 [ 68%]
tests/unit/test_rdf_update.py::test_update_rdf_claim_replace PASSED                                                      [ 68%]
tests/unit/test_rdf_update.py::test_update_rdf_claim_partial PASSED                                                      [ 68%]
tests/unit/test_reasoning_modes.py::test_direct_mode_executes_once PASSED                                                [ 68%]
tests/unit/test_reasoning_modes.py::test_chain_of_thought_mode_loops PASSED                                              [ 68%]
tests/unit/test_reasoning_modes.py::test_chain_of_thought_records_steps PASSED                                           [ 68%]
tests/unit/test_reasoning_strategy.py::test_chain_of_thought_strategy_loops PASSED                                       [ 68%]
tests/unit/test_relevance_ranking.py::test_preprocess_text PASSED                                                        [ 69%]
tests/unit/test_relevance_ranking.py::test_calculate_bm25_scores PASSED                                                  [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_empty_input PASSED                                               [ 69%]
tests/unit/test_relevance_ranking.py::test_calculate_semantic_similarity PASSED                                          [ 69%]
tests/unit/test_relevance_ranking.py::test_assess_source_credibility PASSED                                              [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results PASSED                                                           [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_with_disabled_features PASSED                                    [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_with_unavailable_libraries PASSED                                [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_weighted_combination PASSED                                      [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_bm25_only PASSED                                                 [ 69%]
tests/unit/test_relevance_ranking.py::test_rank_results_patched_bm25_function PASSED                                     [ 70%]
tests/unit/test_relevance_ranking.py::test_search_config_invalid_weights PASSED                                          [ 70%]
tests/unit/test_relevance_ranking.py::test_rank_results_sorted PASSED                                                    [ 70%]
tests/unit/test_relevance_ranking.py::test_external_lookup_uses_cache PASSED                                             [ 70%]
tests/unit/test_relevance_ranking.py::test_relevance_score_monotonic PASSED                                              [ 70%]
tests/unit/test_relevance_ranking.py::test_weight_sensitivity PASSED                                                     [ 70%]
tests/unit/test_resource_monitor_gpu.py::test_get_gpu_stats_pynvml PASSED                                                [ 70%]
tests/unit/test_resource_monitor_gpu.py::test_get_gpu_stats_cli_psutil PASSED                                            [ 70%]
tests/unit/test_resource_monitor_gpu.py::test_get_gpu_stats_cli_subprocess PASSED                                        [ 70%]
tests/unit/test_resource_monitor_gpu.py::test_get_gpu_stats_logs_info_without_gpu_extra PASSED                           [ 70%]
tests/unit/test_resource_monitor_gpu.py::test_get_gpu_stats_logs_debug_with_gpu_extra PASSED                             [ 71%]
tests/unit/test_resource_monitor_start.py::test_gauge_reuse_resets_value PASSED                                          [ 71%]
tests/unit/test_resource_monitor_start.py::test_resource_monitor_records_stats PASSED                                    [ 71%]
tests/unit/test_resource_monitor_usage.py::test_get_usage_psutil PASSED                                                  [ 71%]
tests/unit/test_resource_monitor_usage.py::test_get_usage_no_psutil PASSED                                               [ 71%]
tests/unit/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.01] PASSED                                  [ 71%]
tests/unit/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.05] PASSED                                  [ 71%]
tests/unit/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.1] PASSED                                   [ 71%]
tests/unit/test_scheduler_benchmark.py::test_benchmark_scheduler_time_scales_with_duration PASSED                        [ 71%]
tests/unit/test_scheduler_benchmark.py::test_enqueue_with_limit_drops_items PASSED                                       [ 72%]
tests/unit/test_scheduler_benchmark.py::test_enqueue_with_limit_invalid_limit PASSED                                     [ 72%]
tests/unit/test_scheduling_resource_benchmark.py::test_run_benchmark_scaling FAILED                                      [ 72%]

=========================================================== FAILURES ===========================================================
__________________________________________________ test_run_benchmark_scaling __________________________________________________

    def test_run_benchmark_scaling():
        """More workers increase throughput and memory scales with tasks."""
        mod = _load_module()
        results = mod.run_benchmark(2, 3, 5, 20, 0.5)
        assert len(results) == 2
>       assert results[1]["throughput"] > results[0]["throughput"]
E       assert 503.8471247402539 > 704.772195837311

/workspace/autoresearch/tests/unit/test_scheduling_resource_benchmark.py:21: AssertionError
---------------------------------------------------- Captured log teardown -----------------------------------------------------
INFO     autoresearch.config.loader:loader.py:186 No configuration file found; using defaults
======================================================= warnings summary =======================================================
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
  /workspace/autoresearch/.venv/lib/python3.12/site-packages/spacy/cli/_util.py:23: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
  /workspace/autoresearch/.venv/lib/python3.12/site-packages/weasel/util/config.py:8: DeprecationWarning: Importing 'parser.split_arg_string' is deprecated, it will only be available in 'shell_completion' in Click 9.0.
    from click.parser import split_arg_string

tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
  /workspace/autoresearch/.venv/lib/python3.12/site-packages/umap/spectral.py:519: RuntimeWarning: k >= N for N * N square matrix. Attempting to use scipy.linalg.eigh instead.
    eigenvalues, eigenvectors = scipy.sparse.linalg.eigsh(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
===================================================== slowest 10 durations =====================================================
59.23s call     tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges
16.59s call     tests/unit/test_gpu_bertopic_import.py::test_try_import_bertopic_missing
9.08s call     tests/unit/test_distributed_executors.py::test_query_state_ray_round_trip
4.44s call     tests/unit/test_relevance_ranking.py::test_external_lookup_uses_cache
2.78s call     tests/unit/test_property_ontology_reasoner.py::test_reasoner_timeout
2.77s setup    tests/unit/test_eviction.py::test_score_eviction
1.67s call     tests/unit/test_cache.py::test_context_aware_query_expansion_uses_cache
1.48s call     tests/unit/test_property_api_rate_limit_bounds.py::test_rate_limit_bounds
1.32s call     tests/unit/test_cache.py::test_search_uses_cache
1.30s call     tests/unit/test_orchestrator_parallel_deterministic.py::test_parallel_merging_is_deterministic
=================================================== short test summary info ====================================================
FAILED tests/unit/test_scheduling_resource_benchmark.py::test_run_benchmark_scaling - assert 503.8471247402539 > 704.772195837311
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
======================= 1 failed, 673 passed, 16 skipped, 26 deselected, 6 warnings in 165.34s (0:02:45) =======================
