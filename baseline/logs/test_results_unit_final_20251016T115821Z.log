============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0 -- /Users/caitlyn/Projects/github.com/ravenoak/autoresearch/.venv/bin/python
cachedir: .pytest_cache
hypothesis profile 'default'
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/caitlyn/Projects/github.com/ravenoak/autoresearch
configfile: pytest.ini
plugins: anyio-4.11.0, httpx-0.35.0, timeout-2.4.0, hypothesis-6.140.3, langsmith-0.4.34, benchmark-5.1.0, bdd-8.1.0, cov-7.0.0
timeout: 60.0s
timeout method: thread
timeout func_only: False
collecting ... collected 1380 items / 25 deselected / 1 skipped / 1355 selected

tests/unit/agents/test_contrarian_resilience.py::test_contrarian_handles_llm_failure PASSED [  0%]
tests/unit/agents/test_llm_error_resilience.py::test_synthesizer_reports_lm_errors_in_metadata PASSED [  0%]
tests/unit/agents/test_llm_error_resilience.py::test_fact_checker_fallback_includes_error_provenance PASSED [  0%]
tests/unit/agents/test_llm_error_resilience.py::test_synthesizer_thesis_branch_records_errors PASSED [  0%]
tests/unit/agents/test_llm_error_resilience.py::test_synthesizer_direct_mode_returns_fallback PASSED [  0%]
tests/unit/api/test_api_llm.py::test_get_available_adapters PASSED       [  0%]
tests/unit/api/test_routes.py::test_router_builds_correctly PASSED       [  0%]
tests/unit/api/test_routes.py::test_router_builds_with_monitoring_enabled PASSED [  0%]
tests/unit/config/test_loader_types.py::test_load_config_file_returns_defaults_when_missing PASSED [  0%]
tests/unit/config/test_loader_types.py::test_load_config_file_rejects_non_mapping PASSED [  0%]
tests/unit/config/test_loader_types.py::test_env_storage_override_round_trips PASSED [  0%]
tests/unit/config/test_loader_types.py::test_storage_defaults PASSED     [  0%]
tests/unit/config/test_loader_types.py::test_minimum_resident_nodes_default_without_warning PASSED [  0%]
tests/unit/config/test_loader_types.py::test_normalize_ranking_weights_balances_missing_values PASSED [  1%]
tests/unit/config/test_loader_types.py::test_config_model_deep_copy_preserves_storage_settings PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_election_converges_to_minimum PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_election_requires_identifier PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_election_accepts_strings PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_message_processing_is_idempotent PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_message_processing_returns_copy PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_module_exports_helpers PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_storage_queue_adapter_accepts_mapping_payloads PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_storage_queue_adapter_rejects_incompatible_payloads PASSED [  1%]
tests/unit/distributed/test_coordination_properties.py::test_storage_queue_adapter_accepts_broker_queue PASSED [  1%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_storage_coordinator_initialization PASSED [  1%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_result_aggregator_initialization PASSED [  1%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_publish_claim_functionality PASSED [  1%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_start_storage_coordinator_returns_correct_types PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_start_result_aggregator_returns_correct_types PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_message_processing_integration PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_error_handling_in_message_processing PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_concurrent_message_processing PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_coordinator_lifecycle_management PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_aggregator_lifecycle_management PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_message_queue_protocol_compliance PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_broker_type_enum_values PASSED [  2%]
tests/unit/distributed/test_storage_coordinator.py::TestStorageCoordinator::test_coordinator_with_different_database_paths PASSED [  2%]
tests/unit/evaluation/test_harness_typing.py::test_open_duckdb_closes_connection PASSED [  2%]
tests/unit/evidence/test_stability_utils.py::test_aggregate_entailment_scores_stable PASSED [  2%]
tests/unit/evidence/test_stability_utils.py::test_aggregate_entailment_scores_unstable PASSED [  2%]
tests/unit/evidence/test_stability_utils.py::test_sample_paraphrases_returns_unique_variants PASSED [  3%]
tests/unit/knowledge/test_graph_pipeline.py::test_session_graph_pipeline_ingest_records_provenance PASSED [  3%]
tests/unit/knowledge/test_graph_pipeline.py::test_session_graph_pipeline_neighbors_uses_storage PASSED [  3%]
tests/unit/legacy/test_a2a_concurrency_sim.py::test_simulation_counts PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::test_a2a_message_accepts_sdk_message PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::test_runtime_requirements_raise PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_init PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_start PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_stop PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_query PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_command_get_capabilities PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_command_get_config PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_command_set_config PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_command_unknown PASSED [  3%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_info PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AInterface::test_handle_query_concurrent PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClient::test_init PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClient::test_query_agent PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClient::test_get_agent_capabilities PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClient::test_get_agent_config PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClient::test_set_agent_config PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_get_a2a_client PASSED      [  4%]
tests/unit/legacy/test_a2a_interface.py::test_requires_a2a_decorator_available PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_requires_a2a_decorator_not_available PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_handle_query_exception PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_handle_set_config_invalid PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_dispatch_simulation_invariants PASSED [  4%]
tests/unit/legacy/test_a2a_interface.py::test_simulation_event_order PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_init PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_query_agent PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_get_agent_capabilities PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_get_agent_config PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_set_agent_config PASSED [  5%]
tests/unit/legacy/test_a2a_interface.py::TestA2AClientExtended::test_query_agent_error PASSED [  5%]
tests/unit/legacy/test_a2a_mcp_handshake.py::test_handshake_success PASSED [  5%]
tests/unit/legacy/test_a2a_mcp_handshake.py::test_handshake_timeout PASSED [  5%]
tests/unit/legacy/test_a2a_mcp_handshake.py::test_handshake_recovery PASSED [  5%]
tests/unit/legacy/test_a2a_mcp_handshake.py::test_handshake_server_failure PASSED [  5%]
tests/unit/legacy/test_additional_algorithm_docs.py::test_algorithm_docs_exist PASSED [  5%]
tests/unit/legacy/test_additional_coverage.py::test_log_release_tokens_invalid_json PASSED [  5%]
tests/unit/legacy/test_additional_coverage.py::test_circuit_breaker_transitions PASSED [  5%]
tests/unit/legacy/test_additional_coverage.py::test_circuit_breaker_recovery PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_circuit_breaker_success_decrements PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_http_session_reuse_and_close PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_llm_pool_session_reuse PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_llm_pool_adapter_failure PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_set_get_delegate PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_pop_low_score_missing_confidence PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_output_formatter_invalid PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_streamlit_metrics PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_render_evaluation_summary_joins_artifacts PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_render_evaluation_summary_formats_planner_and_routing PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_format_percentage_variants PASSED [  6%]
tests/unit/legacy/test_additional_coverage.py::test_cli_utils_format_helpers_importable PASSED [  6%]
tests/unit/legacy/test_advanced_agents.py::test_domain_specialist_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_domain_specialist_can_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_moderator_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_moderator_can_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_user_agent_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_user_agent_can_execute PASSED [  7%]
tests/unit/legacy/test_advanced_agents.py::test_planner_metadata PASSED  [  7%]
tests/unit/legacy/test_agent_communication.py::test_message_exchange_and_feedback PASSED [  7%]
tests/unit/legacy/test_agent_communication.py::test_coalition_management_in_state PASSED [  7%]
tests/unit/legacy/test_agent_communication.py::test_agent_registry_coalitions PASSED [  7%]
tests/unit/legacy/test_agent_communication.py::test_orchestrator_handles_coalitions PASSED [  7%]
tests/unit/legacy/test_agent_communication.py::test_message_protocols PASSED [  7%]
tests/unit/legacy/test_agent_registry.py::test_register_and_get_cached_instance PASSED [  7%]
tests/unit/legacy/test_agent_registry.py::test_get_unknown_agent_raises PASSED [  7%]
tests/unit/legacy/test_agent_registry.py::test_reset_instances PASSED    [  8%]
tests/unit/legacy/test_agents_dialectical.py::test_fact_checker_audit_provenance PASSED [  8%]
tests/unit/legacy/test_agents_dialectical.py::test_synthesizer_support_audit_provenance PASSED [  8%]
tests/unit/legacy/test_agents_llm.py::test_synthesizer_with_injected_adapter PASSED [  8%]
tests/unit/legacy/test_agents_llm.py::test_contrarian_with_injected_adapter PASSED [  8%]
tests/unit/legacy/test_agents_llm.py::test_fact_checker_with_injected_adapter PASSED [  8%]
tests/unit/legacy/test_agents_llm.py::test_agent_factory_with_injected_adapter PASSED [  8%]
tests/unit/legacy/test_agents_llm.py::test_synthesizer_dynamic PASSED    [  8%]
tests/unit/legacy/test_agents_llm.py::test_contrarian_dynamic PASSED     [  8%]
tests/unit/legacy/test_agents_llm.py::test_fact_checker_sources PASSED   [  8%]
tests/unit/legacy/test_algorithm_docs.py::test_algorithm_docs_exist PASSED [  8%]
tests/unit/legacy/test_algorithm_docs.py::test_core_docstrings_reference_docs PASSED [  8%]
tests/unit/legacy/test_api.py::test_dynamic_limit PASSED                 [  8%]
tests/unit/legacy/test_api.py::test_api_key_roles PASSED                 [  9%]
tests/unit/legacy/test_api.py::test_batch_query_invalid_page PASSED      [  9%]
tests/unit/legacy/test_api.py::test_fallback_no_limit PASSED             [  9%]
tests/unit/legacy/test_api.py::test_fallback_multiple_ips PASSED         [  9%]
tests/unit/legacy/test_api.py::test_request_log_thread_safety PASSED     [  9%]
tests/unit/legacy/test_api.py::test_query_failure_includes_socratic_reasoning PASSED [  9%]
tests/unit/legacy/test_api_auth_deps.py::test_require_permission_allows PASSED [  9%]
tests/unit/legacy/test_api_auth_deps.py::test_require_permission_auth_missing PASSED [  9%]
tests/unit/legacy/test_api_auth_deps.py::test_require_permission_forbidden PASSED [  9%]
tests/unit/legacy/test_api_auth_middleware.py::test_resolve_role_valid_key PASSED [  9%]
tests/unit/legacy/test_api_auth_middleware.py::test_resolve_role_invalid_key PASSED [  9%]
tests/unit/legacy/test_api_auth_middleware.py::test_resolve_role_missing_key PASSED [  9%]
tests/unit/legacy/test_api_auth_middleware.py::test_dispatch_invalid_token PASSED [  9%]
tests/unit/legacy/test_api_auth_middleware.py::test_dispatch_valid_token PASSED [  9%]
tests/unit/legacy/test_api_error_handling.py::test_query_endpoint_runtime_error PASSED [ 10%]
tests/unit/legacy/test_api_error_handling.py::test_query_endpoint_invalid_response PASSED [ 10%]
tests/unit/legacy/test_api_error_handling.py::test_simulate_api_auth_error_rates PASSED [ 10%]
tests/unit/legacy/test_api_errors.py::test_handle_rate_limit_response PASSED [ 10%]
tests/unit/legacy/test_api_errors.py::test_handle_rate_limit_text PASSED [ 10%]
tests/unit/legacy/test_api_imports.py::test_no_unused_imports PASSED     [ 10%]
tests/unit/legacy/test_api_lifespan.py::test_lifespan_startup_shutdown PASSED [ 10%]
tests/unit/legacy/test_api_rate_limit.py::test_initial_burst_and_refill PASSED [ 10%]
tests/unit/legacy/test_api_rate_limit.py::test_partial_refill PASSED     [ 10%]
tests/unit/legacy/test_api_rate_limit.py::test_clock_drift PASSED        [ 10%]
tests/unit/legacy/test_api_rate_limit.py::test_invalid_parameters PASSED [ 10%]
tests/unit/legacy/test_api_token_utils.py::test_generate_bearer_token_unique PASSED [ 10%]
tests/unit/legacy/test_api_token_utils.py::test_verify_bearer_token PASSED [ 10%]
tests/unit/legacy/test_backup_manager.py::test_create_and_restore_backup PASSED [ 10%]
tests/unit/legacy/test_backup_manager.py::test_backup_scheduler_start_stop PASSED [ 11%]
tests/unit/legacy/test_bm25_scoring.py::test_calculate_bm25_scores_real_documents PASSED [ 11%]
tests/unit/legacy/test_budgeting.py::test_apply_adaptive_token_budget_paths PASSED [ 11%]
tests/unit/legacy/test_budgeting_module.py::test_budget_scaled_by_loops_and_capped PASSED [ 11%]
tests/unit/legacy/test_budgeting_module.py::test_budget_increased_when_too_low PASSED [ 11%]
tests/unit/legacy/test_budgeting_module.py::test_budget_unchanged_when_within_bounds PASSED [ 11%]
tests/unit/legacy/test_budgeting_module.py::test_budget_noop_when_missing PASSED [ 11%]
tests/unit/legacy/test_cache.py::test_search_uses_cache PASSED           [ 11%]
tests/unit/legacy/test_cache.py::test_cache_lifecycle PASSED             [ 11%]
tests/unit/legacy/test_cache.py::test_setup_thread_safe PASSED           [ 11%]
tests/unit/legacy/test_cache.py::test_cache_is_backend_specific PASSED   [ 11%]
tests/unit/legacy/test_cache.py::test_cache_is_backend_specific_without_embeddings PASSED [ 11%]
tests/unit/legacy/test_cache.py::test_cache_key_normalizes_queries PASSED [ 11%]
tests/unit/legacy/test_cache.py::test_cache_key_respects_embedding_flags PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_legacy_cache_entries_upgrade_on_hit PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_v2_cache_entries_upgrade_on_hit PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_cache_key_primary_reflects_hybrid_flags PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_sequential_hybrid_sequences_respect_cache_fingerprint PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_interleaved_storage_paths_share_cache PASSED [ 12%]
tests/unit/legacy/test_cache.py::test_context_aware_query_expansion_uses_cache PASSED [ 12%]
tests/unit/legacy/test_cache_deepcopy.py::test_cache_results_are_deepcopied PASSED [ 12%]
tests/unit/legacy/test_cache_deepcopy.py::test_get_cache_returns_singleton PASSED [ 12%]
tests/unit/legacy/test_cache_extra.py::test_get_db_after_teardown PASSED [ 12%]
tests/unit/legacy/test_check_env_warnings.py::test_missing_package_metadata_raises PASSED [ 12%]
tests/unit/legacy/test_check_env_warnings.py::test_missing_pytest_bdd_raises PASSED [ 12%]
tests/unit/legacy/test_check_env_warnings.py::test_missing_go_task_raises PASSED [ 12%]
tests/unit/legacy/test_check_env_warnings.py::test_missing_uv_raises_version_error PASSED [ 12%]
tests/unit/legacy/test_check_env_warnings.py::test_task_command_failure PASSED [ 13%]
tests/unit/legacy/test_check_env_warnings.py::test_main_reports_missing_metadata PASSED [ 13%]
tests/unit/legacy/test_check_env_warnings.py::test_env_metadata_provider PASSED [ 13%]
tests/unit/legacy/test_circuit_breaker_module.py::test_state_transitions PASSED [ 13%]
tests/unit/legacy/test_circuit_breaker_module.py::test_recovery PASSED   [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_format_size_units PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_create_error PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_create_missing_tables PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_create_success PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_restore_cancelled PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_restore_error PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_list_no_backups PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_list_success PASSED [ 13%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_recover_invalid_timestamp PASSED [ 14%]
tests/unit/legacy/test_cli_backup_extra.py::test_backup_recover_error PASSED [ 14%]
tests/unit/legacy/test_cli_help.py::test_cli_help_no_ansi PASSED         [ 14%]
tests/unit/legacy/test_cli_help.py::test_search_help_includes_interactive PASSED [ 14%]
tests/unit/legacy/test_cli_help.py::test_search_help_includes_visualize PASSED [ 14%]
tests/unit/legacy/test_cli_help.py::test_search_loops_option PASSED      [ 14%]
tests/unit/legacy/test_cli_help.py::test_search_help_includes_ontology_flags PASSED [ 14%]
tests/unit/legacy/test_cli_help.py::test_visualize_help_includes_layout PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_find_similar_commands_basic PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_find_similar_commands_default_threshold PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_parse_agent_groups_parses_nested_lists PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_find_similar_commands_respects_threshold PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_parse_agent_groups_discards_empty_groups PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_require_api_key_missing_header PASSED [ 14%]
tests/unit/legacy/test_cli_helpers.py::test_require_api_key_accepts_present_header PASSED [ 15%]
tests/unit/legacy/test_cli_helpers.py::test_report_missing_tables_sorts_and_prints PASSED [ 15%]
tests/unit/legacy/test_cli_helpers.py::test_report_missing_tables_uses_console PASSED [ 15%]
tests/unit/legacy/test_cli_helpers.py::test_handle_command_not_found_suggests_similar PASSED [ 15%]
tests/unit/legacy/test_cli_helpers.py::test_install_help_text_in_readme PASSED [ 15%]
tests/unit/legacy/test_cli_utils.py::test_attach_cli_hooks_exposes_attributes PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_error_suggestion PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_verbosity_roundtrip PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_set_verbosity_sets_env PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_error_emits_at_quiet_threshold[quiet] PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_error_emits_at_quiet_threshold[normal] PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_error_emits_at_quiet_threshold[verbose] PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_error_suppressed_when_threshold_higher PASSED [ 15%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_warning_respects_minimum[quiet-False] PASSED [ 16%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_warning_respects_minimum[normal-True] PASSED [ 16%]
tests/unit/legacy/test_cli_utils_extra.py::test_print_warning_respects_minimum[verbose-True] PASSED [ 16%]
tests/unit/legacy/test_cli_utils_extra.py::test_ascii_and_table_empty PASSED [ 16%]
tests/unit/legacy/test_cli_utils_extra.py::test_format_functions PASSED  [ 16%]
tests/unit/legacy/test_cli_visualize.py::test_ascii_bar_graph_basic PASSED [ 16%]
tests/unit/legacy/test_cli_visualize.py::test_summary_table_render PASSED [ 16%]
tests/unit/legacy/test_cli_visualize.py::test_search_visualize_option PASSED [ 16%]
tests/unit/legacy/test_coalition_execution.py::test_coalition_agents_run_together PASSED [ 16%]
tests/unit/legacy/test_coalition_execution.py::test_configmodel_from_dict_allows_coalitions PASSED [ 16%]
tests/unit/legacy/test_config_env_file.py::test_config_spec_exists PASSED [ 16%]
tests/unit/legacy/test_config_env_file.py::test_env_file_parsing PASSED  [ 16%]
tests/unit/legacy/test_config_errors.py::test_config_spec_exists PASSED  [ 16%]
tests/unit/legacy/test_config_errors.py::test_load_config_file_error PASSED [ 16%]
tests/unit/legacy/test_config_errors.py::test_notify_observers_error PASSED [ 17%]
tests/unit/legacy/test_config_errors.py::test_watch_config_files_error PASSED [ 17%]
tests/unit/legacy/test_config_errors.py::test_watch_config_reload_error PASSED [ 17%]
tests/unit/legacy/test_config_errors.py::test_reset_instance_error PASSED [ 17%]
tests/unit/legacy/test_config_hot_reload_sim.py::test_config_hot_reload_sim PASSED [ 17%]
tests/unit/legacy/test_config_hot_reload_sim.py::test_invalid_update_logged PASSED [ 17%]
tests/unit/legacy/test_config_loader_defaults.py::test_config_spec_exists PASSED [ 17%]
tests/unit/legacy/test_config_loader_defaults.py::test_invalid_env_falls_back_to_defaults PASSED [ 17%]
tests/unit/legacy/test_config_loader_defaults.py::test_validate_without_config_file PASSED [ 17%]
tests/unit/legacy/test_config_profiles.py::test_config_spec_exists PASSED [ 17%]
tests/unit/legacy/test_config_profiles.py::test_config_profiles_default PASSED [ 17%]
tests/unit/legacy/test_config_profiles.py::test_config_profiles_switch PASSED [ 17%]
tests/unit/legacy/test_config_profiles.py::test_config_profiles_invalid PASSED [ 17%]
tests/unit/legacy/test_config_profiles.py::test_config_profiles_merge PASSED [ 18%]
tests/unit/legacy/test_config_reload.py::test_config_spec_exists PASSED  [ 18%]
tests/unit/legacy/test_config_reload.py::test_config_reload_on_change PASSED [ 18%]
tests/unit/legacy/test_config_utils.py::test_config_spec_exists PASSED   [ 18%]
tests/unit/legacy/test_config_utils.py::test_module_docstring_mentions_spec PASSED [ 18%]
tests/unit/legacy/test_config_utils.py::test_apply_preset_returns_configuration PASSED [ 18%]
tests/unit/legacy/test_config_utils.py::test_apply_preset_unknown_name PASSED [ 18%]
tests/unit/legacy/test_config_utils.py::test_validate_config_success PASSED [ 18%]
tests/unit/legacy/test_config_utils.py::test_validate_config_failure PASSED [ 18%]
tests/unit/legacy/test_config_validation_errors.py::test_config_spec_exists PASSED [ 18%]
tests/unit/legacy/test_config_validation_errors.py::test_invalid_rdf_backend PASSED [ 18%]
tests/unit/legacy/test_config_validation_errors.py::test_weights_must_sum_to_one PASSED [ 18%]
tests/unit/legacy/test_config_validation_errors.py::test_default_config_loads_without_error PASSED [ 18%]
tests/unit/legacy/test_config_validators_additional.py::test_config_spec_exists PASSED [ 18%]
tests/unit/legacy/test_config_validators_additional.py::test_reasoning_mode_valid[direct-direct0] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_reasoning_mode_valid[direct-direct1] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_reasoning_mode_invalid PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_token_budget_valid[None] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_token_budget_valid[10] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_token_budget_invalid[0] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_token_budget_invalid[-5] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_valid[LRU] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_valid[score] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_valid[hybrid] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_valid[priority] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_valid[adaptive] PASSED [ 19%]
tests/unit/legacy/test_config_validators_additional.py::test_eviction_policy_invalid PASSED [ 19%]
tests/unit/legacy/test_config_watcher_cleanup.py::test_config_spec_exists PASSED [ 20%]
tests/unit/legacy/test_config_watcher_cleanup.py::test_cli_watcher_cleanup PASSED [ 20%]
tests/unit/legacy/test_config_watcher_cleanup.py::test_api_watcher_cleanup PASSED [ 20%]
tests/unit/legacy/test_config_watcher_cleanup.py::test_cli_watcher_cleanup_error PASSED [ 20%]
tests/unit/legacy/test_config_watcher_cleanup.py::test_api_watcher_cleanup_error PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_orchestrator_parse_config_basic PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_search_stub_backend[legacy] PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_search_stub_backend[vss-enabled] PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_search_stub_backend_return_handles_fallback PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_search_stub_duckduckgo_canonical_query PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_search_stub_local_file_canonical_query PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_planner_execute PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_storage_setup_teardown PASSED [ 20%]
tests/unit/legacy/test_core_modules_additional.py::test_storage_setup_without_kuzu PASSED [ 20%]
tests/unit/legacy/test_data_analysis.py::test_metrics_dataframe_enabled SKIPPED [ 21%]
tests/unit/legacy/test_data_analysis.py::test_metrics_dataframe_disabled PASSED [ 21%]
tests/unit/legacy/test_data_analysis.py::test_metrics_dataframe_polars_missing PASSED [ 21%]
tests/unit/legacy/test_data_analysis.py::test_metrics_dataframe_reload_without_polars PASSED [ 21%]
tests/unit/legacy/test_data_analysis_polars.py::test_metrics_dataframe_summary SKIPPED [ 21%]
tests/unit/legacy/test_distributed.py::test_get_message_broker_invalid PASSED [ 21%]
tests/unit/legacy/test_distributed.py::test_publish_claim_inmemory SKIPPED [ 21%]
tests/unit/legacy/test_distributed_broker.py::test_get_message_broker_memory SKIPPED [ 21%]
tests/unit/legacy/test_distributed_broker.py::test_get_message_broker_invalid PASSED [ 21%]
tests/unit/legacy/test_distributed_broker.py::test_redis_broker_requires_dependency PASSED [ 21%]
tests/unit/legacy/test_distributed_broker.py::test_ray_broker_publish PASSED [ 21%]
tests/unit/legacy/test_distributed_broker_import_error.py::test_redis_broker_missing_dependency PASSED [ 21%]
tests/unit/legacy/test_distributed_coordination_benchmark.py::test_benchmark_scales SKIPPED [ 21%]
tests/unit/legacy/test_distributed_coordination_benchmark.py::test_benchmark_survives_worker_crash SKIPPED [ 21%]
tests/unit/legacy/test_distributed_coordination_props.py::test_leader_is_minimum PASSED [ 22%]
tests/unit/legacy/test_distributed_coordination_props.py::test_message_ordering_preserved SKIPPED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_execute_agent_process_records_queue PASSED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_execute_agent_remote SKIPPED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_ray_executor_cycle_callback SKIPPED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_process_executor_uses_local_queue PASSED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_query_state_cloudpickle_round_trip SKIPPED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_query_state_ray_round_trip PASSED [ 22%]
tests/unit/legacy/test_distributed_executors.py::test_publish_claim_enqueues_typed_message PASSED [ 22%]
tests/unit/legacy/test_distributed_extra.py::test_get_message_broker_default SKIPPED [ 22%]
tests/unit/legacy/test_distributed_extra.py::test_redis_queue_roundtrip SKIPPED [ 22%]
tests/unit/legacy/test_distributed_perf_compare.py::test_compare_matches_theory_within_tolerance PASSED [ 22%]
tests/unit/legacy/test_distributed_perf_sim_script.py::test_latency_decreases_with_workers PASSED [ 22%]
tests/unit/legacy/test_distributed_perf_sim_script.py::test_cli_execution PASSED [ 23%]
tests/unit/legacy/test_distributed_perf_sim_script.py::test_cli_requires_arguments PASSED [ 23%]
tests/unit/legacy/test_distributed_redis.py::test_get_message_broker_redis_roundtrip PASSED [ 23%]
tests/unit/legacy/test_distributed_redis.py::test_get_message_broker_redis_missing PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_download_extension_network_fallback PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_download_extension_creates_stub_when_offline PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_download_extension_offline_without_duckdb PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_download_extension_fallback_path PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_offline_fallback_skips_samefile_copy PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_setup_sh_ignores_smoke_failure_with_stub PASSED [ 23%]
tests/unit/legacy/test_download_duckdb_extensions.py::test_load_offline_env_sets_vector_extension_path PASSED [ 23%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_init PASSED [ 23%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_default_path PASSED [ 23%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_custom_path PASSED [ 23%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_with_connection_error PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_table_creation_failure PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_setup_missing_extension_continues PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_create_tables PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_initialize_schema_version PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_get_schema_version PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_get_schema_version_no_version PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_update_schema_version PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_run_migrations PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_has_vss_true PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_has_vss_false PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_close PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend.py::TestDuckDBStorageBackend::test_clear PASSED [ 24%]
tests/unit/legacy/test_duckdb_storage_backend_concurrency.py::test_concurrent_setup_is_idempotent PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_concurrency.py::test_initialize_schema_version_failure PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_concurrency.py::test_persist_claims_concurrent PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index_extension_not_loaded PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_create_hnsw_index_error PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim_minimal PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_persist_claim_error PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search_vss_not_available PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_vector_search_error PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_get_connection PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_get_connection_not_initialized PASSED [ 25%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_update_claim_full_replace PASSED [ 26%]
tests/unit/legacy/test_duckdb_storage_backend_extended.py::TestDuckDBStorageBackendExtended::test_update_claim_partial PASSED [ 26%]
tests/unit/legacy/test_error_recovery.py::test_retry_with_backoff_succeeds_on_first_try PASSED [ 26%]
tests/unit/legacy/test_error_recovery.py::test_retry_with_backoff_retries_until_success PASSED [ 26%]
tests/unit/legacy/test_error_recovery.py::test_retry_with_backoff_raises_after_max_retries PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_error_info_to_dict_and_str PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_formatters PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_timeout_sets_warning PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_redacted_context_preserved PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_get_error_info[exc0-Check your configuration file] PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_get_error_info[exc1-API key] PASSED [ 26%]
tests/unit/legacy/test_error_utils_additional.py::test_get_error_info[exc2-5] PASSED [ 26%]
tests/unit/legacy/test_errors.py::test_error_hierarchy PASSED            [ 26%]
tests/unit/legacy/test_errors.py::test_error_messages PASSED             [ 27%]
tests/unit/legacy/test_errors.py::test_error_with_cause PASSED           [ 27%]
tests/unit/legacy/test_errors.py::test_timeout_error PASSED              [ 27%]
tests/unit/legacy/test_errors.py::test_not_found_error PASSED            [ 27%]
tests/unit/legacy/test_eviction.py::test_ram_eviction_skips_without_metrics PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_ram_eviction PASSED             [ 27%]
tests/unit/legacy/test_eviction.py::test_score_eviction PASSED           [ 27%]
tests/unit/legacy/test_eviction.py::test_lru_eviction_order PASSED       [ 27%]
tests/unit/legacy/test_eviction.py::test_lru_eviction_sequence PASSED    [ 27%]
tests/unit/legacy/test_eviction.py::test_lru_eviction_with_vss_two_passes PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_lru_eviction_with_vss_fallback_preserves_survivors PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_lru_eviction_respects_minimum_survivors PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_deterministic_override_clamped_to_minimum PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_initialize_storage_in_memory PASSED [ 27%]
tests/unit/legacy/test_eviction.py::test_initialize_storage_file_path PASSED [ 28%]
tests/unit/legacy/test_examples_package.py::test_sample_configuration PASSED [ 28%]
tests/unit/legacy/test_extras_markers.py::test_nlp_marker SKIPPED (n...) [ 28%]
tests/unit/legacy/test_extras_markers.py::test_ui_marker PASSED          [ 28%]
tests/unit/legacy/test_extras_markers.py::test_vss_marker PASSED         [ 28%]
tests/unit/legacy/test_extras_markers.py::test_git_marker PASSED         [ 28%]
tests/unit/legacy/test_extras_markers.py::test_distributed_marker PASSED [ 28%]
tests/unit/legacy/test_extras_markers.py::test_analysis_marker SKIPPED   [ 28%]
tests/unit/legacy/test_extras_markers.py::test_llm_marker PASSED         [ 28%]
tests/unit/legacy/test_extras_markers.py::test_parsers_marker PASSED     [ 28%]
tests/unit/legacy/test_extras_markers.py::test_gpu_marker SKIPPED (g...) [ 28%]
tests/unit/legacy/test_failure_paths.py::test_prompt_registry_unknown PASSED [ 28%]
tests/unit/legacy/test_failure_paths.py::test_prompt_render_missing_variable PASSED [ 28%]
tests/unit/legacy/test_failure_paths.py::test_check_agent_can_execute_false PASSED [ 29%]
tests/unit/legacy/test_failure_paths.py::test_external_lookup_unknown_backend PASSED [ 29%]
tests/unit/legacy/test_failure_paths.py::test_vector_search_vss_unavailable PASSED [ 29%]
tests/unit/legacy/test_failure_paths.py::test_query_endpoint_validation_error PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_external_lookup_network_failure PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_external_lookup_unknown_backend PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_external_lookup_fallback PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_external_lookup_fallback_templated_query PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_get_message_broker_invalid PASSED [ 29%]
tests/unit/legacy/test_failure_scenarios.py::test_redis_broker_init_failure PASSED [ 29%]
tests/unit/legacy/test_formattemplate_property.py::test_formattemplate_render PASSED [ 29%]
tests/unit/legacy/test_future_import_hygiene.py::test_future_annotations_import_is_first PASSED [ 29%]
tests/unit/legacy/test_git_repo_stub.py::test_repo_init_and_commit PASSED [ 29%]
tests/unit/legacy/test_gpu_bertopic_import.py::test_try_import_bertopic_success SKIPPED [ 29%]
tests/unit/legacy/test_heuristic_properties.py::test_weighted_score_normalization PASSED [ 30%]
tests/unit/legacy/test_heuristic_properties.py::test_token_budget_monotonicity PASSED [ 30%]
tests/unit/legacy/test_heuristic_properties.py::test_token_budget_monotonicity_deterministic PASSED [ 30%]
tests/unit/legacy/test_heuristic_properties.py::test_token_budget_zero_usage_regression PASSED [ 30%]
tests/unit/legacy/test_http_session.py::test_http_session_lifecycle PASSED [ 30%]
tests/unit/legacy/test_hybridmethod_guard.py::test_hybridmethod_requires_get_instance PASSED [ 30%]
tests/unit/legacy/test_hybridmethod_guard.py::test_hybridmethod_class_and_instance_calls PASSED [ 30%]
tests/unit/legacy/test_incremental_updates.py::test_refresh_vector_index_calls_backend PASSED [ 30%]
tests/unit/legacy/test_incremental_updates.py::test_persist_claim_triggers_index_refresh PASSED [ 30%]
tests/unit/legacy/test_incremental_updates.py::test_update_rdf_claim_wrapper PASSED [ 30%]
tests/unit/legacy/test_interfaces.py::test_query_state_complies PASSED   [ 30%]
tests/unit/legacy/test_interfaces.py::test_custom_state_complies PASSED  [ 30%]
tests/unit/legacy/test_interfaces.py::test_incomplete_state_rejected PASSED [ 30%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_owlrl PASSED [ 30%]
tests/unit/legacy/test_kg_reasoning.py::test_register_reasoner_adds_plugin PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_external PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_invokes_plugin_once PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_preserves_triple_count PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_external_error PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_query_with_reasoning PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_without_owlrl PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_reload_without_owlrl PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_timeout PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_keyboard_interrupt PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_skips_when_limit_exceeded PASSED [ 31%]
tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_unknown PASSED [ 31%]
tests/unit/legacy/test_llm_adapter.py::test_dummy_adapter_generation PASSED [ 31%]
tests/unit/legacy/test_llm_adapter.py::test_lmstudio_adapter PASSED      [ 32%]
tests/unit/legacy/test_llm_adapter.py::test_openai_adapter PASSED        [ 32%]
tests/unit/legacy/test_llm_adapter.py::test_compress_prompt_falls_back_when_summary_exceeds_budget PASSED [ 32%]
tests/unit/legacy/test_llm_adapter_validate_model.py::test_validate_model_invalid PASSED [ 32%]
tests/unit/legacy/test_llm_adapters.py::test_validate_model_defaults_to_available_first_model PASSED [ 32%]
tests/unit/legacy/test_llm_adapters.py::test_validate_model_uses_generic_default_when_no_models PASSED [ 32%]
tests/unit/legacy/test_llm_adapters.py::test_validate_model_rejects_invalid_models PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestModelCapabilities::test_model_capabilities_creation PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestModelCapabilities::test_to_dict_method PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_singleton_pattern PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_provider_caching PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_provider_unknown PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_all_providers PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_with_provider PASSED [ 32%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_without_provider PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_not_found PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_get_model_capabilities_search_across_providers PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_with_api PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_without_api_key PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_openrouter_with_api_error PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_openai PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_lmstudio PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestCapabilityProber::test_probe_dummy PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestHelperFunctions::test_get_capability_prober PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestHelperFunctions::test_probe_all_providers_helper PASSED [ 33%]
tests/unit/legacy/test_llm_capabilities.py::TestHelperFunctions::test_get_model_capabilities_helper PASSED [ 33%]
tests/unit/legacy/test_llm_docstrings.py::test_module_docstrings PASSED  [ 33%]
tests/unit/legacy/test_llm_docstrings.py::test_class_docstrings PASSED   [ 34%]
tests/unit/legacy/test_llm_docstrings.py::test_function_docstrings PASSED [ 34%]
tests/unit/legacy/test_llm_pool.py::test_get_session_reuses_existing_instance PASSED [ 34%]
tests/unit/legacy/test_local_git_backend.py::test_local_git_backend_searches_repo PASSED [ 34%]
tests/unit/legacy/test_logging_shutdown.py::test_stop_watching_after_logging_shutdown PASSED [ 34%]
tests/unit/legacy/test_logging_utils.py::test_get_logger PASSED          [ 34%]
tests/unit/legacy/test_logging_utils.py::test_structured_output_and_redaction PASSED [ 34%]
tests/unit/legacy/test_logging_utils.py::test_intercept_handler_handles_closed_stream PASSED [ 34%]
tests/unit/legacy/test_logging_utils_env.py::test_configure_logging_from_env PASSED [ 34%]
tests/unit/legacy/test_logging_utils_env.py::test_configure_logging_from_env_invalid PASSED [ 34%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_create_command PASSED [ 34%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_list_command PASSED [ 34%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_restore_command PASSED [ 34%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_create_invalid_dir PASSED [ 34%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_restore_invalid_path PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_recover_command PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_create_error PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_create_missing_tables PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_list_error PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_restore_error PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_schedule_error PASSED [ 35%]
tests/unit/legacy/test_main_backup_commands.py::test_backup_recover_error PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_search_default_output_tty PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_search_default_output_json PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_search_reasoning_mode_option[direct] PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_search_reasoning_mode_option[dialectical] PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_search_primus_start_option PASSED [ 35%]
tests/unit/legacy/test_main_cli.py::test_config_command PASSED           [ 36%]
tests/unit/legacy/test_main_cli.py::test_serve_command PASSED            [ 36%]
tests/unit/legacy/test_main_config_commands.py::test_config_init_command PASSED [ 36%]
tests/unit/legacy/test_main_config_commands.py::test_config_init_command_force PASSED [ 36%]
tests/unit/legacy/test_main_config_commands.py::test_config_validate_command_valid PASSED [ 36%]
tests/unit/legacy/test_main_config_commands.py::test_config_validate_command_invalid PASSED [ 36%]
tests/unit/legacy/test_main_first_run_detection.py::test_first_run_detection_respects_search_paths PASSED [ 36%]
tests/unit/legacy/test_main_module.py::TestMainModule::test_main_module_direct_execution PASSED [ 36%]
tests/unit/legacy/test_main_monitor_commands.py::test_monitor_command PASSED [ 36%]
tests/unit/legacy/test_main_monitor_commands.py::test_serve_a2a_command PASSED [ 36%]
tests/unit/legacy/test_main_monitor_commands.py::test_serve_a2a_command_keyboard_interrupt PASSED [ 36%]
tests/unit/legacy/test_main_monitor_commands.py::test_monitor_serve_command PASSED [ 36%]
tests/unit/legacy/test_main_monitor_commands.py::test_monitor_serve_command_keyboard_interrupt PASSED [ 36%]
tests/unit/legacy/test_mcp_interface.py::test_client_server_roundtrip PASSED [ 36%]
tests/unit/legacy/test_mcp_interface.py::test_client_server_failure PASSED [ 37%]
tests/unit/legacy/test_metrics.py::test_metrics_collection_and_endpoint PASSED [ 37%]
tests/unit/legacy/test_metrics.py::test_reset_metrics_clears_counters PASSED [ 37%]
tests/unit/legacy/test_metrics_counters.py::test_reset_metrics PASSED    [ 37%]
tests/unit/legacy/test_metrics_counters.py::test_temporary_metrics_restores_state PASSED [ 37%]
tests/unit/legacy/test_metrics_counters.py::test_get_system_usage_returns_floats PASSED [ 37%]
tests/unit/legacy/test_metrics_extra.py::test_cycle_and_agent_metrics PASSED [ 37%]
tests/unit/legacy/test_metrics_extra.py::test_resource_tracking PASSED   [ 37%]
tests/unit/legacy/test_metrics_extra2.py::test_get_system_usage_success PASSED [ 37%]
tests/unit/legacy/test_metrics_extra2.py::test_get_system_usage_failure PASSED [ 37%]
tests/unit/legacy/test_metrics_helpers.py::test_mean_last_nonzero PASSED [ 37%]
tests/unit/legacy/test_metrics_helpers.py::test_temporary_metrics_restores_state PASSED [ 37%]
tests/unit/legacy/test_metrics_helpers.py::test_record_query_and_tokens PASSED [ 37%]
tests/unit/legacy/test_metrics_heuristics.py::test_compress_prompt_if_needed PASSED [ 38%]
tests/unit/legacy/test_metrics_heuristics.py::test_suggest_token_budget PASSED [ 38%]
tests/unit/legacy/test_metrics_misc.py::test_metrics_reset_and_temporary PASSED [ 38%]
tests/unit/legacy/test_metrics_misc.py::test_get_system_usage PASSED     [ 38%]
tests/unit/legacy/test_metrics_misc.py::test_token_helpers PASSED        [ 38%]
tests/unit/legacy/test_metrics_summary.py::test_metrics_summary[records0] PASSED [ 38%]
tests/unit/legacy/test_metrics_summary.py::test_metrics_summary[records1] PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_extra.py::test_compress_prompt_threshold PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_extra.py::test_suggest_token_budget_shrink PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_compression_threshold_reduces_with_history PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_token_budget_expands_then_shrinks PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_budget_shrinks_to_one_after_zero_usage PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_budget_converges_for_constant_usage PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_budget_rounds_half_up PASSED [ 38%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_budget_respects_bounds_during_spike PASSED [ 39%]
tests/unit/legacy/test_metrics_token_budget_spec.py::test_convergence_bound_holds PASSED [ 39%]
tests/unit/legacy/test_models_docstrings.py::test_models_spec_exists PASSED [ 39%]
tests/unit/legacy/test_models_docstrings.py::test_module_docstrings PASSED [ 39%]
tests/unit/legacy/test_models_docstrings.py::test_module_docstring_mentions_spec PASSED [ 39%]
tests/unit/legacy/test_models_docstrings.py::test_class_docstrings PASSED [ 39%]
tests/unit/legacy/test_monitor_cli.py::test_monitor_prompts_and_passes_callbacks PASSED [ 39%]
tests/unit/legacy/test_monitor_cli.py::test_monitor_metrics PASSED       [ 39%]
tests/unit/legacy/test_monitor_cli.py::test_monitor_metrics_default_counters PASSED [ 39%]
tests/unit/legacy/test_monitor_cli.py::test_metrics_skips_storage PASSED [ 39%]
tests/unit/legacy/test_monitor_cli.py::test_storage_teardown_handles_missing_config PASSED [ 39%]
tests/unit/legacy/test_monitor_metrics_init.py::test_monitor_cli_initializes_metrics PASSED [ 39%]
tests/unit/legacy/test_more_coverage.py::test_log_sources PASSED         [ 39%]
tests/unit/legacy/test_more_coverage.py::test_log_sources_missing PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_persist_claims PASSED      [ 40%]
tests/unit/legacy/test_more_coverage.py::test_persist_claims_invalid PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_ndcg_perfect PASSED        [ 40%]
tests/unit/legacy/test_more_coverage.py::test_http_session_cycle PASSED  [ 40%]
tests/unit/legacy/test_more_coverage.py::test_connection_context_manager_pool PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_connection_context_manager_single PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_formattemplate_metrics PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_normalize_audit_payload_includes_expected_fields PASSED [ 40%]
tests/unit/legacy/test_more_coverage.py::test_build_audit_telemetry_summarises_audits PASSED [ 40%]
tests/unit/legacy/test_new_modules.py::test_output_formatter_initializes_once PASSED [ 40%]
tests/unit/legacy/test_new_modules.py::test_streamlit_log_handler_appends_logs PASSED [ 40%]
tests/unit/legacy/test_new_modules.py::test_backup_manager_singleton PASSED [ 40%]
tests/unit/legacy/test_node_health_monitor_property.py::test_check_once_updates_gauges PASSED [ 40%]
tests/unit/legacy/test_numpy_stub.py::test_numpy_stub_manual_install PASSED [ 41%]
tests/unit/legacy/test_ontology_reasoner_props.py::test_reasoner_reaches_closure PASSED [ 41%]
tests/unit/legacy/test_optimize_weights_unit.py::test_optimize_weights_improves_score SKIPPED [ 41%]
tests/unit/legacy/test_optional_extras.py::test_ui_extra PASSED          [ 41%]
tests/unit/legacy/test_optional_extras.py::test_vss_extra SKIPPED (v...) [ 41%]
tests/unit/legacy/test_optional_extras.py::test_git_extra SKIPPED (g...) [ 41%]
tests/unit/legacy/test_optional_extras.py::test_distributed_extra SKIPPED [ 41%]
tests/unit/legacy/test_optional_extras.py::test_analysis_extra SKIPPED   [ 41%]
tests/unit/legacy/test_optional_extras.py::test_nlp_extra SKIPPED (n...) [ 41%]
tests/unit/legacy/test_optional_extras.py::test_llm_extra SKIPPED (l...) [ 41%]
tests/unit/legacy/test_optional_extras.py::test_parsers_extra PASSED     [ 41%]
tests/unit/legacy/test_orchestration_utils_delegation.py::test_get_agent_delegates PASSED [ 41%]
tests/unit/legacy/test_orchestration_utils_delegation.py::test_capture_token_usage_delegates PASSED [ 41%]
tests/unit/legacy/test_orchestration_utils_module.py::test_get_memory_usage_psutil PASSED [ 41%]
tests/unit/legacy/test_orchestration_utils_module.py::test_get_memory_usage_fallback PASSED [ 42%]
tests/unit/legacy/test_orchestration_utils_module.py::test_calculate_result_confidence PASSED [ 42%]
tests/unit/legacy/test_orchestration_utils_module.py::test_calculate_result_confidence_penalties PASSED [ 42%]
tests/unit/legacy/test_orchestrator_breaker_state_transitions.py::test_breaker_state_sequence PASSED [ 42%]
tests/unit/legacy/test_orchestrator_budget_and_errors.py::test_adaptive_budget_scales_with_loops PASSED [ 42%]
tests/unit/legacy/test_orchestrator_budget_and_errors.py::test_error_categorization[exc0-transient] PASSED [ 42%]
tests/unit/legacy/test_orchestrator_budget_and_errors.py::test_error_categorization[exc1-recoverable] PASSED [ 42%]
tests/unit/legacy/test_orchestrator_budget_and_errors.py::test_error_categorization[exc2-critical] PASSED [ 42%]
tests/unit/legacy/test_orchestrator_cb_manager.py::test_circuit_breaker_state_is_instance_isolated PASSED [ 42%]
tests/unit/legacy/test_orchestrator_circuit_breaker_property.py::test_circuit_breaker_opens_and_recovers PASSED [ 42%]
tests/unit/legacy/test_orchestrator_edgecases.py::test_get_agent_not_found PASSED [ 42%]
tests/unit/legacy/test_orchestrator_edgecases.py::test_parse_config_direct_mode PASSED [ 42%]
tests/unit/legacy/test_orchestrator_edgecases.py::test_parse_config_direct_mode_agent_groups PASSED [ 42%]
tests/unit/legacy/test_orchestrator_errors.py::test_execute_agent_records_errors_and_circuit_breaker PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_retry_with_backoff_on_transient_error PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_orchestrator_raises_after_error PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_invalid_agent_name_raises PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_callback_error_propagates PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_agent_error_is_wrapped[ValueError-specific error] PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_agent_error_is_wrapped[RuntimeError-runtime error] PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_parallel_query_error_claims PASSED [ 43%]
tests/unit/legacy/test_orchestrator_errors.py::test_parallel_query_timeout_claims SKIPPED [ 43%]
tests/unit/legacy/test_orchestrator_helpers.py::test_get_agent_success PASSED [ 43%]
tests/unit/legacy/test_orchestrator_helpers.py::test_get_agent_not_found PASSED [ 43%]
tests/unit/legacy/test_orchestrator_helpers.py::test_call_agent_start_callback PASSED [ 43%]
tests/unit/legacy/test_orchestrator_helpers.py::test_persist_claims_logs_storage_error PASSED [ 43%]
tests/unit/legacy/test_orchestrator_memory.py::test_get_memory_usage_psutil PASSED [ 43%]
tests/unit/legacy/test_orchestrator_memory.py::test_get_memory_usage_fallback PASSED [ 44%]
tests/unit/legacy/test_orchestrator_messages.py::test_agents_exchange_messages PASSED [ 44%]
tests/unit/legacy/test_orchestrator_order.py::test_custom_agents_order PASSED [ 44%]
tests/unit/legacy/test_orchestrator_order.py::test_async_custom_agents_concurrent PASSED [ 44%]
tests/unit/legacy/test_orchestrator_order.py::test_parse_config_direct_mode_groups PASSED [ 44%]
tests/unit/legacy/test_orchestrator_parallel_deterministic.py::test_parallel_merging_is_deterministic SKIPPED [ 44%]
tests/unit/legacy/test_orchestrator_parallel_deterministic.py::test_parallel_merging_deduplicates_identical_claims PASSED [ 44%]
tests/unit/legacy/test_orchestrator_parallel_property.py::test_parallel_groups_merge_metrics PASSED [ 44%]
tests/unit/legacy/test_orchestrator_perf_sim.py::test_queue_metrics_more_workers PASSED [ 44%]
tests/unit/legacy/test_orchestrator_perf_sim.py::test_benchmark_scheduler_scales SKIPPED [ 44%]
tests/unit/legacy/test_orchestrator_perf_sim.py::test_queue_metrics_mm1_values PASSED [ 44%]
tests/unit/legacy/test_orchestrator_perf_sim.py::test_simulate_adds_memory_usage PASSED [ 44%]
tests/unit/legacy/test_orchestrator_proofs.py::test_circuit_breaker_threshold_sequence PASSED [ 44%]
tests/unit/legacy/test_orchestrator_proofs.py::test_parallel_result_merging SKIPPED [ 45%]
tests/unit/legacy/test_orchestrator_storage_interface.py::test_infer_relations_calls_storage PASSED [ 45%]
tests/unit/legacy/test_orchestrator_storage_interface.py::test_query_ontology_calls_storage PASSED [ 45%]
tests/unit/legacy/test_orchestrator_storage_interface.py::test_run_parallel_query_delegates PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_rotate_list_property PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc0-transient] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc1-recoverable] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc2-transient] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc3-recoverable] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc4-critical] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc5-critical] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_categorize_error[exc6-critical] PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_calculate_result_confidence PASSED [ 45%]
tests/unit/legacy/test_orchestrator_utils.py::test_apply_recovery_strategy PASSED [ 45%]
tests/unit/legacy/test_output_format.py::test_format_json PASSED         [ 46%]
tests/unit/legacy/test_output_format.py::test_format_markdown PASSED     [ 46%]
tests/unit/legacy/test_output_format.py::test_format_plain PASSED        [ 46%]
tests/unit/legacy/test_output_format.py::test_format_text_alias PASSED   [ 46%]
tests/unit/legacy/test_output_format.py::test_json_no_ansi PASSED        [ 46%]
tests/unit/legacy/test_output_format.py::test_markdown_no_ansi PASSED    [ 46%]
tests/unit/legacy/test_output_format.py::test_format_graph PASSED        [ 46%]
tests/unit/legacy/test_output_format.py::test_format_dict_input[json-{] PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_dict_input[markdown-# Answer] PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_dict_input[plain-Answer:] PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_invalid_input PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_unknown_defaults_to_markdown PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_complex_response PASSED [ 46%]
tests/unit/legacy/test_output_format.py::test_format_template_class PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_format_template_missing_variable PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_template_registry PASSED   [ 47%]
tests/unit/legacy/test_output_format.py::test_template_registry_default_templates PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_template_registry_missing_template PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_template_from_file PASSED  [ 47%]
tests/unit/legacy/test_output_format.py::test_template_from_config PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_format_with_custom_template PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_format_with_missing_template PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_tldr_knowledge_graph_section_requires_summary PASSED [ 47%]
tests/unit/legacy/test_output_format.py::test_trace_graph_exports_section_requires_summary PASSED [ 47%]
tests/unit/legacy/test_output_format_edgecases.py::test_template_fallback_to_markdown PASSED [ 47%]
tests/unit/legacy/test_output_format_edgecases2.py::test_graph_format PASSED [ 47%]
tests/unit/legacy/test_output_format_extra.py::test_custom_template_render PASSED [ 47%]
tests/unit/legacy/test_output_format_extra2.py::test_metric_variable_rendering PASSED [ 48%]
tests/unit/legacy/test_output_format_extra2.py::test_format_missing_variable_fallback PASSED [ 48%]
tests/unit/legacy/test_parallel_module.py::test_get_memory_usage_fallback PASSED [ 48%]
tests/unit/legacy/test_parallel_module.py::test_calculate_result_confidence PASSED [ 48%]
tests/unit/legacy/test_parallel_module.py::test_execute_parallel_query_basic PASSED [ 48%]
tests/unit/legacy/test_parallel_module.py::test_execute_parallel_query_agent_error PASSED [ 48%]
tests/unit/legacy/test_planner_prompt_builder.py::test_planner_prompt_builder_injects_graph_context PASSED [ 48%]
tests/unit/legacy/test_planner_prompt_builder.py::test_planner_prompt_builder_without_graph_context PASSED [ 48%]
tests/unit/legacy/test_pool_sessions.py::test_search_pool_reuse_and_cleanup PASSED [ 48%]
tests/unit/legacy/test_pool_sessions.py::test_llm_pool_reuse_and_cleanup PASSED [ 48%]
tests/unit/legacy/test_pool_sessions.py::test_set_http_session PASSED    [ 48%]
tests/unit/legacy/test_prompts_docstrings.py::test_module_docstring PASSED [ 48%]
tests/unit/legacy/test_prompts_docstrings.py::test_class_docstrings PASSED [ 48%]
tests/unit/legacy/test_prompts_docstrings.py::test_function_docstrings PASSED [ 49%]
tests/unit/legacy/test_property_api_rate_limit_bounds.py::test_rate_limit_bounds PASSED [ 49%]
tests/unit/legacy/test_property_bm25_normalization.py::test_bm25_scores_normalized SKIPPED [ 49%]
tests/unit/legacy/test_property_coordination_fixed_point.py::test_ground_truth_fixed_point PASSED [ 49%]
tests/unit/legacy/test_property_coordination_stability.py::test_error_bounded PASSED [ 49%]
tests/unit/legacy/test_property_dialectical_coordination.py::test_error_never_increases PASSED [ 49%]
tests/unit/legacy/test_property_evaluate_weights.py::test_evaluate_weights_scale_invariant PASSED [ 49%]
tests/unit/legacy/test_property_evaluate_weights.py::test_evaluate_weights_empty PASSED [ 49%]
tests/unit/legacy/test_property_ontology_reasoner.py::test_reasoner_preserves_triples PASSED [ 49%]
tests/unit/legacy/test_property_ontology_reasoner.py::test_reasoner_timeout PASSED [ 49%]
tests/unit/legacy/test_property_ontology_reasoner.py::test_reasoner_respects_triple_limit PASSED [ 49%]
tests/unit/legacy/test_property_ranking_ties.py::test_rank_results_preserves_input_order PASSED [ 49%]
tests/unit/legacy/test_property_resource_monitor_stats.py::test_statistics_match_numpy PASSED [ 49%]
tests/unit/legacy/test_property_search.py::test_generate_queries_variants PASSED [ 49%]
tests/unit/legacy/test_property_search.py::test_generate_queries_embeddings PASSED [ 50%]
tests/unit/legacy/test_property_search_ranking.py::test_merge_rank_scores_linear PASSED [ 50%]
tests/unit/legacy/test_property_search_ranking.py::test_rank_results_orders_by_weighted_scores PASSED [ 50%]
tests/unit/legacy/test_property_search_ranking.py::test_rank_results_breaks_ties_deterministically PASSED [ 50%]
tests/unit/legacy/test_property_search_ranking.py::test_rank_results_groups_nearby_scores PASSED [ 50%]
tests/unit/legacy/test_property_storage.py::test_pop_lru_order PASSED    [ 50%]
tests/unit/legacy/test_property_storage.py::test_pop_low_score PASSED    [ 50%]
tests/unit/legacy/test_property_storage.py::test_current_ram_mb_non_negative PASSED [ 50%]
tests/unit/legacy/test_property_token_budget_sequence.py::test_token_budget_sequence_monotonic PASSED [ 50%]
tests/unit/legacy/test_property_token_counting.py::test_compress_prompt_preserves_edges PASSED [ 50%]
tests/unit/legacy/test_property_token_counting.py::test_prune_context_respects_budget PASSED [ 50%]
tests/unit/legacy/test_property_vector_search.py::test_vector_search_calls_backend PASSED [ 50%]
tests/unit/legacy/test_property_vector_search.py::test_vector_search_backend_receives_exact PASSED [ 50%]
tests/unit/legacy/test_property_vector_search.py::test_vector_search_invalid PASSED [ 50%]
tests/unit/legacy/test_property_vector_search.py::test_vector_search_malformed_embedding PASSED [ 51%]
tests/unit/legacy/test_property_vector_search.py::test_validate_vector_search_params_rejects_malformed PASSED [ 51%]
tests/unit/legacy/test_property_watch_changes.py::test_watch_changes_idempotent PASSED [ 51%]
tests/unit/legacy/test_property_weight_convergence.py::test_ndcg_monotonic_with_step SKIPPED [ 51%]
tests/unit/legacy/test_property_weight_tuning.py::test_tune_weights_improves_ndcg SKIPPED [ 51%]
tests/unit/legacy/test_query_state.py::test_get_dialectical_structure PASSED [ 51%]
tests/unit/legacy/test_query_state_features.py::test_query_state_update_and_retrieval PASSED [ 51%]
tests/unit/legacy/test_query_state_features.py::test_query_state_update_validates_payload_shapes PASSED [ 51%]
tests/unit/legacy/test_query_state_features.py::test_task_graph_normalization_logs_react_entries PASSED [ 51%]
tests/unit/legacy/test_query_state_features.py::test_task_graph_telemetry_persists SKIPPED [ 51%]
tests/unit/legacy/test_ranking_convergence.py::test_ranking_monotonic PASSED [ 51%]
tests/unit/legacy/test_ranking_idempotence.py::test_rank_results_idempotent PASSED [ 51%]
tests/unit/legacy/test_ranking_weights.py::test_search_config_weight_validation PASSED [ 51%]
tests/unit/legacy/test_ranking_weights.py::test_default_config_weights_sum_to_one PASSED [ 52%]
tests/unit/legacy/test_ranking_weights.py::test_rank_results_sorted PASSED [ 52%]
tests/unit/legacy/test_ranking_weights.py::test_cross_backend_rank_sorted PASSED [ 52%]
tests/unit/legacy/test_ranking_weights.py::test_rank_results_invalid_sum PASSED [ 52%]
tests/unit/legacy/test_rdf_update.py::test_update_rdf_claim_replace PASSED [ 52%]
tests/unit/legacy/test_rdf_update.py::test_update_rdf_claim_partial PASSED [ 52%]
tests/unit/legacy/test_reasoning_modes.py::test_direct_mode_executes_once PASSED [ 52%]
tests/unit/legacy/test_reasoning_modes.py::test_chain_of_thought_mode_loops PASSED [ 52%]
tests/unit/legacy/test_reasoning_modes.py::test_chain_of_thought_records_steps PASSED [ 52%]
tests/unit/legacy/test_reasoning_strategy.py::test_chain_of_thought_strategy_loops PASSED [ 52%]
tests/unit/legacy/test_relevance_ranking.py::test_preprocess_text PASSED [ 52%]
tests/unit/legacy/test_relevance_ranking.py::test_calculate_bm25_scores PASSED [ 52%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_empty_input PASSED [ 52%]
tests/unit/legacy/test_relevance_ranking.py::test_calculate_semantic_similarity PASSED [ 52%]
tests/unit/legacy/test_relevance_ranking.py::test_assess_source_credibility PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results PASSED    [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_with_disabled_features PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_with_unavailable_libraries PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_weighted_combination PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_bm25_only PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_patched_bm25_function PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_search_config_invalid_weights PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_rank_results_sorted PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_external_lookup_uses_cache PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_relevance_score_monotonic PASSED [ 53%]
tests/unit/legacy/test_relevance_ranking.py::test_weight_sensitivity PASSED [ 53%]
tests/unit/legacy/test_resource_monitor_gpu.py::test_get_gpu_stats_pynvml PASSED [ 53%]
tests/unit/legacy/test_resource_monitor_gpu.py::test_get_gpu_stats_cli_psutil PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_gpu.py::test_get_gpu_stats_cli_subprocess PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_gpu.py::test_get_gpu_stats_logs_info_without_gpu_extra PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_gpu.py::test_get_gpu_stats_logs_debug_with_gpu_extra PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_start.py::test_gauge_reuse_resets_value PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_start.py::test_resource_monitor_records_stats PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_usage.py::test_get_usage_psutil PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_usage.py::test_get_usage_no_psutil PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_usage.py::test_get_usage_handles_runtime_errors PASSED [ 54%]
tests/unit/legacy/test_resource_monitor_usage.py::test_get_usage_normalizes_iterable_values PASSED [ 54%]
tests/unit/legacy/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.01] PASSED [ 54%]
tests/unit/legacy/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.05] PASSED [ 54%]
tests/unit/legacy/test_scheduler_benchmark.py::test_benchmark_scheduler_resources[0.1] PASSED [ 54%]
tests/unit/legacy/test_scheduler_benchmark.py::test_benchmark_scheduler_time_scales_with_duration PASSED [ 54%]
tests/unit/legacy/test_scheduler_benchmark.py::test_enqueue_with_limit_drops_items PASSED [ 55%]
tests/unit/legacy/test_scheduler_benchmark.py::test_enqueue_with_limit_invalid_limit PASSED [ 55%]
tests/unit/legacy/test_scheduling_resource_benchmark.py::test_run_benchmark_scaling PASSED [ 55%]
tests/unit/legacy/test_search.py::test_external_lookup PASSED            [ 55%]
tests/unit/legacy/test_search.py::test_external_lookup_special_chars PASSED [ 55%]
tests/unit/legacy/test_search.py::test_generate_queries PASSED           [ 55%]
tests/unit/legacy/test_search.py::test_external_lookup_backend_error PASSED [ 55%]
tests/unit/legacy/test_search.py::test_duckduckgo_timeout_error PASSED   [ 55%]
tests/unit/legacy/test_search.py::test_duckduckgo_json_decode_error PASSED [ 55%]
tests/unit/legacy/test_search.py::test_serper_backend_error PASSED       [ 55%]
tests/unit/legacy/test_search.py::test_serper_timeout_error PASSED       [ 55%]
tests/unit/legacy/test_search.py::test_local_file_backend SKIPPED (L...) [ 55%]
tests/unit/legacy/test_search.py::test_external_lookup_vector_search PASSED [ 55%]
tests/unit/legacy/test_search.py::test_external_lookup_returns_handles PASSED [ 56%]
tests/unit/legacy/test_search.py::test_http_session_atexit_hook PASSED   [ 56%]
tests/unit/legacy/test_search.py::test_rank_results_semantic_only PASSED [ 56%]
tests/unit/legacy/test_search.py::test_rank_results_bm25_only PASSED     [ 56%]
tests/unit/legacy/test_search.py::test_rank_results_credibility_only PASSED [ 56%]
tests/unit/legacy/test_search.py::test_external_lookup_hybrid_query PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_register_backend_and_lookup PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_external_lookup_unknown_backend PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_local_git_backend_ast_search PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_local_git_backend_missing_repo PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_local_git_backend_nonexistent_repo PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_local_git_backend_requires_gitpython PASSED [ 56%]
tests/unit/legacy/test_search_backends_unit.py::test_rank_results_merges_scores PASSED [ 56%]
tests/unit/legacy/test_search_context.py::test_optional_dependencies_not_imported_on_module_load SKIPPED [ 56%]
tests/unit/legacy/test_search_context.py::test_spacy_loaded_when_needed SKIPPED [ 57%]
tests/unit/legacy/test_search_context.py::test_topic_model_imports_when_built SKIPPED [ 57%]
tests/unit/legacy/test_search_context.py::test_topic_model_imports_with_legacy_fastembed SKIPPED [ 57%]
tests/unit/legacy/test_search_context_extract_entities_no_spacy.py::test_extract_entities_without_spacy SKIPPED [ 57%]
tests/unit/legacy/test_search_context_fallback.py::test_extract_entities_without_spacy SKIPPED [ 57%]
tests/unit/legacy/test_search_context_history_trim.py::test_add_to_history_trims_old_entries SKIPPED [ 57%]
tests/unit/legacy/test_search_context_imports.py::test_try_imports_disabled PASSED [ 57%]
tests/unit/legacy/test_search_context_imports.py::test_try_import_spacy_success PASSED [ 57%]
tests/unit/legacy/test_search_context_imports.py::test_try_import_bertopic_success PASSED [ 57%]
tests/unit/legacy/test_search_context_imports.py::test_try_import_sentence_transformers_success PASSED [ 57%]
tests/unit/legacy/test_search_context_spacy.py::test_initialize_nlp_no_auto_download SKIPPED [ 57%]
tests/unit/legacy/test_search_context_spacy.py::test_initialize_nlp_downloads_when_env SKIPPED [ 57%]
tests/unit/legacy/test_search_core_additional.py::test_cross_backend_rank_combines_results PASSED [ 57%]
tests/unit/legacy/test_search_core_additional.py::test_rank_results_weight_sum_error PASSED [ 58%]
tests/unit/legacy/test_search_extra.py::test_unknown_backend_raises PASSED [ 58%]
tests/unit/legacy/test_search_extra.py::test_backend_json_error PASSED   [ 58%]
tests/unit/legacy/test_search_extra.py::test_http_session_reuse PASSED   [ 58%]
tests/unit/legacy/test_search_http_session.py::test_http_session_management PASSED [ 58%]
tests/unit/legacy/test_search_http_session.py::test_set_http_session_registers_atexit PASSED [ 58%]
tests/unit/legacy/test_search_import.py::test_search_import_without_gitpython PASSED [ 58%]
tests/unit/legacy/test_search_import.py::test_search_import_with_gitpython PASSED [ 58%]
tests/unit/legacy/test_search_network_failures.py::test_external_lookup_request_exception PASSED [ 58%]
tests/unit/legacy/test_search_network_failures.py::test_external_lookup_timeout PASSED [ 58%]
tests/unit/legacy/test_search_parsers.py::test_extract_pdf_text PASSED   [ 58%]
tests/unit/legacy/test_search_parsers.py::test_extract_docx_text SKIPPED [ 58%]
tests/unit/legacy/test_search_parsers.py::test_search_local_file_backend SKIPPED [ 58%]
tests/unit/legacy/test_search_parsers.py::test_pdf_parser_errors_on_corrupt_file PASSED [ 58%]
tests/unit/legacy/test_search_parsers.py::test_docx_parser_errors_on_corrupt_file PASSED [ 59%]
tests/unit/legacy/test_search_parsers.py::test_extract_pdf_text_requires_dependency PASSED [ 59%]
tests/unit/legacy/test_search_parsers.py::test_extract_docx_text_requires_dependency PASSED [ 59%]
tests/unit/legacy/test_search_parsers.py::test_read_document_text_normalizes_plain_text PASSED [ 59%]
tests/unit/legacy/test_search_parsers.py::test_read_document_text_rejects_doc_files PASSED [ 59%]
tests/unit/legacy/test_search_reset.py::test_reset_clears_state_and_session PASSED [ 59%]
tests/unit/legacy/test_smoke_vss_stub.py::test_storage_setup_with_stub_extension PASSED [ 59%]
tests/unit/legacy/test_source_credibility_scores.py::test_assess_source_credibility_partial_domains PASSED [ 59%]
tests/unit/legacy/test_source_credibility_scores.py::test_rank_results_prefers_higher_credibility PASSED [ 59%]
tests/unit/legacy/test_source_credibility_simulation.py::test_scores_within_bounds PASSED [ 59%]
tests/unit/legacy/test_source_credibility_simulation.py::test_scores_monotonic_with_labels PASSED [ 59%]
tests/unit/legacy/test_specialized_agents.py::test_researcher_agent_execute PASSED [ 59%]
tests/unit/legacy/test_specialized_agents.py::test_critic_agent_execute PASSED [ 59%]
tests/unit/legacy/test_specialized_agents.py::test_summarizer_agent_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_planner_agent_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_planner_agent_parses_json_plan PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_researcher_agent_can_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_critic_agent_can_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_summarizer_agent_can_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_planner_agent_can_execute PASSED [ 60%]
tests/unit/legacy/test_specialized_agents.py::test_researcher_agent_processes_feedback PASSED [ 60%]
tests/unit/legacy/test_storage.py::test_record_claim_audit_persists_provenance_round_trip PASSED [ 60%]
tests/unit/legacy/test_storage_backend_extra.py::test_connection_context_no_pool PASSED [ 60%]
tests/unit/legacy/test_storage_backend_extra.py::test_persist_claim_calls_execute PASSED [ 60%]
tests/unit/legacy/test_storage_backend_extra.py::test_persist_claim_failure PASSED [ 60%]
tests/unit/legacy/test_storage_backend_extra.py::test_vector_search_no_vss PASSED [ 60%]
tests/unit/legacy/test_storage_backend_extra.py::test_vector_search_failure PASSED [ 60%]
tests/unit/legacy/test_storage_backup_fast.py::test_list_backups_nonexistent_dir PASSED [ 61%]
tests/unit/legacy/test_storage_delegate.py::test_set_and_get_delegate PASSED [ 61%]
tests/unit/legacy/test_storage_delegate.py::test_delegate_setup_called PASSED [ 61%]
tests/unit/legacy/test_storage_delegate.py::test_message_queue_put PASSED [ 61%]
tests/unit/legacy/test_storage_delegate_extra.py::test_touch_node_uses_delegate PASSED [ 61%]
tests/unit/legacy/test_storage_delegate_queue.py::test_set_and_get_delegate PASSED [ 61%]
tests/unit/legacy/test_storage_delegate_queue.py::test_set_message_queue PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_setup_rdf_store_error PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_setup_rdf_plugin_missing PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_setup_vector_extension_error PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_create_hnsw_index_error PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_vector_search_error PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_get_graph_not_initialized PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_get_duckdb_conn_not_initialized PASSED [ 61%]
tests/unit/legacy/test_storage_errors.py::test_get_rdf_store_not_initialized PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_fifo_eviction_property PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_lru_eviction_property PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_under_budget_property PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_reduces_usage_property PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_handles_metric_dropout PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_pop_lru PASSED          [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_pop_lru_empty PASSED    [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_pop_low_score PASSED    [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_pop_low_score_empty PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_lru_policy PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_score_policy PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_hybrid_policy PASSED [ 62%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_adaptive_policy PASSED [ 63%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_priority_policy PASSED [ 63%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_zero_budget PASSED [ 63%]
tests/unit/legacy/test_storage_eviction.py::test_enforce_ram_budget_no_nodes_to_evict PASSED [ 63%]
tests/unit/legacy/test_storage_eviction_sim.py::test_eviction_removes_nodes_when_over_budget PASSED [ 63%]
tests/unit/legacy/test_storage_eviction_sim.py::test_under_budget_keeps_nodes PASSED [ 63%]
tests/unit/legacy/test_storage_eviction_sim.py::test_zero_budget_disables_eviction PASSED [ 63%]
tests/unit/legacy/test_storage_eviction_sim.py::test_deterministic_override_enforces_cap PASSED [ 63%]
tests/unit/legacy/test_storage_eviction_sim.py::test_metrics_dropout_regression_seed PASSED [ 63%]
tests/unit/legacy/test_storage_initialize_error.py::test_initialize_storage_missing_backend PASSED [ 63%]
tests/unit/legacy/test_storage_manager_concurrency.py::test_setup_thread_safe PASSED [ 63%]
tests/unit/legacy/test_storage_manager_concurrency.py::test_persist_claim_thread_safe PASSED [ 63%]
tests/unit/legacy/test_storage_persist_failure.py::test_persist_claim_db_failure PASSED [ 63%]
tests/unit/legacy/test_storage_persistence.py::test_initialize_creates_tables_and_teardown_removes_file PASSED [ 63%]
tests/unit/legacy/test_storage_persistence.py::test_initialize_handles_missing_extension PASSED [ 64%]
tests/unit/legacy/test_storage_persistence_eviction.py::test_persistence_and_eviction[lru] PASSED [ 64%]
tests/unit/legacy/test_storage_persistence_eviction.py::test_persistence_and_eviction[score] PASSED [ 64%]
tests/unit/legacy/test_storage_persistence_eviction.py::test_persistence_and_eviction[hybrid] PASSED [ 64%]
tests/unit/legacy/test_storage_ram_usage.py::test_current_ram_mb_empty_graph PASSED [ 64%]
tests/unit/legacy/test_storage_ram_usage.py::test_current_ram_mb_with_nodes PASSED [ 64%]
tests/unit/legacy/test_storage_ram_usage.py::test_current_ram_mb_with_attributes PASSED [ 64%]
tests/unit/legacy/test_storage_ram_usage.py::test_current_ram_mb_none_graph PASSED [ 64%]
tests/unit/legacy/test_storage_ram_usage.py::test_current_ram_mb_large_graph PASSED [ 64%]
tests/unit/legacy/test_storage_teardown.py::test_teardown_closes_resources PASSED [ 64%]
tests/unit/legacy/test_storage_teardown.py::test_teardown_removes_db_file PASSED [ 64%]
tests/unit/legacy/test_storage_teardown.py::test_teardown_handles_none_resources PASSED [ 64%]
tests/unit/legacy/test_storage_teardown.py::test_teardown_handles_close_error PASSED [ 64%]
tests/unit/legacy/test_storage_utils.py::test_touch_node_updates_lru PASSED [ 65%]
tests/unit/legacy/test_storage_utils.py::test_clear_all PASSED           [ 65%]
tests/unit/legacy/test_storage_utils.py::test_initialize_storage_creates_tables PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_valid PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_format[not a dict-Invalid claim format] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_format[123-Invalid claim format] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_format[claim2-Invalid claim format] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_format[None-Invalid claim format] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_missing_required_field[id-claim_data0] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_missing_required_field[type-claim_data1] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_missing_required_field[content-claim_data2] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[id-123-Invalid 'id' field] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[id-None-Invalid 'id' field] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[type-123-Invalid 'type' field] PASSED [ 65%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[type-None-Invalid 'type' field] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[content-123-Invalid 'content' field] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_claim_invalid_field_type[content-None-Invalid 'content' field] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_valid PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_format[not a list-Invalid query_embedding format] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_format[123-Invalid query_embedding format] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_format[query_embedding2-Invalid query_embedding format] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_format[None-Invalid query_embedding format] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_values[query_embedding0-Invalid query_embedding values] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_values[query_embedding1-Invalid query_embedding values] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_values[query_embedding2-Invalid query_embedding values] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_empty PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_k[0-Invalid k value] PASSED [ 66%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_k[-1-Invalid k value] PASSED [ 67%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_k[not an int-Invalid k value] PASSED [ 67%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_k[None-Invalid k value] PASSED [ 67%]
tests/unit/legacy/test_storage_validation.py::test_validate_vector_search_params_invalid_k[k4-Invalid k value] PASSED [ 67%]
tests/unit/legacy/test_storage_validation.py::test_format_vector_literal PASSED [ 67%]
tests/unit/legacy/test_streaming_webhook_sim.py::test_simulated_success_matches_bound PASSED [ 67%]
tests/unit/legacy/test_streamlit_accessibility.py::test_apply_accessibility PASSED [ 67%]
tests/unit/legacy/test_streamlit_accessibility.py::test_display_query_input_has_accessibility PASSED [ 67%]
tests/unit/legacy/test_streamlit_app_edgecases.py::test_apply_theme_settings PASSED [ 67%]
tests/unit/legacy/test_streamlit_app_edgecases.py::test_save_config_to_toml_error PASSED [ 67%]
tests/unit/legacy/test_streamlit_formatting.py::test_create_interaction_trace_contains_steps PASSED [ 67%]
tests/unit/legacy/test_streamlit_formatting.py::test_create_progress_graph PASSED [ 67%]
tests/unit/legacy/test_streamlit_formatting.py::test_format_result_markdown_json PASSED [ 67%]
tests/unit/legacy/test_streamlit_rerun.py::test_trigger_rerun_falls_back_to_experimental PASSED [ 67%]
tests/unit/legacy/test_streamlit_rerun.py::test_trigger_rerun_prefers_stable_api PASSED [ 68%]
tests/unit/legacy/test_streamlit_ui.py::test_apply_accessibility_settings_no_high_contrast PASSED [ 68%]
tests/unit/legacy/test_streamlit_ui.py::test_apply_theme_settings_light PASSED [ 68%]
tests/unit/legacy/test_streamlit_ui.py::test_display_guided_tour_dismiss PASSED [ 68%]
tests/unit/legacy/test_streamlit_ui.py::test_display_help_sidebar_dismiss PASSED [ 68%]
tests/unit/legacy/test_streamlit_ui_helpers.py::test_apply_theme_settings_dark PASSED [ 68%]
tests/unit/legacy/test_streamlit_utils.py::test_save_config_to_toml PASSED [ 68%]
tests/unit/legacy/test_streamlit_utils.py::test_apply_preset_names PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_build_answer_and_rationale PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_build_answer_empty_claims PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_build_answer_many_claims PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_build_rationale_empty_claims PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_compress_prompt_no_compression PASSED [ 68%]
tests/unit/legacy/test_synthesis.py::test_compress_prompt_with_compression PASSED [ 69%]
tests/unit/legacy/test_synthesis.py::test_compress_claims_no_compression PASSED [ 69%]
tests/unit/legacy/test_synthesis.py::test_compress_claims_with_compression PASSED [ 69%]
tests/unit/legacy/test_synthesizer_agent_modes.py::test_synthesizer_direct_mode PASSED [ 69%]
tests/unit/legacy/test_synthesizer_agent_modes.py::test_synthesizer_thesis_and_synthesis PASSED [ 69%]
tests/unit/legacy/test_system_monitor.py::test_system_monitor_collects PASSED [ 69%]
tests/unit/legacy/test_system_monitor.py::test_collect_returns_expected_tuple PASSED [ 69%]
tests/unit/legacy/test_system_monitor.py::test_collect_handles_failures PASSED [ 69%]
tests/unit/legacy/test_system_monitor.py::test_collect_normalizes_iterable_values PASSED [ 69%]
tests/unit/legacy/test_test_tools.py::test_mcp_test_connection PASSED    [ 69%]
tests/unit/legacy/test_test_tools.py::test_mcp_research_tool PASSED      [ 69%]
tests/unit/legacy/test_test_tools.py::test_a2a_query PASSED              [ 69%]
tests/unit/legacy/test_test_tools.py::test_a2a_capabilities PASSED       [ 69%]
tests/unit/legacy/test_test_tools.py::test_run_test_suite PASSED         [ 69%]
tests/unit/legacy/test_token_budget.py::test_budget_within_bounds PASSED [ 70%]
tests/unit/legacy/test_token_budget.py::test_budget_none_unmodified PASSED [ 70%]
tests/unit/legacy/test_token_budget.py::test_budget_scaling_exact PASSED [ 70%]
tests/unit/legacy/test_token_budget.py::test_budget_adaptive_history PASSED [ 70%]
tests/unit/legacy/test_token_budget.py::test_compress_prompt_history PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_suggest_token_budget_converges PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_budget_tracks_growth PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_budget_recovers_after_spike PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_margin_precision_converges PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_convergence_from_any_start PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_zero_usage_bottoms_out PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_initial_call_without_usage_keeps_budget PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_margin_boundaries_converge PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_agent_average_preserves_budget PASSED [ 70%]
tests/unit/legacy/test_token_budget_convergence.py::test_sparse_usage_retains_history PASSED [ 71%]
tests/unit/legacy/test_token_budget_convergence.py::test_budget_lower_bound PASSED [ 71%]
tests/unit/legacy/test_token_budget_heuristic.py::test_token_budget_adjustment PASSED [ 71%]
tests/unit/legacy/test_token_budget_property.py::test_compress_prompt_respects_budget PASSED [ 71%]
tests/unit/legacy/test_token_budget_property.py::test_prune_context_keeps_latest_items PASSED [ 71%]
tests/unit/legacy/test_token_budgeting_hypothesis.py::test_capture_token_usage_respects_budget PASSED [ 71%]
tests/unit/legacy/test_token_budgeting_hypothesis.py::test_negative_margin_treated_as_zero PASSED [ 71%]
tests/unit/legacy/test_token_budgeting_hypothesis.py::test_zero_start_remains_zero_without_usage PASSED [ 71%]
tests/unit/legacy/test_token_counting_utils.py::test_compress_prompt_reduces_tokens PASSED [ 71%]
tests/unit/legacy/test_token_counting_utils.py::test_prune_context_drops_old_messages PASSED [ 71%]
tests/unit/legacy/test_token_counting_utils.py::test_compress_prompt_zero_budget_handles_ellipsis PASSED [ 71%]
tests/unit/legacy/test_token_counting_utils.py::test_prune_context_zero_budget_returns_empty PASSED [ 71%]
tests/unit/legacy/test_token_monitoring.py::test_record_and_regression PASSED [ 71%]
tests/unit/legacy/test_token_usage.py::test_capture_token_usage_counts_correctly PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_token_budget_truncates_prompt PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_prompt_passed_to_adapter_is_compressed PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_compress_prompt_with_summarizer PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_summarizer_skipped_when_within_budget PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_summarizer_fallback_to_truncation PASSED [ 72%]
tests/unit/legacy/test_token_usage.py::test_budget_considers_agent_history PASSED [ 72%]
tests/unit/legacy/test_token_utils_module.py::test_capture_token_usage_counts PASSED [ 72%]
tests/unit/legacy/test_token_utils_module.py::test_execute_with_adapter_injection_methods PASSED [ 72%]
tests/unit/legacy/test_tracing.py::test_setup_tracing_idempotent PASSED  [ 72%]
tests/unit/legacy/test_tracing.py::test_setup_tracing_disabled PASSED    [ 72%]
tests/unit/legacy/test_tracing.py::test_span_export PASSED               [ 72%]
tests/unit/legacy/test_ui_save_config.py::test_save_config_to_toml PASSED [ 72%]
tests/unit/legacy/test_user_preferences.py::test_user_agent_loads_preferences PASSED [ 72%]
tests/unit/legacy/test_user_preferences.py::test_user_preferences_hot_reload PASSED [ 73%]
tests/unit/legacy/test_vector_search.py::test_create_hnsw_index PASSED   [ 73%]
tests/unit/legacy/test_vector_search.py::test_vector_search_builds_query PASSED [ 73%]
tests/unit/legacy/test_vector_search.py::test_vector_search_uses_config_nprobe PASSED [ 73%]
tests/unit/legacy/test_vector_search.py::test_vector_search_failure PASSED [ 73%]
tests/unit/legacy/test_vector_search.py::test_refresh_vector_index PASSED [ 73%]
tests/unit/legacy/test_vector_search.py::test_embedding_update_triggers_index_refresh PASSED [ 73%]
tests/unit/legacy/test_version.py::test_init_version_matches_pyproject PASSED [ 73%]
tests/unit/legacy/test_version.py::test_release_date_matches_pyproject PASSED [ 73%]
tests/unit/legacy/test_version.py::test_init_version_matches_metadata PASSED [ 73%]
tests/unit/legacy/test_visualization.py::test_save_knowledge_graph PASSED [ 73%]
tests/unit/legacy/test_visualization.py::test_save_knowledge_graph_spring_fallback PASSED [ 73%]
tests/unit/legacy/test_visualization_rdf.py::test_save_rdf_graph PASSED  [ 73%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_verify_extension_success PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_verify_extension_failure PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_verify_extension_fallback_to_stub_probe PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_from_filesystem_success PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_from_filesystem_invalid_path PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_from_filesystem_file_not_found PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_from_filesystem_verification_failure PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_download_success PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_offline_fallbacks_quiet_logs[package] PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_offline_fallbacks_quiet_logs[local] PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_offline_fallbacks_quiet_logs[marker] PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_download_failure_non_strict PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_download_failure_strict PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_load_extension_download_unhandled_exception PASSED [ 74%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_missing_extension_path_skips_loading PASSED [ 75%]
tests/unit/legacy/test_vss_extension_loader.py::TestVSSExtensionLoader::test_invalid_extension_file_skips_loading PASSED [ 75%]
tests/unit/legacy/test_vss_has_vss.py::test_has_vss_with_dummy_backend PASSED [ 75%]
tests/unit/legacy/test_webhooks_logging.py::test_notify_webhook_logs_request_error PASSED [ 75%]
tests/unit/legacy/test_webhooks_logging.py::test_notify_webhook_retries PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_passes_through_model_identifier PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_timeout_env PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_http_error_surfaces_metadata PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_request_exception_has_default_suggestion PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_discovery_success PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_discovery_failure PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_discovery_empty_response PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_discovery_malformed_response PASSED [ 75%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_validation_with_discovered_models PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_info_comprehensive PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_context_size_estimation PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_token_estimation PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_context_fit_checking PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_intelligent_truncation PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_adaptive_token_budgeting PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_usage_recording PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_context_size_suggestions PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_context_aware_generation PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_enhanced_model_selection_integration PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_model_discovery_fallback_behavior PASSED [ 76%]
tests/unit/llm/test_lmstudio_adapter.py::test_lmstudio_adapter_performance_tracking PASSED [ 76%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_adapter_initialization PASSED [ 76%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_model_discovery_success PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_model_discovery_failure PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_context_size_estimation PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_prompt_truncation PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_adaptive_token_budgeting PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_model_validation PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_performance_tracking PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestLMStudioAdapter::test_adapter_configuration PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestEnhancedModelSelection::test_environment_variable_selection PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestEnhancedModelSelection::test_agent_specific_environment_variable PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestEnhancedModelSelection::test_config_fallback_selection PASSED [ 77%]
tests/unit/llm/test_lmstudio_integration.py::TestEnhancedModelSelection::test_model_availability_check PASSED [ 77%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_api_key_detection PASSED [ 77%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_password_detection_in_strings PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_email_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_credit_card_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_phone_number_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_url_credential_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_jwt_token_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_ssn_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_nested_dictionary_sanitization PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_list_sanitization PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_sensitive_field_name_detection PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_sensitivity_levels PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_unicode_and_international_formats PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_false_positives_avoidance PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_performance_under_load PASSED [ 78%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_edge_cases PASSED [ 79%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_integration_with_structlog PASSED [ 79%]
tests/unit/logging/test_sensitive_data.py::TestSensitiveDataFilter::test_benchmark_sanitization_performance PASSED [ 79%]
tests/unit/monitor/test_metrics_endpoint.py::test_metrics_endpoint_decodes_prometheus_payload PASSED [ 79%]
tests/unit/monitor/test_metrics_endpoint.py::test_metrics_endpoint_coerces_bytearray PASSED [ 79%]
tests/unit/monitor/test_metrics_endpoint.py::test_metrics_endpoint_handles_memoryview PASSED [ 79%]
tests/unit/monitor/test_metrics_endpoint.py::test_metrics_endpoint_replaces_invalid_bytes PASSED [ 79%]
tests/unit/monitor/test_metrics_endpoint.py::test_metrics_endpoint_handles_failure PASSED [ 79%]
tests/unit/orchestration/test_answer_audit.py::test_answer_audit_preserves_answer_and_emits_warnings PASSED [ 79%]
tests/unit/orchestration/test_answer_audit.py::test_answer_audit_needs_review_warning PASSED [ 79%]
tests/unit/orchestration/test_answer_audit.py::test_output_formatter_uses_structured_warnings PASSED [ 79%]
tests/unit/orchestration/test_answer_audit.py::test_answer_audit_retry_handles_equal_scores PASSED [ 79%]
tests/unit/orchestration/test_auto_mode.py::test_auto_mode_returns_direct_answer_when_gate_exits PASSED [ 79%]
tests/unit/orchestration/test_auto_mode.py::test_auto_mode_escalates_to_debate_when_gate_requires_loops PASSED [ 80%]
tests/unit/orchestration/test_auto_mode.py::test_metrics_record_gate_decision_telemetry PASSED [ 80%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_scaled_by_loops_and_limits PASSED [ 80%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_minimum_buffer_applied PASSED [ 80%]
tests/unit/orchestration/test_budgeting_algorithm.py::test_budget_unchanged_within_bounds PASSED [ 80%]
tests/unit/orchestration/test_circuit_breaker_determinism.py::test_circuit_breaker_determinism_and_recovery PASSED [ 80%]
tests/unit/orchestration/test_circuit_breaker_thresholds.py::test_circuit_breaker_threshold_and_recovery PASSED [ 80%]
tests/unit/orchestration/test_gate_policy.py::test_scout_gate_reduces_loops_when_signals_low PASSED [ 80%]
tests/unit/orchestration/test_gate_policy.py::test_scout_gate_respects_force_debate_override PASSED [ 80%]
tests/unit/orchestration/test_gate_policy.py::test_scout_gate_flags_coverage_gap_and_confidence PASSED [ 80%]
tests/unit/orchestration/test_gate_policy.py::test_scout_gate_applies_graph_thresholds PASSED [ 80%]
tests/unit/orchestration/test_metrics_graph_summary.py::test_graph_summary_uses_typed_floats PASSED [ 80%]
tests/unit/orchestration/test_metrics_graph_summary.py::test_graph_build_skips_empty_payload PASSED [ 80%]
tests/unit/orchestration/test_metrics_graph_summary.py::test_graph_ingestion_saved_payload_is_sanitized PASSED [ 80%]
tests/unit/orchestration/test_model_routing.py::test_routing_records_constraints_without_switching PASSED [ 81%]
tests/unit/orchestration/test_model_routing.py::test_summary_reports_agent_constraints PASSED [ 81%]
tests/unit/orchestration/test_orchestration_simulations.py::test_circuit_breaker_sim_is_deterministic PASSED [ 81%]
tests/unit/orchestration/test_orchestration_simulations.py::test_parallel_execution_sim_is_deterministic PASSED [ 81%]
tests/unit/orchestration/test_orchestration_simulations.py::test_cli_runs_modes PASSED [ 81%]
tests/unit/orchestration/test_package_exports.py::test_agent_factory_export PASSED [ 81%]
tests/unit/orchestration/test_package_exports.py::test_agent_registry_export PASSED [ 81%]
tests/unit/orchestration/test_package_exports.py::test_orchestrator_export PASSED [ 81%]
tests/unit/orchestration/test_package_exports.py::test_storage_manager_export PASSED [ 81%]
tests/unit/orchestration/test_parallel_execute.py::test_execute_parallel_query_error_and_timeout PASSED [ 81%]
tests/unit/orchestration/test_parallel_execute.py::test_execute_parallel_query_all_fail PASSED [ 81%]
tests/unit/orchestration/test_parallel_execute.py::test_execute_parallel_query_reasoning_normalization PASSED [ 81%]
tests/unit/orchestration/test_parallel_merge_invariant.py::test_parallel_merge_invariant PASSED [ 81%]
tests/unit/orchestration/test_query_state_features_extra.py::test_query_state_cloudpickle_serialization_preserves_fields SKIPPED [ 81%]
tests/unit/orchestration/test_query_state_features_extra.py::test_query_state_registry_clone_produces_independent_copies PASSED [ 82%]
tests/unit/orchestration/test_query_state_features_extra.py::test_query_state_model_copy_deep_clone_separates_mutable_data PASSED [ 82%]
tests/unit/orchestration/test_query_state_features_extra.py::test_query_state_registry_update_refreshes_snapshots PASSED [ 82%]
tests/unit/orchestration/test_query_state_features_extra.py::test_query_state_claims_auto_normalize_and_preserve_order PASSED [ 82%]
tests/unit/orchestration/test_reverify.py::test_reverify_extracts_claims_and_retries PASSED [ 82%]
tests/unit/orchestration/test_reverify.py::test_reverify_supplies_fact_checker_defaults PASSED [ 82%]
tests/unit/orchestration/test_reverify.py::test_reverify_respects_fact_checker_opt_out PASSED [ 82%]
tests/unit/orchestration/test_state_registry.py::test_register_and_clone_preserve_lock_and_metadata_types PASSED [ 82%]
tests/unit/orchestration/test_state_registry.py::test_config_model_deep_copy_with_embedded_lock PASSED [ 82%]
tests/unit/orchestration/test_state_registry.py::test_update_replaces_snapshot_and_preserves_lock_integrity PASSED [ 82%]
tests/unit/orchestration/test_state_registry.py::test_update_creates_snapshot_when_missing_identifier PASSED [ 82%]
tests/unit/orchestration/test_state_registry.py::test_registry_round_trip_rehydrates_state_with_fresh_lock PASSED [ 82%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_coordinator_initialization PASSED [ 82%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_ready_tasks_identifies_initial_tasks PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_task_scheduling_priority_ordering PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_task_lifecycle_management PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_dependency_resolution_with_cycles PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_react_trace_recording PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_scheduler_snapshot_functionality PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_metadata_adaptation PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_dependency_list_coercion PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_task_status_summary PASSED [ 83%]
tests/unit/orchestration/test_task_coordinator.py::TestTaskCoordinator::test_complex_dependency_resolution PASSED [ 83%]
tests/unit/orchestration/test_task_graph_enhancements.py::test_task_graph_from_planner_output_preserves_dependency_metadata PASSED [ 83%]
tests/unit/orchestration/test_task_graph_enhancements.py::test_query_state_normalises_socratic_checks_and_overview PASSED [ 83%]
tests/unit/orchestration/test_task_graph_enhancements.py::test_task_coordinator_uses_depth_and_affinity PASSED [ 83%]
tests/unit/orchestration/test_token_utils.py::test_execute_with_adapter_kwarg PASSED [ 83%]
tests/unit/orchestration/test_token_utils.py::test_execute_with_mutation_hooks_restores_original PASSED [ 84%]
tests/unit/orchestration/test_token_utils.py::test_execute_without_adapter_hooks PASSED [ 84%]
tests/unit/orchestration/test_token_utils.py::test_execute_raises_for_non_mapping_result PASSED [ 84%]
tests/unit/orchestration/test_token_utils.py::test_type_guards_detect_adapter_features PASSED [ 84%]
tests/unit/orchestration/test_token_utils.py::test_is_agent_execution_result_guard PASSED [ 84%]
tests/unit/orchestration/test_utils_confidence.py::test_metrics_snapshot_parses_token_usage PASSED [ 84%]
tests/unit/orchestration/test_utils_confidence.py::test_confidence_adjusts_with_metrics_payload PASSED [ 84%]
tests/unit/orchestration/test_utils_confidence.py::test_graph_metrics_payload_is_sanitized PASSED [ 84%]
tests/unit/search/test_adaptive_rewrite.py::test_external_lookup_triggers_query_rewrite PASSED [ 84%]
tests/unit/search/test_adaptive_rewrite.py::test_external_lookup_adaptive_k_increases_fetch PASSED [ 84%]
tests/unit/search/test_adaptive_rewrite.py::test_adaptive_k_refreshes_cache_shortfall PASSED [ 84%]
tests/unit/search/test_adaptive_rewrite.py::test_query_strategy_markers_disabled PASSED [ 84%]
tests/unit/search/test_adaptive_rewrite.py::test_self_critique_markers_disabled PASSED [ 84%]
tests/unit/search/test_property_ranking_monotonicity.py::test_monotonic_ranking PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_query_expansion_converges PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_reset_instance_creates_new_singleton PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_extract_entities_with_spacy PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_build_topic_model_with_insufficient_docs PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_try_imports_disabled PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_try_import_sentence_transformers_success PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_search_embedding_protocol_prefers_embed PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_search_embedding_protocol_falls_back_to_encode PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_search_sentence_transformer_fallback_cached PASSED [ 85%]
tests/unit/search/test_query_expansion_convergence.py::test_search_embedding_backend_switches_without_reset PASSED [ 85%]
tests/unit/search/test_ranking_convergence_extra.py::TestDocScores::test_doc_scores_creation PASSED [ 85%]
tests/unit/search/test_ranking_convergence_extra.py::TestDocScores::test_doc_scores_frozen PASSED [ 85%]
tests/unit/search/test_ranking_convergence_extra.py::TestRelevanceScores::test_relevance_scores_basic PASSED [ 85%]
tests/unit/search/test_ranking_convergence_extra.py::TestRelevanceScores::test_relevance_scores_equal_weights PASSED [ 86%]
tests/unit/search/test_ranking_convergence_extra.py::TestSimulateRankingConvergence::test_simulate_convergence_basic PASSED [ 86%]
tests/unit/search/test_ranking_convergence_extra.py::TestSimulateRankingConvergence::test_simulate_convergence_single_iteration PASSED [ 86%]
tests/unit/search/test_ranking_convergence_extra.py::TestSimulateRankingConvergence::test_simulate_convergence_no_iterations PASSED [ 86%]
tests/unit/search/test_ranking_convergence_simulation_extra.py::test_ranking_converges SKIPPED [ 86%]
tests/unit/search/test_ranking_convergence_simulation_extra.py::test_invalid_weights_raise SKIPPED [ 86%]
tests/unit/search/test_ranking_formula.py::test_combine_scores_weighted_sum PASSED [ 86%]
tests/unit/search/test_ranking_formula.py::test_combine_scores_requires_convex_weights PASSED [ 86%]
tests/unit/search/test_ranking_formula.py::test_duckdb_scores_used_without_semantic PASSED [ 86%]
tests/unit/search/test_ranking_formula.py::test_rank_results_weighted_combination PASSED [ 86%]
tests/unit/search/test_ranking_formula.py::test_rank_results_weight_fallback PASSED [ 86%]
tests/unit/search/test_session_retry.py::test_http_session_retries_and_reuse PASSED [ 86%]
tests/unit/search/test_session_retry.py::test_http_session_recovery PASSED [ 86%]
tests/unit/search/test_session_retry.py::test_http_session_adapter_failure PASSED [ 87%]
tests/unit/search/test_simulate_rate_limit.py::test_default_backoff PASSED [ 87%]
tests/unit/search/test_simulate_rate_limit.py::test_custom_backoff PASSED [ 87%]
tests/unit/storage/test_backup_scheduler.py::test_scheduler_runs_backup_and_reschedules PASSED [ 87%]
tests/unit/storage/test_backup_scheduler.py::test_scheduler_restarts_existing_timer PASSED [ 87%]
tests/unit/storage/test_backup_scheduler.py::test_scheduler_prevents_cancelled_timer_from_rescheduling PASSED [ 87%]
tests/unit/storage/test_backup_scheduler.py::test_backup_manager_schedule_uses_resolved_scheduler PASSED [ 87%]
tests/unit/storage/test_backup_scheduler.py::test_rotation_policy_removes_excess_and_stale_backups PASSED [ 87%]
tests/unit/storage/test_claim_audit_persistence.py::test_persist_claim_audit_payload_updates_backends PASSED [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_backend_initialization PASSED [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_setup_with_memory_database PASSED [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_setup_with_file_database PASSED [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_setup_schema_initialization XFAIL [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_schema_version_management PASSED [ 87%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_persist_claim_functionality XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_persist_multiple_claims XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_update_claim_functionality XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_persist_graph_entities XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_persist_graph_relations XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_persist_claim_audit XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_list_claim_audits XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_hnsw_index_creation XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_migration_functionality XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_connection_error_handling PASSED [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_transaction_rollback_on_error XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_concurrent_access_safety XFAIL [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_embedding_persistence PASSED [ 88%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_cleanup_on_close PASSED [ 89%]
tests/unit/storage/test_duckdb_storage_backend_extra.py::TestDuckDBStorageBackend::test_backend_reuse_after_close XFAIL [ 89%]
tests/unit/storage/test_knowledge_graph.py::test_ingest_persists_exports_and_updates_summary PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_to_json_dict_returns_copy PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_init_rdf_store_supports_protocol PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_init_rdf_store_memory_backend PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_init_rdf_store_invalid_backend PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_init_rdf_store_oxigraph_missing_driver PASSED [ 89%]
tests/unit/storage/test_protocols.py::test_init_rdf_store_berkeleydb_creates_directory PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityBasic::test_both_adapters_initialize PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityBasic::test_both_adapters_have_available_models PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityBasic::test_both_adapters_support_model_validation PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityContextManagement::test_both_adapters_have_context_size_methods PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityContextManagement::test_both_adapters_have_token_estimation PASSED [ 89%]
tests/unit/test_adapter_parity.py::TestAdapterParityContextManagement::test_context_size_values_are_reasonable PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityContextManagement::test_token_estimation_consistency PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityErrorHandling::test_both_adapters_have_error_handling_methods PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityErrorHandling::test_both_adapters_handle_network_errors SKIPPED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityCaching::test_both_adapters_have_caching_capabilities PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityConfiguration::test_both_adapters_support_environment_configuration PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityAdvancedFeatures::test_openrouter_has_lmstudio_level_features PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityAdvancedFeatures::test_both_adapters_support_streaming SKIPPED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityPerformance::test_both_adapters_initialize_quickly PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityPerformance::test_both_adapters_cache_effectively PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityIntegration::test_adapters_work_with_llm_factory PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityIntegration::test_adapters_maintain_compatibility SKIPPED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityIntegration::test_adapters_handle_edge_cases_similarly PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityRegression::test_openrouter_matches_lmstudio_feature_set PASSED [ 90%]
tests/unit/test_adapter_parity.py::TestAdapterParityRegression::test_error_handling_sophistication_parity PASSED [ 91%]
tests/unit/test_adapter_parity.py::TestAdapterParityRegression::test_configuration_parity PASSED [ 91%]
tests/unit/test_adapter_parity.py::TestAdapterParityRegression::test_performance_characteristics_parity SKIPPED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_validate_log_tail_accepts_expected_final_line PASSED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_validate_log_tail_rejects_incorrect_tail PASSED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_validate_coverage_xml_accepts_threshold PASSED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_validate_coverage_xml_rejects_low_rate PASSED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_validate_coverage_xml_requires_line_rate PASSED [ 91%]
tests/unit/test_archive_task_coverage_minimal.py::test_copy_coverage_outputs_rejects_invalid_line_rate PASSED [ 91%]
tests/unit/test_collection_hygiene.py::test_guard_flags_imports_before_future_directive PASSED [ 91%]
tests/unit/test_collection_hygiene.py::test_guard_flags_assignments_before_future_directive PASSED [ 91%]
tests/unit/test_collection_hygiene.py::test_guard_ignores_valid_future_import_order PASSED [ 91%]
tests/unit/test_collection_hygiene.py::test_guard_accepts_repo_conftest PASSED [ 91%]
tests/unit/test_collection_hygiene.py::test_enforce_guard_raises_usage_error PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_creation PASSED   [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_has_search_command PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_has_serve_command PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_has_capabilities_command PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_has_completion_command PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_cli_app_error_handling PASSED [ 92%]
tests/unit/test_main_app.py::TestMainApp::test_search_accepts_depth_alias PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_evaluation_app_creation PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_evaluation_app_has_run_command PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_normalise_suite_single_dataset PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_normalise_suite_all_datasets PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_normalise_suite_case_insensitive PASSED [ 92%]
tests/unit/test_main_app.py::TestCliEvaluation::test_available_datasets_functionality PASSED [ 92%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_resolve_requests_session_none PASSED [ 93%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_resolve_requests_session_direct PASSED [ 93%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_annotation_supports_mapping_basic_types PASSED [ 93%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_annotation_supports_mapping_generic PASSED [ 93%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_as_storage_queue_none PASSED [ 93%]
tests/unit/test_main_app.py::TestDistributedExecutors::test_resolve_storage_queue_none PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterInitialization::test_initialization_with_defaults PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterInitialization::test_initialization_with_custom_config PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterInitialization::test_initialization_with_invalid_ttl PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterInitialization::test_available_models_property PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_model_discovery_without_api_key PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_model_discovery_with_api_key_success PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_model_discovery_with_api_key_error PASSED [ 93%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_context_size_caching PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_context_size_cache_expiry PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_cache_management_methods PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterModelDiscovery::test_refresh_model_cache_with_api_key PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_successful_generation_no_retries SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_successful_requests_no_retries PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_retry_on_rate_limit SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_max_retries_exceeded SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_non_retryable_error_no_retries SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_is_retryable_error_logic PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterRetryLogic::test_get_retry_after_header PASSED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterErrorHandling::test_authentication_error_handling SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterErrorHandling::test_insufficient_credits_error_handling SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterErrorHandling::test_model_not_found_error_handling SKIPPED [ 94%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterErrorHandling::test_rate_limit_error_handling SKIPPED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterErrorHandling::test_server_error_handling SKIPPED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterIntegration::test_full_generation_workflow SKIPPED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterIntegration::test_adapter_thread_safety PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_empty_prompt_handling PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_very_long_prompt_handling PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_none_model_handling PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_invalid_model_name_handling PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_adapter_reinitialization PASSED [ 95%]
tests/unit/test_openrouter_adapter.py::TestOpenRouterAdapterEdgeCases::test_environment_variable_changes PASSED [ 95%]
tests/unit/test_output_formatter.py::test_output_formatter_json_markdown PASSED [ 95%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_trigger_rerun SKIPPED [ 95%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_config_editor_basic SKIPPED [ 95%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_track_agent_performance PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_collect_system_metrics PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_update_metrics_periodically_threading PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_agent_performance_ui SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_metrics_dashboard SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_setup_logging PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_log_viewer SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_initialize_session_state PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_query_input SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_store_query_history PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_display_query_history SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_main_initialization SKIPPED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_metrics_collection_accuracy PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_agent_performance_tracking_integration PASSED [ 96%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_session_state_persistence PASSED [ 97%]
tests/unit/test_streamlit_app.py::TestStreamlitApp::test_query_history_storage_format PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_color_contrast_compliant_colors PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_color_contrast_non_compliant_colors PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_color_contrast_same_colors PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_button_without_label PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_button_with_label PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_invalid_role PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_valid_role PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_describedby_format PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_aria_attributes_describedby_valid_format PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_keyboard_navigation_form PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_keyboard_navigation_tabs PASSED [ 97%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_generate_alt_text_knowledge_graph PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_generate_alt_text_metrics_chart PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_generate_alt_text_generic PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_proper_headings PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_heading_jump PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_empty_heading PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_unlabeled_landmark PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_labeled_landmark PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_unlabeled_input PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityValidator::test_validate_semantic_structure_labeled_input PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_enhance_button_adds_aria_label PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_enhance_text_input_adds_aria_label PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_enhance_selectbox_adds_aria_label PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_enhance_tabs_adds_aria_label PASSED [ 98%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_create_accessible_chart_generates_alt_text PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_create_skip_link PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_announce_to_screen_reader PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityEnhancer::test_create_aria_landmark PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityIntegration::test_comprehensive_accessibility_application PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityIntegration::test_validate_current_accessibility PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityIntegration::test_accessibility_validator_caching PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestComponentAccessibility::test_query_input_component_accessibility PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestComponentAccessibility::test_query_input_component_dangerous_content_detection PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestComponentAccessibility::test_query_input_component_length_validation PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestComponentAccessibility::test_results_display_component_accessibility_features PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestComponentAccessibility::test_config_editor_component_accessibility_features PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityPerformance::test_color_contrast_validation_performance PASSED [ 99%]
tests/unit/ui/test_accessibility.py::TestAccessibilityPerformance::test_accessibility_validator_caching_improves_performance PASSED [100%]

=============================== warnings summary ===============================
.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:833
  /Users/caitlyn/Projects/github.com/ravenoak/autoresearch/.venv/lib/python3.12/site-packages/_pytest/config/__init__.py:833: PytestAssertRewriteWarning: Module already imported so cannot be rewritten; tests.behavior.utils
    self.import_plugin(import_spec)

tests/unit/legacy/test_kg_reasoning.py::test_run_ontology_reasoner_reload_without_owlrl
  /Users/caitlyn/Projects/github.com/ravenoak/autoresearch/src/autoresearch/kg_reasoning.py:60: RuntimeWarning: owlrl not installed; ontology reasoning will be skipped
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html

------------------------------------------------------------- benchmark: 1 tests ------------------------------------------------------------
Name (time in us)                               Min       Max     Mean   StdDev   Median     IQR   Outliers  OPS (Kops/s)  Rounds  Iterations
---------------------------------------------------------------------------------------------------------------------------------------------
test_benchmark_sanitization_performance     40.2910  959.5000  49.8565  27.5001  42.6250  1.2080  1131;2129       20.0576   13849           1
---------------------------------------------------------------------------------------------------------------------------------------------

Legend:
  Outliers: 1 Standard Deviation from Mean; 1.5 IQR (InterQuartile Range) from 1st Quartile and 3rd Quartile.
  OPS: Operations Per Second, computed as 1 / Mean
= 1274 passed, 69 skipped, 25 deselected, 13 xfailed, 2 warnings in 69.50s (0:01:09) =
