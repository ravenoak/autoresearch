[pytest]
minversion = 6.0
addopts = -m 'not slow and not pending'
testpaths = tests/unit tests/integration tests/behavior tests/behavior/features
bdd_features_base_dir = tests/behavior/features
norecursedirs = tests/behavior/archive
python_files = test_*.py *_steps.py
markers =
    behavior: mark behavior (BDD) tests
    integration: mark integration tests
    unit: mark unit tests
    real_vss: enable actual VSS extension logic
    slow: tests that take a long time to run
    requires_ui: tests that depend on the ui extra
    requires_vss: tests that depend on the vss extra
    requires_git: tests that depend on the git extra
    requires_nlp: tests needing NLP resources
    requires_distributed: tests that depend on the distributed extra
    requires_analysis: tests that depend on the analysis extra
    requires_llm: tests that depend on the llm extra
    requires_parsers: tests that depend on the parsers extra
    requires_gpu: tests that depend on the gpu extra
    redis: tests that interact with Redis
    error_recovery: behavior tests verifying recovery paths
    reasoning_modes: behavior tests exploring reasoning strategies
    user_workflows: behavior tests for end-to-end user workflows
    a2a_mcp: behavior tests for A2A MCP integration
    pending: placeholder behavior tests awaiting implementation
filterwarnings =
    # spacy CLI imports deprecated Click parser function; awaiting upstream fix
    ignore:Importing 'parser.split_arg_string' is deprecated:DeprecationWarning:spacy.cli._util
    # weasel uses deprecated Click parser function; awaiting upstream fix
    ignore:Importing 'parser.split_arg_string' is deprecated:DeprecationWarning:weasel.util.config
    # importlib load_module deprecated in Python 3.15; triggered by test imports
    ignore:the load_module\(\) method is deprecated and slated for removal in Python 3.15:DeprecationWarning
    # Pydantic v2.11 deprecates instance access to model_fields
    ignore:Accessing the 'model_fields' attribute on the instance is deprecated.*:pydantic.warnings.PydanticDeprecatedSince211
    # Pydantic v2.11 deprecates instance access to model_computed_fields
    ignore:Accessing the 'model_computed_fields' attribute on the instance is deprecated.*:pydantic.warnings.PydanticDeprecatedSince211
